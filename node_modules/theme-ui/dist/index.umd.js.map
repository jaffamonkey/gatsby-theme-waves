{"version":3,"file":"index.umd.js","sources":["../src/jsx.js","../src/merge.js","../src/styled.js","../src/themed.js","../src/components.js","../src/context.js","../src/color-modes.js","../src/provider.js","../src/layout.js"],"sourcesContent":["import { jsx as emotion } from '@emotion/core'\nimport css from '@styled-system/css'\n\nconst getCSS = props => {\n  if (!props.sx && !props.css) return undefined\n  return theme => {\n    const styles = css(props.sx)(theme)\n    const raw = typeof props.css === 'function' ? props.css(theme) : props.css\n    return [styles, raw]\n  }\n}\n\nconst parseProps = props => {\n  if (!props) return null\n  const next = {}\n  for (let key in props) {\n    if (key === 'sx') continue\n    next[key] = props[key]\n  }\n  next.css = getCSS(props)\n  return next\n}\n\nexport const jsx = (type, props, ...children) =>\n  emotion.apply(undefined, [type, parseProps(props), ...children])\n\nexport default jsx\n","import deepmerge from 'deepmerge'\n\nconst canUseSymbol = typeof Symbol === 'function' && Symbol.for\n\nconst REACT_ELEMENT = canUseSymbol ? Symbol.for('react.element') : 0xeac7\nconst FORWARD_REF = canUseSymbol ? Symbol.for('react.forward_ref') : 0xeac7\n\nconst isMergeableObject = n => {\n  return (\n    !!n &&\n    typeof n === 'object' &&\n    n.$$typeof !== REACT_ELEMENT &&\n    n.$$typeof !== FORWARD_REF\n  )\n}\n\nexport const merge = (a, b) =>\n  deepmerge(a, b, {\n    isMergeableObject,\n  })\n\nmerge.all = (...args) => deepmerge.all(args, { isMergeableObject })\n\nexport default merge\n","import { forwardRef, useContext } from 'react'\nimport { ThemeContext } from '@emotion/core'\nimport isPropValid from '@emotion/is-prop-valid'\nimport jsx from './jsx'\n\nexport const styled = tag => (...args) => {\n  const shouldForwardProps = typeof tag === 'function'\n  const Styled = forwardRef(({ as, ...props }, ref) => {\n    const theme = useContext(ThemeContext)\n    let nextProps = shouldForwardProps ? props : {}\n    let styles = {}\n    args.forEach(arg => {\n      const style = typeof arg === 'function' ? arg({ theme, ...props }) : arg\n      Object.assign(styles, style)\n    })\n\n    if (!shouldForwardProps) {\n      for (let key in props) {\n        if (!isPropValid(key)) continue\n        nextProps[key] = props[key]\n      }\n    }\n\n    return jsx(as || tag, {\n      ...nextProps,\n      css: styles,\n    })\n  })\n  return Styled\n}\n\nexport default styled\n","import { css, get } from '@styled-system/css'\n\nexport const themed = key => props =>\n  css(get(props.theme, `styles.${key}`))(props.theme)\n\nexport default themed\n","import styled from './styled'\nimport themed from './themed'\n\nconst tags = [\n  'p',\n  'b',\n  'i',\n  'a',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'img',\n  'pre',\n  'code',\n  'ol',\n  'ul',\n  'li',\n  'blockquote',\n  'hr',\n  'em',\n  'table',\n  'tr',\n  'th',\n  'td',\n  'em',\n  'strong',\n  'delete',\n  // mdx\n  'inlineCode',\n  'thematicBreak',\n  // other\n  'div',\n  // theme-ui\n  'root',\n]\n\nconst aliases = {\n  inlineCode: 'code',\n  thematicBreak: 'hr',\n  root: 'div',\n}\n\nconst alias = n => aliases[n] || n\n\nexport const Styled = styled('div')(themed('div'))\n\nexport const components = {}\n\ntags.forEach(tag => {\n  components[tag] = styled(alias(tag))(themed(tag))\n  Styled[tag] = components[tag]\n})\n\nexport const createComponents = (components = {}) => {\n  const next = {}\n  Object.keys(components).forEach(key => {\n    next[key] = styled(components[key])(themed(key))\n  })\n  return next\n}\n","import { createContext, useContext } from 'react'\nimport { components } from './components'\n\nexport const Context = createContext({\n  theme: {},\n  components,\n})\n\nexport const useThemeUI = () => useContext(Context)\n","import React, { useState, useEffect } from 'react'\nimport { css } from '@styled-system/css'\nimport { Global } from '@emotion/core'\nimport { useThemeUI } from './context'\n\nconst STORAGE_KEY = 'theme-ui-color-mode'\n\nconst storage = {\n  get: init => window.localStorage.getItem(STORAGE_KEY) || init,\n  set: value => window.localStorage.setItem(STORAGE_KEY, value),\n}\n\nexport const getMediaQuery = () => {\n  const darkQuery = '(prefers-color-scheme: dark)'\n  const mql = window.matchMedia ? window.matchMedia(darkQuery) : {}\n  const dark = mql.media === darkQuery\n  return dark && mql.matches\n}\n\nexport const useColorState = initialMode => {\n  const [mode, setMode] = useState(initialMode)\n\n  useEffect(() => {\n    // initialize\n    const stored = storage.get()\n    document.body.classList.remove('theme-ui-' + stored)\n    const dark = getMediaQuery()\n    if (!stored && dark) return setMode('dark')\n    if (!stored || stored === mode) return\n    setMode(stored)\n  }, [])\n\n  useEffect(() => {\n    if (!mode) return\n    storage.set(mode)\n  }, [mode])\n\n  return [mode, setMode]\n}\n\nexport const useColorMode = initialMode => {\n  const { colorMode, setColorMode } = useThemeUI()\n\n  if (typeof setColorMode !== 'function') {\n    throw new Error(`[useColorMode] requires the ThemeProvider component`)\n  }\n\n  return [colorMode, setColorMode]\n}\n\nconst bodyColor = (theme = {}) => {\n  if (!theme.colors || !theme.colors.modes) return\n  const { modes } = theme.colors\n  const styles = {}\n  Object.keys(modes).forEach(mode => {\n    const colors = modes[mode]\n    styles[`&.theme-ui-${mode}`] = theme.useCustomProperties\n      ? colors\n      : { color: colors.text, bg: colors.background }\n  })\n\n  return css({\n    body: {\n      ...styles,\n      color: 'text',\n      bg: 'background',\n    },\n  })(theme)\n}\n\nexport const ColorMode = () => <Global styles={bodyColor} />\n\nexport default useColorMode\n","import { useEffect, useReducer } from 'react'\nimport { ThemeContext as EmotionContext } from '@emotion/core'\nimport { MDXProvider } from '@mdx-js/react'\nimport { get } from '@styled-system/css'\nimport merge from './merge'\nimport jsx from './jsx'\nimport { Context, useThemeUI } from './context'\nimport { useColorState } from './color-modes'\nimport { createComponents } from './components'\n\nconst mergeState = (state, next) => merge.all({}, state, next)\n\nconst colorModesToCSSProperties = modes => {\n  return Object.keys(modes).reduce((parsedModes, modeKey) => {\n    const colors = modes[modeKey]\n    return {\n      ...parsedModes,\n      [modeKey]: Object.keys(colors).reduce(\n        (parsedColors, colorKey) => ({\n          ...parsedColors,\n          [`--theme-ui-${colorKey}`]: colors[colorKey],\n        }),\n        {}\n      ),\n    }\n  }, {})\n}\n\nconst applyCSSProperties = theme => {\n  const { colors } = theme\n  return {\n    ...theme,\n    colors: Object.keys(colors).reduce(\n      (parsedColors, key) => ({\n        ...parsedColors,\n        [key]:\n          key === 'modes'\n            ? colorModesToCSSProperties(colors[key])\n            : `var(--theme-ui-${key}, ${colors[key]})`,\n      }),\n      {}\n    ),\n  }\n}\n\nconst applyColorMode = (theme, mode) => {\n  if (!mode) return theme\n  const modes = get(theme, 'colors.modes', {})\n  return merge.all({}, theme, {\n    colors: get(modes, mode, {}),\n  })\n}\n\nconst BaseProvider = ({ context, components, children }) => {\n  const theme = context.theme\n  return jsx(\n    EmotionContext.Provider,\n    { value: theme.useCustomProperties ? applyCSSProperties(theme) : theme },\n    jsx(\n      MDXProvider,\n      { components },\n      jsx(Context.Provider, { value: context, children })\n    )\n  )\n}\n\nconst RootProvider = ({ theme: propsTheme = {}, components, children }) => {\n  // components are provided in the default Context\n  const outer = useThemeUI()\n  const [colorMode, setColorMode] = useColorState(propsTheme.initialColorMode)\n  const [themeState, setThemeState] = useReducer(mergeState, propsTheme)\n  const theme = applyColorMode(themeState, colorMode)\n\n  const context = {\n    __THEME_UI__: true,\n    colorMode,\n    setColorMode,\n    components: { ...outer.components, ...createComponents(components) },\n    theme,\n    setTheme: setThemeState,\n  }\n\n  useEffect(() => {\n    window.__THEME_UI__ = context\n  }, [context.theme, context.colorMode])\n\n  return jsx(BaseProvider, {\n    context,\n    components: context.components,\n    children,\n  })\n}\n\nconst NestedProvider = ({ theme, components, children }) => {\n  const outer = useThemeUI()\n  const context = merge.all({}, outer, { theme })\n\n  return jsx(BaseProvider, {\n    context,\n    components: createComponents(components),\n    children,\n  })\n}\n\nexport const ThemeProvider = props => {\n  const outer = useThemeUI()\n  if (outer.__THEME_UI__) {\n    return jsx(NestedProvider, props)\n  }\n  return jsx(RootProvider, props)\n}\n","import jsx from './jsx'\nimport styled from './styled'\n\nexport const Box = styled('div')({\n  boxSizing: 'border-box',\n  minWidth: 0,\n})\n\nexport const Flex = styled(Box)({\n  display: 'flex',\n})\n\n// root/page layout\nexport const Layout = props =>\n  jsx(Box, {\n    ...props,\n    sx: {\n      minHeight: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      variant: 'styles.Layout',\n    },\n  })\n\nexport const Header = props =>\n  jsx(Box, {\n    as: 'header',\n    ...props,\n    sx: {\n      display: 'flex',\n      variant: 'styles.Header',\n    },\n  })\n\nexport const Main = props =>\n  jsx(Box, {\n    as: 'main',\n    ...props,\n    sx: {\n      flex: '1 1 auto',\n      variant: 'styles.Main',\n    },\n  })\n\nexport const Container = props =>\n  jsx(Box, {\n    ...props,\n    sx: {\n      width: '100%',\n      minWidth: 0,\n      maxWidth: 1024,\n      mx: 'auto',\n      p: 4,\n      variant: 'styles.Container',\n    },\n  })\n\nexport const Footer = props =>\n  jsx(Box, {\n    as: 'footer',\n    ...props,\n    sx: {\n      display: 'flex',\n      variant: 'styles.Footer',\n    },\n  })\n"],"names":["getCSS","props","sx","css","undefined","theme","styles","raw","parseProps","next","key","jsx","type","children","emotion","apply","canUseSymbol","Symbol","REACT_ELEMENT","FORWARD_REF","isMergeableObject","n","$$typeof","merge","a","b","deepmerge","all","args","styled","tag","shouldForwardProps","Styled","forwardRef","ref","as","useContext","ThemeContext","nextProps","forEach","arg","style","Object","assign","isPropValid","themed","get","tags","aliases","inlineCode","thematicBreak","root","alias","components","createComponents","keys","Context","createContext","useThemeUI","STORAGE_KEY","storage","init","window","localStorage","getItem","set","value","setItem","getMediaQuery","darkQuery","mql","matchMedia","dark","media","matches","useColorState","initialMode","useState","mode","setMode","useEffect","stored","document","body","classList","remove","useColorMode","colorMode","setColorMode","Error","bodyColor","colors","modes","useCustomProperties","color","text","bg","background","ColorMode","React","Global","mergeState","state","colorModesToCSSProperties","reduce","parsedModes","modeKey","parsedColors","colorKey","applyCSSProperties","applyColorMode","BaseProvider","context","EmotionContext","Provider","MDXProvider","RootProvider","propsTheme","outer","initialColorMode","useReducer","themeState","setThemeState","__THEME_UI__","setTheme","NestedProvider","ThemeProvider","Box","boxSizing","minWidth","Flex","display","Layout","minHeight","flexDirection","variant","Header","Main","flex","Container","width","maxWidth","mx","p","Footer"],"mappings":"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"}