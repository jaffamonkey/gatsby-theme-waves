{"version":3,"file":"code-surfer.cjs.production.min.js","sources":["../src/code.js","../src/standalone/errors.tsx","../src/standalone/tokenizer.ts","../src/standalone/differ.ts","../src/standalone/focus-parser.ts","../src/standalone/themes/utils.ts","../src/standalone/themes/github.ts","../src/standalone/themes/dracula.ts","../src/standalone/themes/duotone-dark.ts","../src/standalone/themes/duotone-light.ts","../src/standalone/themes/night-owl.ts","../src/standalone/themes/oceanic-next.ts","../src/standalone/themes/shades-of-purple.ts","../src/standalone/themes/ultramin.ts","../src/standalone/themes/vs-dark.ts","../src/standalone/theming.ts","../src/standalone/tuple.ts","../src/standalone/animation-context.ts","../src/standalone/playhead/easing.ts","../src/standalone/playhead/playhead.tsx","../src/standalone/animations.tsx","../src/standalone/frame.tsx","../src/standalone/dimensions.ts","../src/standalone/code-surfer.tsx","../src/standalone/parse-steps.ts","../src/standalone/use-window-resize.ts","../src/step-reader.js","../src/codeblock-metastring-parser.ts","../src/error-boundary.tsx","../src/notes.js","../src/use-spring.js","../src/use-step-spring.js","../src/use-steps.js","../src/layout.tsx","../src/column-layout.tsx","../src/presenter.tsx","../src/themes.ts","../src/step.js"],"sourcesContent":["export default function Code() {\n  // We only use this to inspect the props from the element\n  return null;\n}\n","import React from \"react\";\n\ntype UnknownErrorProps = {\n  error: { toString: () => string };\n};\n\nexport function UnknownError({ error }: UnknownErrorProps) {\n  // TODO link to create issue\n  return <ErrorBox header=\"Oops, there's a problem\" body={error.toString()} />;\n}\n\nexport function grammarNotFound({ lang }: { lang: string }) {\n  return {\n    element: (\n      <ErrorBox\n        header=\"Oops, there's a problem\"\n        body={\n          <React.Fragment>\n            Syntax highlighter for <Mark>\"{lang}\"</Mark> not found.\n            <p>\n              You can try importing it from prismjs with: <br />\n              <Mark>import \"prismjs/components/prism-{lang}\"</Mark>\n            </p>\n            (See{\" \"}\n            <a\n              href=\"https://prismjs.com/#supported-languages\"\n              style={{ color: \"grey\" }}\n            >\n              all the supported languages\n            </a>\n            )\n          </React.Fragment>\n        }\n      />\n    )\n  };\n}\n\nexport function invalidFocusNumber(n: string) {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                <Mark>\"{n}\"</Mark> isn't a valid number{\" \"}\n                {n != focusString && <Mark> (in \"{focusString}\")</Mark>}\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\nexport function invalidLineOrColumnNumber() {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                Are you using \"0\" as a line or column number{\" \"}\n                <Mark>in \"{focusString}\"</Mark>?\n                <br />\n                (Line and column numbers should start at 1, not 0) <br />\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\ntype ErrorBoxProps = {\n  header: React.ReactNode;\n  body: React.ReactNode;\n};\n\nfunction ErrorBox({ header, body }: ErrorBoxProps) {\n  return (\n    <div\n      style={{\n        background: \"#290000\",\n        color: \"#b96f70\",\n        border: \"2px solid #b96f70\",\n        padding: \"10px 30px\",\n        maxWidth: \"90vw\",\n        margin: \"0 auto\",\n        fontFamily: \"monospace\",\n        fontSize: \"1rem\"\n      }}\n    >\n      <h3>{header}</h3>\n      <p>{body}</p>\n    </div>\n  );\n}\n\nfunction StepErrorHeader({ stepIndex }: { stepIndex: number }) {\n  return (\n    <React.Fragment>\n      Oops, there's a problem with the{\" \"}\n      <Mark>\n        {stepIndex + 1}\n        <sup>{ordinal(stepIndex + 1)}</sup> step\n      </Mark>\n    </React.Fragment>\n  );\n}\n\nfunction Mark({ children }: { children: React.ReactNode }) {\n  return (\n    <mark style={{ background: \"none\", color: \"pink\", fontWeight: \"bolder\" }}>\n      {children}\n    </mark>\n  );\n}\n\nfunction ordinal(i: number) {\n  var j = i % 10,\n    k = i % 100;\n  if (j == 1 && k != 11) {\n    return \"st\";\n  }\n  if (j == 2 && k != 12) {\n    return \"nd\";\n  }\n  if (j == 3 && k != 13) {\n    return \"rd\";\n  }\n  return \"th\";\n}\n","import { grammarNotFound } from \"./errors\";\n\n// // https://github.com/PrismJS/prism/issues/1303#issuecomment-375353987\n// global.Prism = { disableWorkerMessageHandler: true };\n// const Prism = require(\"prismjs\");\nimport Prism from \"prismjs\";\n\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\ntype NestedToken = {\n  type: string;\n  content: string | NestedToken[];\n};\n\ntype FlatToken = {\n  type: string;\n  content: string;\n};\n\n// Take a list of nested tokens\n// (token.content may contain an array of tokens)\n// and flatten it so content is always a string\n// and type the type of the leaf\nfunction flattenTokens(tokens: NestedToken[]) {\n  const flatList: FlatToken[] = [];\n  tokens.forEach(token => {\n    const { type, content } = token;\n    if (Array.isArray(content)) {\n      flatList.push(...flattenTokens(content));\n    } else {\n      flatList.push({ type, content });\n    }\n  });\n  return flatList;\n}\n\nfunction wrapToken(\n  prismToken: string | Prism.Token,\n  parentType = \"plain\"\n): NestedToken {\n  if (typeof prismToken === \"string\") {\n    return {\n      type: parentType,\n      content: prismToken\n    };\n  }\n\n  if (Array.isArray(prismToken.content)) {\n    return {\n      type: prismToken.type,\n      content: tokenizeStrings(prismToken.content, prismToken.type)\n    };\n  }\n\n  return wrapToken(prismToken.content, prismToken.type);\n}\n\n// Wrap strings in tokens\nfunction tokenizeStrings(\n  prismTokens: (string | Prism.Token)[],\n  parentType = \"plain\"\n): NestedToken[] {\n  return prismTokens.map(prismToken => wrapToken(prismToken, parentType));\n}\n\nexport default function tokenize(code: string, language = \"javascript\") {\n  const grammar = Prism.languages[language];\n  if (!grammar) {\n    throw grammarNotFound({ lang: language });\n  }\n  const prismTokens = Prism.tokenize(code, Prism.languages[language]);\n  const nestedTokens = tokenizeStrings(prismTokens);\n  const tokens = flattenTokens(nestedTokens);\n\n  let currentLine: FlatToken[] = [];\n  const lines = [currentLine];\n  tokens.forEach(token => {\n    const contentLines = token.content.split(newlineRe);\n\n    const firstContent = contentLines.shift();\n    if (firstContent !== undefined && firstContent !== \"\") {\n      currentLine.push({ type: token.type, content: firstContent });\n    }\n    contentLines.forEach(content => {\n      currentLine = [];\n      lines.push(currentLine);\n      if (content !== \"\") {\n        currentLine.push({ type: token.type, content });\n      }\n    });\n  });\n  return lines;\n}\n","import { diffLines, applyPatch } from \"diff\";\nimport tokenize from \"./tokenizer\";\nimport { InputStep } from \"code-surfer-types\";\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\nfunction myDiff(oldCode: string, newCode: string) {\n  const changes = diffLines(oldCode || \"\", newCode);\n\n  let oldIndex = -1;\n  return changes.map(({ value, count, removed, added }) => {\n    const lines = value.split(newlineRe);\n    // check if last line is empty, if it is, remove it\n    const lastLine = lines.pop();\n    if (lastLine) {\n      lines.push(lastLine);\n    }\n    const result = {\n      oldIndex,\n      lines,\n      count,\n      removed,\n      added\n    };\n    if (!added) {\n      oldIndex += count || 0;\n    }\n    return result;\n  });\n}\n\nfunction insert<T>(array: T[], index: number, elements: T[]) {\n  return array.splice(index, 0, ...elements);\n}\n\ntype Line = {\n  content: string;\n  slides: number[];\n  tokens: { type: string; content: string }[];\n};\n\nfunction slideDiff(\n  lines: Line[],\n  codes: string[],\n  slideIndex: number,\n  language: string\n) {\n  const prevLines = lines.filter(l => l.slides.includes(slideIndex - 1));\n  const prevCode = codes[slideIndex - 1] || \"\";\n  const currCode = codes[slideIndex];\n\n  const changes = myDiff(prevCode, currCode);\n\n  changes.forEach(change => {\n    if (change.added) {\n      const prevLine = prevLines[change.oldIndex];\n      const addAtIndex = lines.indexOf(prevLine) + 1;\n      const addLines = change.lines.map(content => ({\n        content,\n        slides: [slideIndex],\n        tokens: []\n      }));\n      insert(lines, addAtIndex, addLines);\n    } else if (!change.removed) {\n      for (let j = 1; j <= (change.count || 0); j++) {\n        prevLines[change.oldIndex + j].slides.push(slideIndex);\n      }\n    }\n  });\n\n  const tokenLines = tokenize(currCode, language);\n  const currLines = lines.filter(l => l.slides.includes(slideIndex));\n  currLines.forEach((line, index) => (line.tokens = tokenLines[index]));\n}\n\nexport function parseLines(codes: string[], language: string) {\n  const lines: Line[] = [];\n  for (let slideIndex = 0; slideIndex < codes.length; slideIndex++) {\n    slideDiff(lines, codes, slideIndex, language);\n  }\n  return lines;\n}\n\nexport function getSlides(codes: string[], language: string) {\n  // codes are in reverse cronological order\n  const lines = parseLines(codes, language);\n  // console.log(\"lines\", lines);\n  return codes.map((_, slideIndex) => {\n    return lines\n      .map((line, lineIndex) => ({\n        content: line.content,\n        tokens: line.tokens,\n        isNew: !line.slides.includes(slideIndex + 1),\n        show: line.slides.includes(slideIndex),\n        key: lineIndex\n      }))\n      .filter(line => line.show);\n  });\n}\n\nexport function getCodes(rawSteps: InputStep[]) {\n  const codes: string[] = [];\n\n  rawSteps.forEach((s, i) => {\n    if (s.lang === \"diff\" && i > 0) {\n      codes[i] = applyPatch(codes[i - 1], s.code);\n    } else {\n      codes[i] = s.code;\n    }\n  });\n\n  return codes;\n}\n","import flat from \"array.prototype.flat\";\nimport * as errors from \"./errors\";\n\ntype LineIndex = number;\ntype ColumnIndex = number;\n\nexport function parseFocus(focus: string) {\n  if (!focus) {\n    throw new Error(\"Focus cannot be empty\");\n  }\n\n  try {\n    const parts = focus.split(/,(?![^\\[]*\\])/g).map(parsePart);\n\n    return new Map<LineIndex, boolean | ColumnIndex[]>(flat(parts));\n  } catch (error) {\n    if (error.withFocusString) {\n      throw error.withFocusString(focus);\n    } else {\n      throw error;\n    }\n  }\n}\n\nfunction parsePart(part: string) {\n  // a part could be\n  // - a line number: \"2\"\n  // - a line range: \"5:9\"\n  // - a line number with a column selector: \"2[1,3:5,9]\"\n  const columnsMatch = part.match(/(\\d+)\\[(.+)\\]/);\n  if (columnsMatch) {\n    const [, line, columns] = columnsMatch;\n    const columnsList = columns.split(\",\").map(expandString);\n    const lineIndex = Number(line) - 1;\n    const columnIndexes = flat(columnsList).map(c => c - 1);\n    return [[lineIndex, columnIndexes]];\n  } else {\n    return expandString(part).map(lineNumber => [lineNumber - 1, true]);\n  }\n}\n\nfunction expandString(part: string) {\n  // Transforms something like\n  // - \"1:3\" to [1,2,3]\n  // - \"4\" to [4]\n  const [start, end] = part.split(\":\");\n\n  // todo check if start is 0, line numbers and column numbers start at 1\n\n  if (!isNaturalNumber(start)) {\n    throw errors.invalidFocusNumber(start);\n  }\n\n  const startNumber = Number(start);\n\n  if (startNumber < 1) {\n    throw errors.invalidLineOrColumnNumber();\n  }\n\n  if (!end) {\n    return [startNumber];\n  } else {\n    if (!isNaturalNumber(end)) {\n      throw errors.invalidFocusNumber(end);\n    }\n\n    const list: number[] = [];\n    for (let i = startNumber; i <= +end; i++) {\n      list.push(i);\n    }\n    return list;\n  }\n}\n\nfunction isNaturalNumber(n: any) {\n  n = n.toString(); // force the value in case it is not\n  var n1 = Math.abs(n),\n    n2 = parseInt(n, 10);\n  return !isNaN(n1) && n2 === n1 && n1.toString() === n;\n}\n","import { StyleItem, CodeSurferTheme } from \"code-surfer-types\";\n\ntype PrismTheme = {\n  plain: { color: string; backgroundColor: string };\n  styles: StyleItem[];\n};\n\nexport function makeTheme(\n  prismTheme: PrismTheme,\n  override: Partial<CodeSurferTheme> = {}\n): CodeSurferTheme {\n  return {\n    styles: prismTheme.styles,\n    title: {\n      background: prismTheme.plain.backgroundColor\n    },\n    subtitle: {\n      color: \"#d6deeb\",\n      background: \"rgba(10,10,10,0.9)\"\n    },\n    pre: {\n      color: prismTheme.plain.color,\n      background: prismTheme.plain.backgroundColor\n    },\n    code: {\n      color: prismTheme.plain.color,\n      background: prismTheme.plain.backgroundColor\n    },\n    ...override\n  };\n}\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#393A34\",\n    backgroundColor: \"#f6f8fa\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: \"#999988\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"string\", \"attr-value\"],\n      style: {\n        color: \"#e3116c\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"#393A34\"\n      }\n    },\n    {\n      types: [\n        \"entity\",\n        \"url\",\n        \"symbol\",\n        \"number\",\n        \"boolean\",\n        \"variable\",\n        \"constant\",\n        \"property\",\n        \"regex\",\n        \"inserted\"\n      ],\n      style: {\n        color: \"#36acaa\"\n      }\n    },\n    {\n      types: [\"atrule\", \"keyword\", \"attr-name\", \"selector\"],\n      style: {\n        color: \"#00a4db\"\n      }\n    },\n    {\n      types: [\"function\", \"deleted\", \"tag\"],\n      style: {\n        color: \"#d73a49\"\n      }\n    },\n    {\n      types: [\"function-variable\"],\n      style: {\n        color: \"#6f42c1\"\n      }\n    },\n    {\n      types: [\"tag\", \"selector\"],\n      style: {\n        color: \"#00009f\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#F8F8F2\",\n    backgroundColor: \"#282A36\"\n  },\n  styles: [\n    {\n      types: [\"prolog\", \"constant\", \"builtin\"],\n      style: {\n        color: \"rgb(189, 147, 249)\"\n      }\n    },\n    {\n      types: [\"inserted\", \"function\"],\n      style: {\n        color: \"rgb(80, 250, 123)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgb(255, 85, 85)\"\n      }\n    },\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 184, 108)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"symbol\"],\n      style: {\n        color: \"rgb(248, 248, 242)\"\n      }\n    },\n    {\n      types: [\"string\", \"char\", \"tag\", \"selector\"],\n      style: {\n        color: \"rgb(255, 121, 198)\"\n      }\n    },\n    {\n      types: [\"keyword\", \"variable\"],\n      style: {\n        color: \"rgb(189, 147, 249)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(98, 114, 164)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(241, 250, 140)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#2a2734\",\n    color: \"#9a86fd\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#6c6783\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#e09142\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#9a86fd\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#eeebff\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\",\n        \"placeholder\",\n        \"variable\"\n      ],\n      style: {\n        color: \"#ffcc99\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#faf8f5\",\n    color: \"#728fcb\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#b6ad9a\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#063289\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#b29762\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#2d2006\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#896724\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\"\n      ],\n      style: {\n        color: \"#728fcb\"\n      }\n    },\n    {\n      types: [\"placeholder\", \"variable\"],\n      style: {\n        color: \"#93abdc\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#896724\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#d6deeb\",\n    backgroundColor: \"#011627\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(162, 191, 252)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"inserted\", \"attr-name\"],\n      style: {\n        color: \"rgb(173, 219, 103)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(99, 119, 119)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(214, 222, 235)\"\n      }\n    },\n    {\n      types: [\"number\"],\n      style: {\n        color: \"rgb(247, 140, 108)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\"],\n      style: {\n        color: \"rgb(130, 170, 255)\"\n      }\n    },\n    {\n      // This was manually added after the auto-generation\n      // so that punctuations are not italicised\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(199, 146, 234)\"\n      }\n    },\n    {\n      types: [\"selector\", \"doctype\"],\n      style: {\n        color: \"rgb(199, 146, 234)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(255, 203, 139)\"\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"keyword\"],\n      style: {\n        color: \"rgb(127, 219, 202)\"\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: \"rgb(255, 88, 116)\"\n      }\n    },\n    {\n      types: [\"property\"],\n      style: {\n        color: \"rgb(128, 203, 196)\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        color: \"rgb(178, 204, 214)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme, {\n  title: { background: \"rgba(1, 22, 39, 0.8)\" }\n});\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst colors = {\n  char: \"#D8DEE9\",\n  comment: \"#999999\",\n  keyword: \"#c5a5c5\",\n  primitive: \"#5a9bcf\",\n  string: \"#8dc891\",\n  variable: \"#d7deea\",\n  boolean: \"#ff8b50\",\n  punctuation: \"#5FB3B3\",\n  tag: \"#fc929e\",\n  function: \"#79b6f2\",\n  className: \"#FAC863\",\n  method: \"#6699CC\",\n  operator: \"#fc929e\"\n};\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#282c34\",\n    color: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"attr-value\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"comment\", \"block-comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: colors.comment\n      }\n    },\n    {\n      types: [\n        \"property\",\n        \"number\",\n        \"function-name\",\n        \"constant\",\n        \"symbol\",\n        \"deleted\"\n      ],\n      style: {\n        color: colors.primitive\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: colors.boolean\n      }\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: colors.tag\n      }\n    },\n    {\n      types: [\"string\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"selector\", \"char\", \"builtin\", \"inserted\"],\n      style: {\n        color: colors.char\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: colors.function\n      }\n    },\n    {\n      types: [\"operator\", \"entity\", \"url\", \"variable\"],\n      style: {\n        color: colors.variable\n      }\n    },\n    {\n      types: [\"keyword\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"at-rule\", \"class-name\"],\n      style: {\n        color: colors.className\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        fontWeight: 400\n      }\n    },\n    {\n      types: [\"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\" as \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9EFEFF\",\n    backgroundColor: \"#2D2A55\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(179, 98, 255)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(255, 255, 255)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(165, 255, 144)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"number\", \"boolean\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(255, 180, 84)\"\n      }\n    },\n    {\n      types: [\n        \"keyword\",\n        \"operator\",\n        \"property\",\n        \"namespace\",\n        \"tag\",\n        \"selector\",\n        \"doctype\"\n      ],\n      style: {\n        color: \"rgb(255, 157, 0)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\", \"class-name\"],\n      style: {\n        color: \"rgb(250, 208, 0)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#282a2e\",\n    backgroundColor: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(197, 200, 198)\"\n      }\n    },\n    {\n      types: [\"string\", \"number\", \"builtin\", \"variable\"],\n      style: {\n        color: \"rgb(150, 152, 150)\"\n      }\n    },\n    {\n      types: [\"class-name\", \"function\", \"tag\", \"attr-name\"],\n      style: {\n        color: \"rgb(40, 42, 46)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9CDCFE\",\n    backgroundColor: \"#1E1E1E\"\n  },\n  styles: [\n    {\n      types: [\"prolog\"],\n      style: {\n        color: \"rgb(0, 0, 128)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(106, 153, 85)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"changed\", \"keyword\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"number\", \"inserted\"],\n      style: {\n        color: \"rgb(181, 206, 168)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(100, 102, 149)\"\n      }\n    },\n    {\n      types: [\"attr-name\", \"variable\"],\n      style: {\n        color: \"rgb(156, 220, 254)\"\n      }\n    },\n    {\n      types: [\"deleted\", \"string\", \"attr-value\"],\n      style: {\n        color: \"rgb(206, 145, 120)\"\n      }\n    },\n    {\n      types: [\"selector\"],\n      style: {\n        color: \"rgb(215, 186, 125)\"\n      }\n    },\n    {\n      // Fix tag color\n      types: [\"tag\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      // Fix tag color for HTML\n      types: [\"tag\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"rgb(212, 212, 212)\"\n      }\n    },\n    {\n      // Fix punctuation color for HTML\n      types: [\"punctuation\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"#808080\"\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: \"rgb(220, 220, 170)\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      types: [\"char\"],\n      style: {\n        color: \"rgb(209, 105, 105)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import React from \"react\";\n\nimport { default as base } from \"./themes\";\nimport { CodeSurferTheme, Token } from \"code-surfer-types\";\n\nexport const ThemeContext = React.createContext<CodeSurferTheme | null>(null);\n\nfunction useSafeTheme() {\n  const contextTheme = React.useContext(ThemeContext);\n\n  const theme = contextTheme || base;\n\n  return theme;\n}\n\nfunction useTokenStyles() {\n  const theme = useSafeTheme();\n\n  const themeStylesByType = React.useMemo(() => {\n    const themeStylesByType: {\n      [type: string]: React.CSSProperties;\n    } = Object.create(null);\n\n    const styles = theme.styles;\n    styles.forEach(({ types, style }) => {\n      types.forEach(type => {\n        themeStylesByType[type] = Object.assign(\n          themeStylesByType[type] || {},\n          style\n        );\n      });\n    });\n    return themeStylesByType;\n  }, [theme]);\n\n  const getStyleForToken = React.useMemo(\n    () => (token: Token) => {\n      return themeStylesByType[token.type] || {};\n    },\n    [themeStylesByType]\n  );\n\n  return getStyleForToken;\n}\n\nfunction usePreStyle() {\n  const theme = useSafeTheme();\n  return theme.pre || {};\n}\nfunction useCodeStyle() {\n  const theme = useSafeTheme();\n  return theme.code || {};\n}\n\nfunction useContainerStyle() {\n  const theme = useSafeTheme();\n  return theme.container || {};\n}\n\nfunction useTitleStyle() {\n  const theme = useSafeTheme();\n  const base = {\n    position: \"absolute\" as \"absolute\",\n    top: 0,\n    width: \"100%\",\n    margin: 0,\n    padding: \"1em 0\"\n  };\n  const style = theme.title || {};\n  return { ...base, ...style };\n}\n\nfunction useSubtitleStyle() {\n  const theme = useSafeTheme();\n  const base = {\n    position: \"absolute\" as \"absolute\",\n    bottom: 0,\n    width: \"calc(100% - 2em)\",\n    boxSizing: \"border-box\" as \"border-box\",\n    margin: \"0.3em 1em\",\n    padding: \"0.5em\",\n    background: \"rgba(2,2,2,0.9)\"\n  };\n  const style = theme.subtitle || {};\n  return { ...base, ...style };\n}\n\nexport {\n  useTokenStyles,\n  usePreStyle,\n  useCodeStyle,\n  useContainerStyle,\n  useSubtitleStyle,\n  useTitleStyle\n};\n","export class Tuple<T> {\n  prev: Maybe<T>;\n  next: Maybe<T>;\n\n  constructor(prev: Maybe<T>, next: Maybe<T>) {\n    this.prev = prev;\n    this.next = next;\n  }\n\n  spread(): [Maybe<T>, Maybe<T>] {\n    const prev = this.prev;\n    const next = this.next;\n    return [prev, next];\n  }\n\n  select<S>(selector: (x: T) => S) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new Tuple(newPrev, newNext);\n  }\n\n  selectMany<S extends { key?: any }>(selector: (x: T) => S[]) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new ArrayTuple(newPrev, newNext);\n  }\n\n  get(_key: any) {\n    throw Error(\"Get only supported in ArrayTuple\");\n  }\n\n  map(_mapper: any) {\n    throw Error(\"Map only supported in ArrayTuple\");\n  }\n}\n\nexport class ArrayTuple<T extends { key?: any }> extends Tuple<T[]> {\n  _dict?: Map<any, Tuple<T>>;\n\n  _getChildrenMap() {\n    if (!this._dict) {\n      const [maybePrevs, maybeNexts] = this.spread();\n      const prevs: T[] = maybePrevs || [];\n      const nexts: T[] = maybeNexts || [];\n\n      const unsortedMap = new Map<any, { prev: Maybe<T>; next?: Maybe<T> }>(\n        prevs.map(prev => [prev.key, { prev }])\n      );\n      nexts.forEach(next => {\n        const { prev } = unsortedMap.get(next.key) || { prev: undefined };\n        unsortedMap.set(next.key, { prev, next });\n      });\n\n      const sortedKeys = Array.from(unsortedMap.keys());\n      sortedKeys.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0));\n      this._dict = new Map<any, Tuple<T>>(\n        sortedKeys.map(key => {\n          const { prev = undefined, next = undefined } =\n            unsortedMap.get(key) || {};\n          return [key, new Tuple(prev, next)];\n        })\n      );\n    }\n    return this._dict;\n  }\n\n  get(key: any) {\n    const childrenMap = this._getChildrenMap();\n    return childrenMap.get(key);\n  }\n\n  map<M>(mapper: (t: Tuple<T>, key?: any, self?: ArrayTuple<T>) => M) {\n    const childrenMap = this._getChildrenMap();\n    const result: M[] = [];\n    childrenMap.forEach((tuple, key) => result.push(mapper(tuple, key, this)));\n    return result;\n  }\n}\n","import React from \"react\";\nimport { Tuple, ArrayTuple } from \"./tuple\";\nimport { AnimationAndConfig, AnimationConfig, Animation } from \"playhead-types\";\n\nexport class Context<T> {\n  tuple: Tuple<T>;\n  t: number;\n  parent: ListContext<T> | undefined;\n\n  constructor(tuple: Tuple<T>, t: number, parent?: ListContext<T>) {\n    this.tuple = tuple;\n    this.t = t;\n    this.parent = parent;\n  }\n\n  useSelect<S>(selector: (x: T) => S) {\n    const newTuple = React.useMemo(() => this.tuple.select(selector), [\n      this.tuple\n    ]);\n    return new Context(newTuple, this.t);\n  }\n\n  useSelectMany<S extends { key?: any }>(\n    selector: (x: T) => S[]\n  ): ListContext<S> {\n    const newTuple = React.useMemo(() => this.tuple.selectMany(selector), [\n      this.tuple\n    ]);\n\n    return new ListContext(newTuple, this.t);\n  }\n\n  spread() {\n    return this.tuple.spread();\n  }\n\n  animate<R>(animation: Animation<T, R>, config = {} as AnimationConfig<T>): R {\n    const [prev, next] = this.tuple.spread();\n\n    if (config.when && !config.when(prev, next)) {\n      return {} as R;\n    }\n\n    let staggeredT = this.t;\n\n    if (config.stagger) {\n      if (!this.parent) {\n        throw Error(\"Can't use stagger without a parent context\");\n      }\n\n      const items = this.parent\n        .map(childCtx => {\n          const [prevChild, nextChild] = childCtx.spread();\n          return {\n            isSelected: !config.when || config.when(prevChild, nextChild),\n            isThisChild: prevChild === prev && nextChild === next\n          };\n        })\n        .filter(x => x.isSelected);\n\n      const N = items.length;\n      if (N > 1) {\n        const currentIndex = items.findIndex(x => x.isThisChild);\n        const duration = 1 - config.stagger;\n        const tick = config.stagger / (N - 1);\n        staggeredT = Math.min(\n          1,\n          Math.max(0, (this.t - currentIndex * tick) / duration)\n        );\n      }\n    }\n\n    return animation(prev, next, staggeredT);\n  }\n\n  animations<R>(animations: AnimationAndConfig<T, R>[]) {\n    const results = animations.map(({ animation, ...config }) =>\n      this.animate(animation, config)\n    );\n    return merge(results);\n  }\n}\n\nexport class ListContext<T extends { key?: any }> extends Context<T[]> {\n  tuple: ArrayTuple<T>;\n\n  constructor(tuple: ArrayTuple<T>, t: number) {\n    super(tuple, t);\n    this.tuple = tuple;\n  }\n\n  map<M>(mapper: (childCtx: Context<T>, key: any) => M): M[] {\n    return this.tuple.map((childTuple: Tuple<T>, key: any) =>\n      mapper(new Context(childTuple, this.t, this), key)\n    );\n  }\n}\n\nexport function useAnimationContext<T>(items: T[], playhead: number) {\n  const prev = items[Math.floor(playhead)];\n  const next = items[Math.floor(playhead) + 1];\n  const tuple = React.useMemo(() => new Tuple(prev, next), [prev, next]);\n  return new Context(tuple, playhead % 1);\n}\n\nconst MULTIPLY = \"multiply\";\n\ntype MergeableObjects<T> = T[];\ntype MergeableArrays<T> = MergeableObjects<T>[];\ntype Mergeable<T> = MergeableObjects<T> | MergeableArrays<T>;\n\nfunction merge<T>(results: Mergeable<T>, composite = MULTIPLY) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return mergeArrays(results as MergeableArrays<T>, composite);\n  } else {\n    return mergeObjects(results as MergeableObjects<T>, composite);\n  }\n}\n\nfunction mergeObjects<T extends { opacity?: number }>(\n  results: MergeableObjects<T>,\n  composite: string\n) {\n  const merged = Object.assign({}, ...results) as T;\n\n  if (composite === MULTIPLY) {\n    const opacities = results\n      .map(x => x.opacity)\n      .filter(x => x != null) as number[];\n    if (opacities.length !== 0) {\n      merged.opacity = opacities.reduce((a, b) => a * b);\n    }\n  }\n  return merged;\n}\n\nfunction mergeArrays<T>(results: MergeableArrays<T>, composite: string): T[] {\n  const firstResult = results[0];\n  return firstResult.map((_, i) => {\n    return merge(results.map(result => result[i]), composite) as T;\n  });\n}\n","export default {\n  // no easing, no acceleration\n  linear: function(t: number) {\n    return t;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function(t: number) {\n    return t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function(t: number) {\n    return t * (2 - t);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function(t: number) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  // accelerating from zero velocity\n  easeInCubic: function(t: number) {\n    return t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutCubic: function(t: number) {\n    return --t * t * t + 1;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function(t: number) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  // accelerating from zero velocity\n  easeInQuart: function(t: number) {\n    return t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuart: function(t: number) {\n    return 1 - --t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function(t: number) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function(t: number) {\n    return t * t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function(t: number) {\n    return 1 + --t * t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function(t: number) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  }\n};\n","/* @jsx createAnimation */\nimport easing from \"./easing\";\nconst MULTIPLY = \"multiply\";\n\ndeclare global {\n  namespace createAnimation.JSX {\n    interface IntrinsicElements {\n      tween;\n      chain;\n      step;\n      delay;\n      parallel;\n    }\n  }\n}\n\n/* eslint-disable */\nfunction mergeResults(results, composite = null) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return firstResult.map((_, i) => {\n      return mergeResults(results.map(result => result[i]), composite);\n    });\n  } else {\n    const merged = Object.assign({}, ...results);\n\n    if (composite === MULTIPLY) {\n      const opacities = results.map(x => x.opacity).filter(x => x != null);\n      if (opacities.length !== 0) {\n        merged.opacity = opacities.reduce((a, b) => a * b);\n      }\n    }\n    return merged;\n  }\n}\n\nconst playhead = {\n  always: (props, context) => t => {\n    return props.value;\n  },\n  step: (props, context) => t => {\n    const { from, to } = props;\n    return t < 0.5 ? from : to;\n  },\n  tween: (props, context) => t => {\n    const { from, to, ease = easing.linear } = props;\n\n    const style = {};\n    Object.keys(from).forEach(key => {\n      const value = from[key] + (to[key] - from[key]) * ease(t);\n      if (key === \"x\") {\n        style[\"transform\"] = `translateX(${value}px)`;\n      } else {\n        style[key] = value;\n      }\n    });\n\n    return style;\n  },\n  chain: ({ children: fns, durations }, ctx) => {\n    return (t, ...args) => {\n      let style = run(fns[0], 0, ctx);\n      let lowerDuration = 0;\n      for (let i = 0; i < fns.length; i++) {\n        const fn = fns[i];\n        const thisDuration = durations[i];\n        const upperDuration = lowerDuration + thisDuration;\n        if (lowerDuration <= t && t <= upperDuration) {\n          const innerT = (t - lowerDuration) / thisDuration;\n          style = mergeResults([style, run(fn, innerT, ctx)]);\n        } else if (upperDuration < t) {\n          // merge the end of previous animation\n          style = mergeResults([style, run(fn, 1, ctx)]);\n        } else if (t < lowerDuration) {\n          // merge the start of future animation\n          style = mergeResults([run(fn, 0, ctx), style]);\n        }\n        lowerDuration = upperDuration;\n      }\n      return style;\n    };\n  },\n  delay: () => () => ({}),\n  parallel: ({ children: fns }, ctx) => {\n    return t => {\n      const styles = fns.map(fn => run(fn, t, ctx));\n      const result = mergeResults(styles, MULTIPLY);\n      return result;\n    };\n  },\n  list: ({ forEach: items, children }, ctx) => t => {\n    const mapper = children[0];\n    const results = items.map(mapper);\n    return results.map(element => run(element, t, ctx));\n  }\n};\n\nexport function createAnimation(type, config, ...children) {\n  const props = { ...config, children };\n  return {\n    type: typeof type === \"string\" ? playhead[type] : type,\n    props\n  };\n}\n\nexport const Stagger = (props, ctx) => t => {\n  const targets = props.targets;\n  const filter = target => !props.filter || props.filter(target);\n  const interval =\n    targets.filter(filter).length < 2\n      ? 0\n      : props.interval / (targets.filter(filter).length - 1);\n  let i = 0;\n  return targets.map(target => {\n    // console.log(target, props.filter(target));\n    if (!filter(target)) {\n      return {};\n    }\n    const animation = (\n      <parallel>\n        <chain durations={[i * interval, 1 - props.interval]}>\n          <delay />\n          {props.children[0]}\n        </chain>\n      </parallel>\n    );\n    i++;\n    const result = run(animation, t, ctx);\n    // console.log(\"Stagger Result\", t, result);\n    return result;\n  });\n};\n\nexport function Context() {\n  throw Error(\"shouldnt run Context\");\n}\n\nexport function run(node: any, t: number, context = {}) {\n  if (node.type === Context) {\n    const { children, ...patch } = node.props;\n    const newContext = { ...context, ...patch };\n    return run(children[0], t, newContext);\n  }\n\n  const result = node.type(node.props, context);\n  if (result.type) {\n    return run(result, t, context);\n  } else {\n    return result(t);\n  }\n}\n","/* @jsx createAnimation */\nimport { createAnimation, run } from \"./playhead/playhead\";\nimport easing from \"./playhead/easing\";\n\nfunction FadeIn() {\n  return <tween from={{ opacity: 0 }} to={{ opacity: 1 }} />;\n}\nfunction FadeOut() {\n  return <tween from={{ opacity: 1 }} to={{ opacity: 0 }} />;\n}\n\nfunction FadeOutIn() {\n  return (\n    <chain durations={[0.5, 0.5]}>\n      <FadeOut />\n      <FadeIn />\n    </chain>\n  );\n}\n\nconst dx = 250;\nconst offOpacity = 0.3;\nconst outOpacity = 0;\nconst outHieght = 0;\n\nconst SlideToLeft = () => (\n  <tween\n    from={{ x: 0, opacity: 1 }}\n    to={{ x: -dx, opacity: outOpacity }}\n    ease={easing.easeInQuad}\n  />\n);\n\nfunction ShrinkHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: null }} to={{ height: 0 }} />;\n  }\n  return (\n    <tween\n      from={{ height: lineHeight }}\n      to={{ height: outHieght }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction ExitLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={[0.35, 0.3, 0.35]}>\n      <SlideToLeft />\n      <ShrinkHeight lineHeight={lineHeight} />\n    </chain>\n  );\n}\n\nconst SlideFromRight = () => (\n  <tween\n    from={{ x: dx, opacity: outOpacity }}\n    to={{ x: 0, opacity: 1 }}\n    ease={easing.easeOutQuad}\n  />\n);\n\nfunction GrowHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: 0 }} to={{ height: null }} />;\n  }\n  return (\n    <tween\n      from={{ height: outHieght }}\n      to={{ height: lineHeight }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction EnterLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={[0.35, 0.3, 0.35]}>\n      <delay />\n      <GrowHeight lineHeight={lineHeight} />\n      <SlideFromRight />\n    </chain>\n  );\n}\n\nexport const fadeIn = (t: number) => run(<FadeIn />, t);\nexport const fadeOut = (t: number) => run(<FadeOut />, t);\nexport const fadeOutIn = (t: number) => run(<FadeOutIn />, t);\n\nexport function switchText<T>(\n  prev: Maybe<{ value: T }>,\n  next: Maybe<{ value: T }>,\n  t: number\n) {\n  // TODO merge with fadeBackground and fadeText\n  if (t < 0.5) {\n    return prev && prev.value;\n  } else {\n    return next && next.value;\n  }\n}\n\nfunction any<T>(prev: Maybe<T>, next: Maybe<T>): T {\n  return (prev || next) as T;\n}\n\nexport const exitLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<ExitLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const enterLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<EnterLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const focusLine = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  return run(\n    <tween\n      from={{ opacity: prev && prev.focus ? 1 : offOpacity }}\n      to={{ opacity: next && next.focus ? 1 : offOpacity }}\n    />,\n    t\n  );\n};\nexport const focusToken = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  const from = prev && prev.focus === false ? offOpacity : 1;\n  const to = next && next.focus === false ? offOpacity : 1;\n  return run(<tween from={{ opacity: from }} to={{ opacity: to }} />, t);\n};\n\nexport const tween = (from?: number, to?: number) => (\n  _prev: any,\n  _next: any,\n  t: number\n) => {\n  const result = run(\n    <tween\n      from={{ value: from || 0 }}\n      to={{ value: to || 0 }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n\n  return result.value;\n};\n\nexport const scaleToFocus = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n\n  if (!dimensions) {\n    return (_: number) => ({\n      scale: 1\n    });\n  }\n\n  const prevZoom = getZoom(prev);\n  const nextZoom = getZoom(next);\n\n  return run(\n    <tween\n      from={{\n        scale: prevZoom || nextZoom\n      }}\n      to={{\n        scale: nextZoom || prevZoom\n      }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n};\n\nfunction getZoom(step: any): number | null {\n  if (!step) return null;\n\n  const {\n    paddingBottom,\n    paddingTop,\n    containerHeight,\n    containerWidth,\n    contentWidth,\n    lineHeight\n  } = step.dimensions;\n\n  const contentHeight = step.focusCount * lineHeight;\n  const availableHeight =\n    containerHeight - Math.max(paddingBottom, paddingTop) * 2;\n  const yZoom = availableHeight / contentHeight;\n\n  // if there are lines that are too long for the container\n  const xZoom = (0.9 * containerWidth) / contentWidth;\n\n  return Math.min(yZoom, 1, xZoom);\n  // return 1;\n}\n","import React from \"react\";\nimport {\n  useContainerStyle,\n  usePreStyle,\n  useTokenStyles,\n  useSubtitleStyle,\n  useTitleStyle\n} from \"./theming\";\nimport { useAnimationContext, Context } from \"./animation-context\";\nimport {\n  fadeIn,\n  fadeOutIn,\n  fadeOut,\n  exitLine,\n  enterLine,\n  scaleToFocus,\n  switchText,\n  focusLine,\n  tween,\n  focusToken\n} from \"./animations\";\nimport { Step, Line as LineType, Token } from \"code-surfer-types\";\nimport { Animation, AnimationAndConfig } from \"playhead-types\";\n\ntype ContainerProps = {\n  stepPlayhead: number;\n  dimensions?: any;\n  steps: Step[];\n};\n\nfunction CodeSurferContainer({\n  stepPlayhead,\n  dimensions,\n  steps\n}: ContainerProps) {\n  const ctx = useAnimationContext(steps, stepPlayhead);\n\n  return (\n    <div\n      className=\"cs-container\"\n      style={{\n        ...useContainerStyle(),\n        width: \"100%\",\n        height: dimensions ? dimensions.containerHeight : \"100%\",\n        maxHeight: \"100%\",\n        position: \"relative\"\n      }}\n    >\n      <CodeSurferContent dimensions={dimensions} ctx={ctx} />\n      <Title ctx={ctx.useSelect(step => step.title)} />\n      <Subtitle ctx={ctx.useSelect(step => step.subtitle)} />\n    </div>\n  );\n}\n\nconst heightChangingAnimations: AnimationAndConfig<any, any>[] = [\n  {\n    animation: exitLine,\n    when: (prev, next) => prev && !next,\n    stagger: 0.2\n  },\n  {\n    animation: enterLine,\n    when: (prev, next) => next && !prev,\n    stagger: 0.2\n  }\n];\n\n/**\n * This part wasn't easy...\n * We need to adjust the scroll as the lines keep changing height\n * So we animate between the prev focus center and the next focus center\n * but taking into acount the height of the lines that are on top of the center\n * for each frame\n */\nfunction useScrollTop(dimensions: any, stepCtx: Context<Step>) {\n  if (!dimensions) return 0;\n\n  const linesCtx = stepCtx.useSelectMany(step => step.lines);\n  const [prevStep, nextStep] = stepCtx.spread();\n\n  const [realPrevCenter, realNextCenter] = React.useMemo(() => {\n    const allPrevLines = linesCtx.map(ctx =>\n      ctx.animate((prev, _next) => prev)\n    );\n    const allNextLines = linesCtx.map(ctx =>\n      ctx.animate((_prev, next) => next)\n    );\n\n    const prevCenter = prevStep ? prevStep.focusCenter : 0;\n    const nextCenter = nextStep ? nextStep.focusCenter : 0;\n\n    const prevCenterLine = prevStep && prevStep.lines[Math.floor(prevCenter)];\n    const nextCenterLine = nextStep && nextStep.lines[Math.floor(nextCenter)];\n\n    const realPrevCenter = prevStep\n      ? allPrevLines.indexOf(prevCenterLine) + (prevCenter % 1)\n      : 0;\n    const realNextCenter = nextStep\n      ? allNextLines.indexOf(nextCenterLine) + (nextCenter % 1)\n      : 0;\n\n    return [realPrevCenter, realNextCenter];\n  }, [prevStep, nextStep]);\n\n  const currentCenter = stepCtx.animate(tween(realPrevCenter, realNextCenter));\n\n  let scrollTop = 0;\n\n  const lineStyles = linesCtx.map(ctx =>\n    ctx.animations(heightChangingAnimations)\n  );\n\n  let i = 0;\n  while (i <= currentCenter - 1) {\n    const h = lineStyles[i].height;\n    scrollTop += h == null ? dimensions.lineHeight : h;\n    i += 1;\n  }\n  if (i != currentCenter) {\n    const h = lineStyles[i].height;\n    const height = h == null ? dimensions.lineHeight : h;\n    scrollTop += height * (currentCenter - i);\n  }\n\n  return scrollTop;\n}\n\nfunction CodeSurferContent({\n  dimensions,\n  ctx\n}: {\n  dimensions: any;\n  ctx: Context<Step>;\n}) {\n  const ref = React.useRef<HTMLPreElement | null>(null);\n\n  const scrollTop = useScrollTop(dimensions, ctx);\n  React.useLayoutEffect(() => {\n    if (ref.current == null) return;\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  const { scale } = ctx.animate(scaleToFocus);\n  const verticalOrigin = dimensions\n    ? dimensions.containerHeight / 2 + scrollTop\n    : 0;\n\n  const linesCtx = ctx.useSelectMany(step => step.lines);\n\n  return (\n    <pre\n      className=\"cs-content\"\n      ref={ref}\n      style={{\n        ...usePreStyle(),\n        margin: 0,\n        height: \"100%\",\n        overflow: \"hidden\"\n      }}\n    >\n      <code\n        className=\"cs-scaled-content\"\n        style={{\n          ...usePreStyle(),\n          display: \"block\",\n          height: dimensions ? dimensions.contentHeight : \"100%\",\n          width: dimensions && dimensions.contentWidth,\n          margin:\n            dimensions &&\n            `0 ${(dimensions.containerWidth - dimensions.contentWidth) / 2}px`,\n          transform: `scale(${scale})`,\n          transformOrigin: `center ${verticalOrigin}px`\n        }}\n      >\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n        {linesCtx.map((ctx, key) => (\n          <Line ctx={ctx} key={key} />\n        ))}\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n      </code>\n    </pre>\n  );\n}\n\nfunction Line({ ctx }: { ctx: Context<LineType> }) {\n  const lineStyle = ctx.animations([\n    ...heightChangingAnimations,\n    {\n      animation: focusLine\n    }\n  ]);\n\n  const { lineTokens, key, focusPerToken } = ctx.animate((prev, next) => {\n    const line = (prev || next) as LineType;\n    return {\n      lineTokens: line.tokens,\n      key: line.key,\n      focusPerToken:\n        (prev && prev.focusPerToken) || (next && next.focusPerToken)\n    };\n  });\n\n  const getStyleForToken = useTokenStyles();\n\n  let tokens: (Token & { animatedStyle: React.CSSProperties })[] = [];\n\n  let tokensCtx = ctx.useSelectMany(line => line.tokens);\n\n  if (focusPerToken) {\n    tokens = tokensCtx.map(tokenCtx => ({\n      ...tokenCtx.animate((prev, next) => (prev || next) as Token),\n      animatedStyle: tokenCtx.animate(focusToken)\n    }));\n  } else {\n    tokens = lineTokens.map(token => ({ ...token, animatedStyle: {} }));\n  }\n\n  return (\n    <div\n      style={{\n        overflow: \"hidden\",\n        ...lineStyle\n        // background: \"green\"\n      }}\n    >\n      <div\n        style={{ display: \"inline-block\" }}\n        className={`cs-line cs-line-${key}`}\n      >\n        {tokens.map((token, i) => (\n          <span\n            key={i}\n            style={{ ...getStyleForToken(token), ...token.animatedStyle }}\n          >\n            {token.content}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction Title({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <h4\n      className=\"cs-title\"\n      style={{\n        ...useTitleStyle(),\n        ...bgStyle\n      }}\n    >\n      <span style={textStyle}>{text}</span>\n    </h4>\n  );\n}\nfunction Subtitle({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <p\n      className=\"cs-subtitle\"\n      style={{\n        ...useSubtitleStyle(),\n        ...bgStyle\n      }}\n    >\n      <span style={textStyle}>{text}</span>\n    </p>\n  );\n}\n\nconst fadeBackground: Animation<any, { opacity: number }> = (prev, next, t) => {\n  let opacity = 1;\n  if (!prev) {\n    opacity = t;\n  }\n  if (!next) {\n    opacity = 1 - t;\n  }\n  return { opacity };\n};\n\nconst fadeText: Animation<{ value: any } | undefined, { opacity: number }> = (\n  prev,\n  next,\n  t\n) => {\n  if (prev && next && prev.value !== next.value) {\n    return fadeOutIn(t);\n  }\n  if (!prev) {\n    return fadeIn(t);\n  }\n  if (!next) {\n    return fadeOut(t);\n  }\n  return { opacity: 1 };\n};\n\nexport default CodeSurferContainer;\n","import React from \"react\";\nimport { Step } from \"code-surfer-types\";\nimport useWindowResize from \"./use-window-resize\";\n\nfunction useDimensions<T extends HTMLElement | null>(\n  ref: React.MutableRefObject<T>,\n  steps: Step[]\n) {\n  const [result, setResult] = React.useState<any | null>(null);\n\n  useWindowResize(() => setResult(null), [setResult]);\n\n  React.useLayoutEffect(() => {\n    if (!ref.current) return;\n    if (result) return;\n\n    const containers = ref.current.querySelectorAll(\n      \".cs-container\"\n    ) as NodeListOf<HTMLElement>;\n\n    const stepsDimensions = Array.from(containers).map((container, i) =>\n      getStepDimensions(container, steps[i])\n    );\n\n    const containerHeight = Math.max(\n      ...stepsDimensions.map(d => d.containerHeight)\n    );\n\n    const containerWidth = Math.max(\n      ...stepsDimensions.map(d => d.containerWidth)\n    );\n\n    const contentWidth = Math.max(...stepsDimensions.map(d => d.contentWidth));\n\n    const lineHeight = Math.max(...stepsDimensions.map(d => d.lineHeight));\n\n    setResult({\n      dimensions: {\n        lineHeight,\n        contentWidth,\n        containerHeight,\n        containerWidth\n      },\n      steps: steps.map((step, i) => ({\n        ...step,\n        lines: step.lines.map(l => ({\n          ...l,\n          dimensions: { lineHeight: stepsDimensions[i].lineHeight }\n        })),\n        dimensions: {\n          paddingTop: stepsDimensions[i].paddingTop,\n          paddingBottom: stepsDimensions[i].paddingBottom,\n          lineHeight: stepsDimensions[i].lineHeight,\n          contentWidth,\n          containerHeight,\n          containerWidth\n        }\n      }))\n    });\n  }, [result]);\n\n  return result || {};\n}\n\nfunction getStepDimensions(container: HTMLElement, step: Step) {\n  const longestLine = getLongestLine(step);\n  const longestLineKey = longestLine && longestLine.key;\n  const longestLineSpan = container.querySelector(`.cs-line-${longestLineKey}`);\n  const containerParent = container.parentElement as HTMLElement;\n  const title = container.querySelector(\".cs-title\") as HTMLElement;\n  const subtitle = container.querySelector(\".cs-subtitle\") as HTMLElement;\n\n  const lineCount = step.lines.length;\n  const heightOverflow =\n    containerParent.scrollHeight - containerParent.clientHeight;\n  const avaliableHeight = container.scrollHeight - heightOverflow;\n\n  const lineHeight = longestLineSpan ? longestLineSpan.clientHeight : 0;\n  const paddingTop = title ? outerHeight(title) : lineHeight;\n  const paddingBottom = subtitle ? outerHeight(subtitle) : lineHeight;\n\n  const codeHeight = lineCount * lineHeight * 2;\n  // const maxContentHeight = codeHeight + paddingTop + paddingBottom;\n  // const containerHeight = Math.min(maxContentHeight, avaliableHeight);\n  const containerHeight = avaliableHeight;\n  const containerWidth = container.clientWidth;\n  const contentHeight = codeHeight + containerHeight;\n\n  const contentWidth = longestLineSpan ? longestLineSpan.clientWidth : 0;\n\n  return {\n    lineHeight,\n    contentHeight,\n    contentWidth,\n    paddingTop,\n    paddingBottom,\n    containerHeight,\n    containerWidth\n  };\n}\n\nfunction outerHeight(element: HTMLElement) {\n  var styles = window.getComputedStyle(element);\n  var margin =\n    parseFloat(styles[\"marginTop\"] || \"0\") +\n    parseFloat(styles[\"marginBottom\"] || \"0\");\n  return element.offsetHeight + margin;\n}\n\nfunction getLongestLine(step: Step) {\n  if (!step || step.lines.length === 0) {\n    return null;\n  }\n  return step.lines.reduce((a, b) =>\n    a.content.length > b.content.length ? a : b\n  );\n}\n\nexport default useDimensions;\n","import React from \"react\";\nimport { InputStep, CodeSurferTheme } from \"code-surfer-types\";\nimport { parseSteps } from \"./parse-steps\";\nimport Frame from \"./frame\";\nimport useDimensions from \"./dimensions\";\nimport { ThemeContext } from \"./theming\";\n\nimport \"./default-syntaxes\";\n\ntype CodeSurferProps = {\n  steps: InputStep[];\n  progress: number; // float between [0, steps.lenght - 1]\n  theme?: CodeSurferTheme;\n};\n\nfunction CodeSurfer({ progress, steps: inputSteps, theme }: CodeSurferProps) {\n  const steps = parseSteps(inputSteps, inputSteps[0].lang || \"javascript\");\n  // const stepIndex = Math.round(progress);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { dimensions, steps: stepsWithDimensions } = useDimensions(ref, steps);\n  if (!dimensions) {\n    return (\n      <ThemeContext.Provider value={theme}>\n        <div\n          ref={ref}\n          style={{ overflow: \"auto\", height: \"100%\", width: \"100%\" }}\n        >\n          {steps.map((_step, i) => (\n            <div\n              key={i}\n              style={{\n                overflow: \"auto\",\n                height: \"100%\",\n                width: \"100%\"\n              }}\n            >\n              <Frame steps={steps} stepPlayhead={i} />\n            </div>\n          ))}\n        </div>\n      </ThemeContext.Provider>\n    );\n  } else {\n    return (\n      <ThemeContext.Provider value={theme}>\n        <div\n          style={{ height: \"100%\", width: \"100%\", overflow: \"auto\" }}\n          ref={ref}\n        >\n          <Frame\n            steps={stepsWithDimensions}\n            stepPlayhead={progress}\n            dimensions={dimensions}\n          />\n        </div>\n      </ThemeContext.Provider>\n    );\n  }\n}\n\nexport default CodeSurfer;\nexport * from \"./themes\";\n","import { getSlides, getCodes } from \"./differ\";\nimport { parseFocus } from \"./focus-parser\";\nimport { InputStep, Step } from \"code-surfer-types\";\n\ntype Token = { type: string; content: string; key?: number; focus?: boolean };\n\ntype Line = {\n  content: string;\n  tokens: Token[];\n  isNew: boolean;\n  show: boolean;\n  key: number;\n  focus?: boolean;\n  focusPerToken?: boolean;\n};\n\nexport function parseSteps(rawSteps: InputStep[], lang: string): Step[] {\n  const codes = getCodes(rawSteps);\n\n  const stepsLines = getSlides(codes.reverse(), lang).reverse();\n  const steps = rawSteps.map((step, i) => {\n    const lines = stepsLines[i];\n    try {\n      return parseStep(step, lines);\n    } catch (e) {\n      if (e.withStepIndex) {\n        throw e.withStepIndex(i);\n      } else {\n        throw e;\n      }\n    }\n  });\n\n  steps.forEach(step => {\n    const { lines, focusMap } = step;\n    lines.forEach((line, index) => {\n      line.focus = focusMap.has(index);\n      const columnFocus = focusMap.get(index);\n      line.focusPerToken = Array.isArray(columnFocus);\n      if (Array.isArray(columnFocus)) {\n        // this mutates the tokens array in order to change it to the same line in other steps\n        splitTokensToColumns(line.tokens);\n        line.tokens = setTokenFocus(line.tokens, columnFocus);\n      }\n    });\n  });\n\n  return steps;\n}\n\nfunction parseStep(step: InputStep, lines: Line[]) {\n  const { focus, ...rest } = step;\n  let focusMap = focus ? parseFocus(focus) : getDefaultFocus(lines);\n\n  const focusIndexes: number[] = Array.from(focusMap.keys());\n  const focusStart = Math.min.apply(Math, focusIndexes);\n  const focusEnd = Math.max.apply(Math, focusIndexes);\n\n  return {\n    lines,\n    focusMap,\n    focusStart,\n    focusEnd,\n    focusCenter: (focusStart + focusEnd + 1) / 2,\n    focusCount: focusEnd - focusStart + 1,\n    ...rest\n  };\n}\n\nfunction getDefaultFocus(lines: Line[]) {\n  const indexes = lines\n    .map((line, index) => (line.isNew ? index : -1))\n    .filter(index => index !== -1);\n  return new Map<number, boolean | number[]>(indexes.map(i => [i, true]));\n}\n\nfunction splitTokensToColumns(tokenArray: Token[]) {\n  const tokens = Array.from(tokenArray);\n  let key = 0;\n  tokenArray.splice(0, tokenArray.length);\n  tokens.forEach(token => {\n    const chars = Array.from(token.content);\n    chars.forEach(char =>\n      tokenArray.push({ ...token, content: char, key: key++ })\n    );\n  });\n}\n\nfunction setTokenFocus(tokens: Token[], focusColumns: number[]) {\n  // Assumes that tokens are already splitted in columns\n  // Return new token objects to avoid changing other steps tokens\n  return tokens.map((token, i) => ({\n    ...token,\n    focus: focusColumns.includes(i)\n  }));\n}\n","import React from \"react\";\n\nexport default function useWindowResize(handler, deps) {\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, deps);\n}\n","import { parseMetastring } from \"./codeblock-metastring-parser\";\nimport Code from \"./code\";\nimport React from \"react\";\n\nexport function readStepFromElement(element) {\n  if (element.type === Code) {\n    // wrap everything except [code, lang, focus] in {value}\n    const stepEntries = Object.entries(element.props).map(([key, value]) => ({\n      [key]: [\"code\", \"focus\", \"lang\"].includes(key) ? value : { value }\n    }));\n    return Object.assign({}, ...stepEntries);\n  }\n  if (!element.props.children || !element.props.children.props) {\n    return null;\n  }\n  const { props } = element.props.children;\n  const classNames = props.className;\n  return {\n    code: props.children,\n    lang: classNames && classNames[0].substring(\"language-\".length),\n    ...parseMetastring(props.metastring)\n  };\n}\n","import { parse } from \"shell-quote\";\n\ntype ParsedMetastring =\n  | { focus?: string }\n  | { [key: string]: { value: string } };\n\n/**\n * The metastring is the thing that comes after the language in markdown codeblocks\n *\n * ```js this is the metastring\n * code goes here\n * ```\n */\nexport function parseMetastring(metastring: string): ParsedMetastring {\n  if (!metastring) {\n    return {};\n  }\n\n  const argv = parse(metastring);\n\n  const result: ParsedMetastring = {};\n  argv.forEach(arg => {\n    if (!arg.includes(\"=\")) {\n      result.focus = arg;\n    } else {\n      const [key, value] = arg.split(/=(.*)/);\n      result[key] = { value };\n    }\n  });\n  return result;\n}\n","import React from \"react\";\nimport { UnknownError } from \"./standalone/errors\";\n\nexport default class ErrorBoundary extends React.Component<\n  {},\n  { error?: any }\n> {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  componentDidCatch(error, info) {\n    // console.log(error, info);\n  }\n\n  render() {\n    if (!this.state.error) {\n      return this.props.children;\n    } else if (this.state.error.element) {\n      return this.state.error.element;\n    } else {\n      console.error(this.state.error);\n      return <UnknownError error={this.state.error} />;\n    }\n  }\n}\n","import { useDeck } from \"mdx-deck\";\nimport React from \"react\";\n\nexport function useNotes(notesElements) {\n  const context = useDeck();\n  React.useEffect(() => {\n    if (!context || !context.register) return;\n    if (typeof context.index === \"undefined\") return;\n\n    const notes = getNotesFromElements(notesElements);\n\n    context.register(context.index, {\n      notes\n    });\n  }, []);\n}\n\nfunction getNotesFromElements(notesElements) {\n  const notes = notesElements.map(element => {\n    if (!element) {\n      // this is a step with empty notes\n      return null;\n    }\n\n    const { props } = element;\n\n    if (props.inline) {\n      // this is <Notes inline={true} />\n      return {\n        inline: true,\n        text: props.children\n      };\n    }\n\n    // this is <Notes>something</Notes>\n    // we shouldn't return an object here,\n    // to be compatible with the default Presenter\n    return props && props.children;\n  });\n\n  if (notes.length) {\n    const lastNotes = notes[notes.length - 1];\n    // we add an extra EOL to the last step\n    notes[notes.length - 1] = (lastNotes || \"\") + \"\\n\";\n  }\n\n  return notes;\n}\n\nexport function getTextFromNotes(notes) {\n  if (notes === null) {\n    // this is a step with empty notes\n    // we don't add extra lines here\n    // to allow a line of text with multiple notes\n    return \"\";\n  }\n\n  if (typeof notes === \"object\") {\n    // this comes from a step with inline=true\n    // but we check again just in case\n    return notes.text + (notes.inline ? \"\" : \"\\n\");\n  } else {\n    // this could be an empty note from any slide\n    // or a note from a step without the inline prop\n    return notes + \"\\n\";\n  }\n}\n","// based on https://github.com/streamich/react-use/blob/master/src/useSpring.ts\n// TODO remove dependency\nimport rebound from \"rebound\";\nimport { useState, useEffect } from \"react\";\n\nexport default function useSpring({\n  target = 0,\n  current = null,\n  tension = 0,\n  friction = 13,\n  round = x => x\n}) {\n  const [spring, setSpring] = useState(null);\n  const [value, setValue] = useState(target);\n\n  useEffect(() => {\n    const listener = {\n      onSpringUpdate: spring => {\n        const value = spring.getCurrentValue();\n        setValue(round(value));\n      }\n    };\n\n    if (!spring) {\n      const newSpring = new rebound.SpringSystem().createSpring(\n        tension,\n        friction\n      );\n      newSpring.setCurrentValue(target);\n      setSpring(newSpring);\n      newSpring.addListener(listener);\n      return;\n    }\n\n    return () => {\n      spring.removeListener(listener);\n      setSpring(null);\n    };\n  }, [tension, friction]);\n\n  useEffect(() => {\n    if (spring) {\n      spring.setEndValue(target);\n      if (current != null) {\n        spring.setCurrentValue(current);\n      }\n    }\n  }, [target, current]);\n\n  return value;\n}\n","import useSteps from \"./use-steps\";\nimport useSpring from \"./use-spring\";\n\nfunction useStepSpring(stepsCount) {\n  // step index according to mdx-deck\n  const targetStepIndex = useSteps(stepsCount - 1);\n\n  // real number between 0 and stepsCount - 1\n  const currentStepSpring = useSpring({\n    target: targetStepIndex,\n    round: x => Math.round(x * 1000) / 1000\n  });\n\n  return currentStepSpring;\n}\n\nexport { useStepSpring };\n","import { useSteps } from \"mdx-deck\";\n\nexport default function(stepsCount) {\n  const step = useSteps(stepsCount);\n  return step === Infinity ? 0 : step;\n}\n","import React from \"react\";\nimport { useDeck, Notes, useTheme } from \"mdx-deck\";\nimport CodeSurfer from \"./standalone/code-surfer\";\nimport { readStepFromElement } from \"./step-reader\";\nimport ErrorBoundary from \"./error-boundary\";\nimport { useNotes } from \"./notes\";\nimport { useStepSpring } from \"./use-step-spring\";\n\nfunction CodeSurferLayout({ children }) {\n  const deck = useDeck();\n  const steps = React.useMemo(getStepsFromChildren(children), [deck.index]);\n\n  useNotes(steps.map(s => s.notesElement));\n  const progress = useStepSpring(steps.length);\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        width: \"100vw\",\n        maxWidth: \"100%\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      }}\n      className=\"cs-layout\"\n    >\n      <CodeSurfer steps={steps} progress={progress} theme={theme.codeSurfer} />\n    </div>\n  );\n}\n\nconst getStepsFromChildren = children => () => {\n  const kids = React.Children.toArray(children);\n  return kids\n    .map((child, i) => {\n      const step = readStepFromElement(child);\n      if (!step) return;\n      const nextChild = kids[i + 1];\n      if (nextChild && nextChild.type === Notes) {\n        step.notesElement = nextChild;\n      }\n      return step;\n    })\n    .filter(x => x);\n};\n\nexport default props => (\n  <ErrorBoundary>\n    <CodeSurferLayout {...props} />\n  </ErrorBoundary>\n);\n","import React from \"react\";\nimport { readStepFromElement } from \"./step-reader\";\nimport CodeSurfer from \"./standalone/code-surfer\";\nimport { useDeck, Notes, useTheme } from \"mdx-deck\";\nimport ErrorBoundary from \"./error-boundary\";\nimport {\n  useSubtitleStyle,\n  useTitleStyle,\n  ThemeContext\n} from \"./standalone/theming\";\nimport { useNotes } from \"./notes\";\nimport { useStepSpring } from \"./use-step-spring\";\n\nfunction ColumnLayout({ children, themes = [], sizes }) {\n  const deck = useDeck();\n  const [columns, titles, subtitles, notesElements] = React.useMemo(\n    () => getColumnsFromChildren(children, sizes),\n    [deck.index]\n  );\n\n  useNotes(notesElements);\n  const progress = useStepSpring(columns[0].steps.length);\n  const stepIndex = Math.round(progress);\n  const theme = useTheme();\n  return (\n    <div\n      style={{\n        width: \"100vw\",\n        maxWidth: \"100%\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontSize: \"0.8em\",\n        position: \"relative\"\n      }}\n      className=\"cs-col-layout\"\n    >\n      {columns.map((column, i) => (\n        <Column\n          key={i}\n          column={column}\n          progress={progress}\n          theme={themes[i] ? themes[i].codeSurfer : theme.codeSurfer}\n        />\n      ))}\n\n      <ThemeContext.Provider value={theme.codeSurfer}>\n        <Title text={titles[stepIndex]} />\n        <Subtitle text={subtitles[stepIndex]} />\n      </ThemeContext.Provider>\n    </div>\n  );\n}\n\nfunction Column({ column, progress, theme }) {\n  return (\n    <div\n      style={{\n        flex: column.flex,\n        overflow: \"hidden\",\n        height: \"100%\"\n      }}\n    >\n      {column.isCode ? (\n        <CodeSurfer steps={column.steps} progress={progress} theme={theme} />\n      ) : (\n        column.steps[Math.round(progress)].element\n      )}\n    </div>\n  );\n}\nfunction Title({ text }) {\n  if (!text) return null;\n  return (\n    <h4 className=\"cs-title\" style={useTitleStyle()}>\n      <span>{text}</span>\n    </h4>\n  );\n}\nfunction Subtitle({ text }) {\n  if (!text) return null;\n  return (\n    <p\n      className=\"cs-subtitle\"\n      style={{ ...useSubtitleStyle(), margin: \"0.3em 0\" }}\n    >\n      <span>{text}</span>\n    </p>\n  );\n}\n\nfunction getColumnsFromChildren(children, sizes = []) {\n  const columns = [];\n  const stepElements = React.Children.toArray(children);\n  stepElements.forEach((stepElement, stepIndex) => {\n    React.Children.toArray(stepElement.props.children)\n      .filter(element => element.type !== Notes)\n      .forEach((codeElement, columnIndex) => {\n        columns[columnIndex] = columns[columnIndex] || {\n          steps: [],\n          isCode: true\n        };\n        const step = readStepFromElement(codeElement);\n        columns[columnIndex].isCode = columns[columnIndex].isCode && step;\n        columns[columnIndex].steps[stepIndex] = step || {\n          element: codeElement\n        };\n      });\n  });\n\n  columns.forEach((column, columnIndex) => {\n    column.flex = sizes[columnIndex] || 1;\n  });\n\n  const titles = stepElements.map(stepElement => stepElement.props.title);\n  const subtitles = stepElements.map(stepElement => stepElement.props.subtitle);\n  const notesElements = stepElements.map(stepElement => {\n    const stepChildren = React.Children.toArray(stepElement.props.children);\n    const notesElement = stepChildren.find(element => element.type === Notes);\n    return notesElement;\n  });\n\n  return [columns, titles, subtitles, notesElements];\n}\n\nexport default props => (\n  <ErrorBoundary>\n    <ColumnLayout {...props} />\n  </ErrorBoundary>\n);\n","import React from \"react\";\nimport { globalHistory } from \"@reach/router\";\nimport { Zoom, Clock, Slide, useTheme } from \"mdx-deck\";\nimport useSpring from \"./use-spring\";\nimport { getTextFromNotes } from \"./notes\";\nimport { Global, css } from \"@emotion/core\";\nimport { Swipeable } from \"react-swipeable\";\n\nconst Teleprompter = ({ index, children, ...rest }) => {\n  const ref = React.useRef(null);\n  const [target, setTarget] = React.useState(0);\n  const scrollTop = useSpring({\n    target,\n    friction: 25\n  });\n\n  React.useEffect(() => {\n    const self = ref.current;\n    const child = self.children[index + 1];\n    const childTop = child.offsetTop - self.offsetTop;\n    const childHeight = child.getBoundingClientRect().height;\n    const selfHeight = self.getBoundingClientRect().height;\n    if (childHeight) {\n      setTarget(childTop - selfHeight / 2 + childHeight / 2);\n    }\n  }, [index]);\n\n  React.useLayoutEffect(() => {\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  return (\n    <div {...rest} ref={ref}>\n      <div style={{ height: \"50%\" }} />\n      {children}\n      <div style={{ height: \"50%\" }} />\n    </div>\n  );\n};\n\nfunction AllSlides({ context, slides, style }) {\n  return (\n    <div style={style}>\n      {slides.map((Component, i) => (\n        <Slide key={i} context={{ ...context, index: i }} index={i}>\n          <Component />\n        </Slide>\n      ))}\n    </div>\n  );\n}\n\nfunction MobilePresenter({\n  allNotes,\n  noteIndex,\n  children,\n  windowWidth,\n  previous,\n  next,\n  slides,\n  index\n}) {\n  const ratio = 16 / 9;\n  const deckHeight = windowWidth / ratio;\n  const windowHeight = window.innerHeight;\n  const separatorHeight = 6;\n  const notesHeight = windowHeight - deckHeight - separatorHeight;\n  const { colors } = useTheme();\n  const progress = (100 * (index + 1)) / slides.length;\n  return (\n    <div\n      className=\"presenter\"\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: windowHeight,\n        background: colors.background,\n        overflow: \"hidden\"\n      }}\n    >\n      <Global\n        styles={css`\n          .ekm8v3h0,\n          .cs-layout,\n          cs-col-layout {\n            height: ${deckHeight}px !important;\n          }\n        `}\n      />\n      <div\n        style={{\n          height: deckHeight\n        }}\n      >\n        {children}\n      </div>\n      <div\n        style={{\n          height: separatorHeight,\n          background: colors.link,\n          opacity: 0.7,\n          boxShadow: \"2px 2px 2px 1px rgba(0, 0, 0, 0.25)\"\n        }}\n      >\n        <div\n          style={{\n            height: \"100%\",\n            width: `${100 - progress}%`,\n            opacity: 0.5,\n            float: \"right\",\n            background: \"#444\"\n          }}\n        />\n      </div>\n      <div style={{ height: notesHeight }}>\n        <Swipeable\n          onSwipedRight={previous}\n          onSwipedLeft={next}\n          onSwipedDown={previous}\n          onSwipedUp={next}\n          style={{ height: \"100%\" }}\n        >\n          <Teleprompter\n            index={noteIndex}\n            style={{\n              color: colors.text,\n              whiteSpace: \"pre-wrap\",\n              overflow: \"hidden\",\n              height: \"100%\",\n              width: \"90%\",\n              margin: \"0px auto\"\n            }}\n            onClick={next}\n          >\n            {allNotes.map((note, i) => (\n              <span style={{ opacity: noteIndex === i ? 1 : 0.5 }} key={i}>\n                {note.notes}\n              </span>\n            ))}\n          </Teleprompter>\n        </Swipeable>\n      </div>\n    </div>\n  );\n}\n\nfunction DesktopPresenter({ slides, index, allNotes, noteIndex, children }) {\n  return (\n    <div\n      style={{\n        color: \"#fafafa\",\n        backgroundColor: \"#222\",\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\"\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          padding: \"10px\",\n          boxSizing: \"border-box\"\n        }}\n      >\n        <Zoom zoom={5 / 8}>{children}</Zoom>\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            width: \"100%\",\n            padding: \"0 16px\",\n            background: \"#333\"\n          }}\n        >\n          <pre>\n            Slide {index + 1} of {slides.length}\n          </pre>\n          <Clock />\n        </div>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={globalHistory.location.origin + globalHistory.location.pathname}\n          style={{ color: \"#bbb\", padding: \"10px\" }}\n        >\n          Open Slides in New Window\n        </a>\n      </div>\n      <div style={{ height: \"100%\", boxSizing: \"border-box\" }}>\n        <Teleprompter\n          index={noteIndex}\n          style={{\n            color: \"#FFFF33\",\n            whiteSpace: \"pre-wrap\",\n            overflow: \"hidden\",\n            height: \"100%\",\n            width: \"90%\",\n            margin: \"5px auto\"\n          }}\n        >\n          {allNotes.map((note, i) => (\n            <span style={{ opacity: noteIndex === i ? 1 : 0.5 }} key={i}>\n              {note.notes}\n            </span>\n          ))}\n        </Teleprompter>\n      </div>\n    </div>\n  );\n}\n\nexport const Presenter = props => {\n  const { slides, metadata, index, step, children, previous, next } = props;\n  const windowWidth = useWindowWidth();\n\n  const [areNotesReady, setNotesReady] = React.useState(false);\n  React.useEffect(() => {\n    setNotesReady(true);\n  }, []);\n\n  const allNotes = React.useMemo(() => {\n    return slides.flatMap((slide, slideIndex) => {\n      const { notes: slideNotes } = metadata[slideIndex] || { notes: \"\" };\n\n      if (Array.isArray(slideNotes)) {\n        return slideNotes.map((stepNotes, stepIndex) => ({\n          notes: getTextFromNotes(stepNotes),\n          slideIndex,\n          stepIndex\n        }));\n      } else {\n        return {\n          notes: getTextFromNotes(slideNotes),\n          slideIndex,\n          stepIndex: \"any\"\n        };\n      }\n    });\n  }, [areNotesReady]);\n\n  const noteIndex = allNotes.findIndex(\n    stepNotes =>\n      stepNotes.slideIndex === index &&\n      (stepNotes.stepIndex === \"any\" || stepNotes.stepIndex === step)\n  );\n\n  return (\n    <React.Fragment>\n      {!areNotesReady && (\n        // Need to render all slides to run the effects that set the notes\n        <AllSlides\n          style={{ display: \"none\" }}\n          context={props}\n          slides={slides}\n        />\n      )}\n      {windowWidth > 700 ? (\n        <DesktopPresenter\n          {...{ allNotes, index, slides, noteIndex, children }}\n        />\n      ) : (\n        <MobilePresenter\n          {...{\n            allNotes,\n            index,\n            slides,\n            noteIndex,\n            children,\n            windowWidth,\n            previous,\n            next\n          }}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nfunction useWindowWidth() {\n  const [width, changeWidth] = React.useState(window && window.innerWidth);\n  React.useEffect(() => {\n    const handleResize = () => changeWidth(window.innerWidth);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [changeWidth]);\n  return width;\n}\n\nexport default Presenter;\n","import Presenter from \"./presenter\";\nimport {\n  dracula as draculaTheme,\n  duotoneLight as duotoneLightTheme,\n  duotoneDark as duotoneDarkTheme,\n  github as githubTheme,\n  nightOwl as nightOwlTheme,\n  oceanicNext as oceanicNextTheme,\n  shadesOfPurple as shadesOfPurpleTheme,\n  ultramin as ultraminTheme,\n  vsDark as vsDarkTheme\n} from \"./standalone/themes\";\n\nfunction mdThemes(theme) {\n  const stringStyle = theme.styles.find(s => s.types.includes(\"string\"));\n\n  const color = theme.pre.color;\n  const bg = theme.pre.background;\n\n  return [\n    { codeSurfer: theme },\n    {\n      colors: {\n        text: color,\n        background: bg,\n        link: stringStyle && stringStyle.style.color,\n        pre: color,\n        code: color,\n        preBackground: bg\n      },\n      Presenter,\n      codeSurfer: theme\n    }\n  ];\n}\n\nconst [draculaPartial, dracula] = mdThemes(draculaTheme);\nconst [duotoneLightPartial, duotoneLight] = mdThemes(duotoneLightTheme);\nconst [duotoneDarkPartial, duotoneDark] = mdThemes(duotoneDarkTheme);\nconst [githubPartial, github] = mdThemes(githubTheme);\nconst [nightOwlPartial, nightOwl] = mdThemes(nightOwlTheme);\nconst [oceanicNextPartial, oceanicNext] = mdThemes(oceanicNextTheme);\nconst [shadesOfPurplePartial, shadesOfPurple] = mdThemes(shadesOfPurpleTheme);\nconst [ultraminPartial, ultramin] = mdThemes(ultraminTheme);\nconst [vsDarkPartial, vsDark] = mdThemes(vsDarkTheme);\n\nexport {\n  dracula,\n  draculaPartial,\n  duotoneLight,\n  duotoneLightPartial,\n  duotoneDark,\n  duotoneDarkPartial,\n  github,\n  githubPartial,\n  nightOwl,\n  nightOwlPartial,\n  oceanicNext,\n  oceanicNextPartial,\n  shadesOfPurple,\n  shadesOfPurplePartial,\n  ultramin,\n  ultraminPartial,\n  vsDark,\n  vsDarkPartial\n};\n","import React from \"react\";\n\nfunction Step() {\n  return null;\n}\n\nexport default Step;\n"],"names":["Code","UnknownError","React","ErrorBox","header","body","error","toString","invalidFocusNumber","n","withFocusString","focusString","withStepIndex","stepIndex","element","StepErrorHeader","Fragment","Mark","style","background","color","border","padding","maxWidth","margin","fontFamily","fontSize","i","j","k","fontWeight","children","newlineRe","slideDiff","lines","codes","slideIndex","language","prevLines","filter","l","slides","includes","currCode","oldCode","newCode","changes","diffLines","oldIndex","map","count","removed","added","value","split","lastLine","pop","push","result","myDiff","forEach","change","addAtIndex","indexOf","addLines","content","tokens","array","splice","tokenLines","code","lang","Prism","languages","href","flattenTokens","flatList","token","type","Array","isArray","tokenizeStrings","prismTokens","parentType","prismToken","wrapToken","tokenize","currentLine","contentLines","firstContent","shift","undefined","line","index","parsePart","part","columnsMatch","match","columnsList","expandString","Number","flat","c","lineNumber","start","end","isNaturalNumber","errors","startNumber","list","n1","Math","abs","n2","parseInt","isNaN","makeTheme","prismTheme","override","styles","title","plain","backgroundColor","subtitle","pre","theme","types","fontStyle","opacity","textDecorationLine","ThemeContext","createContext","useSafeTheme","useContext","base","usePreStyle","useTitleStyle","position","top","width","useSubtitleStyle","bottom","boxSizing","Tuple","prev","next","spread","this","select","selector","selectMany","newPrev","newNext","ArrayTuple","get","_key","Error","_mapper","_getChildrenMap","_dict","nexts","unsortedMap","Map","key","set","sortedKeys","from","keys","sort","a","b","mapper","childrenMap","tuple","_this","Context","t","parent","useSelect","useMemo","useSelectMany","newTuple","_this2","ListContext","animate","animation","config","when","staggeredT","stagger","items","childCtx","prevChild","nextChild","isSelected","isThisChild","x","N","length","currentIndex","findIndex","min","max","animations","merge","results","composite","MULTIPLY","firstResult","_","mergeArrays","merged","Object","assign","opacities","reduce","mergeObjects","_this3","childTuple","_this5","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","mergeResults","playhead","always","props","context","step","to","tween","ease","easing","chain","ctx","fns","durations","run","lowerDuration","fn","thisDuration","upperDuration","delay","parallel","createAnimation","node","newContext","FadeIn","FadeOut","FadeOutIn","outHieght","SlideToLeft","ShrinkHeight","lineHeight","height","ExitLine","SlideFromRight","GrowHeight","EnterLine","switchText","any","focusLine","focus","focusToken","_prev","_next","scaleToFocus","dimensions","scale","prevZoom","getZoom","nextZoom","containerWidth","contentWidth","contentHeight","focusCount","availableHeight","containerHeight","paddingBottom","paddingTop","CodeSurferContainer","stepPlayhead","steps","floor","className","container","maxHeight","CodeSurferContent","Title","Subtitle","heightChangingAnimations","ref","useRef","scrollTop","stepCtx","linesCtx","prevStep","nextStep","allPrevLines","allNextLines","prevCenter","focusCenter","nextCenter","prevCenterLine","nextCenterLine","currentCenter","lineStyles","h","useScrollTop","useLayoutEffect","current","verticalOrigin","overflow","display","transform","transformOrigin","Line","themeStylesByType","lineStyle","lineTokens","focusPerToken","getStyleForToken","create","tokensCtx","tokenCtx","animatedStyle","text","bgStyle","fadeBackground","textStyle","fadeText","fadeOutIn","fadeOut","fadeIn","outerHeight","window","getComputedStyle","parseFloat","offsetHeight","CodeSurfer","progress","inputSteps","rawSteps","stepsLines","s","applyPatch","getCodes","reverse","parseLines","lineIndex","isNew","show","rest","focusMap","parts","parseFocus","indexes","getDefaultFocus","focusIndexes","focusStart","apply","focusEnd","parseStep","e","has","tokenArray","focusColumns","columnFocus","char","parseSteps","handler","useState","setResult","useEffect","addEventListener","removeEventListener","containers","querySelectorAll","stepsDimensions","longestLine","getLongestLine","longestLineSpan","querySelector","containerParent","parentElement","lineCount","avaliableHeight","scrollHeight","clientHeight","clientWidth","getStepDimensions","d","useDimensions","Provider","Frame","_step","readStepFromElement","stepEntries","entries","classNames","substring","metastring","argv","parse","arg","parseMetastring","ErrorBoundary","state","getDerivedStateFromError","componentDidCatch","info","render","console","Component","useNotes","notesElements","useDeck","register","notes","inline","getNotesFromElements","getTextFromNotes","useSpring","target","tension","friction","round","spring","setSpring","setValue","listener","onSpringUpdate","getCurrentValue","newSpring","rebound","SpringSystem","createSpring","setCurrentValue","addListener","removeListener","setEndValue","useStepSpring","stepsCount","useSteps","Infinity","CodeSurferLayout","deck","getStepsFromChildren","notesElement","useTheme","flexDirection","justifyContent","alignItems","codeSurfer","kids","Children","toArray","child","Notes","ColumnLayout","themes","sizes","columns","stepElements","stepElement","codeElement","columnIndex","isCode","column","flex","titles","subtitles","find","getColumnsFromChildren","Column","Teleprompter","setTarget","self","childTop","offsetTop","childHeight","getBoundingClientRect","selfHeight","AllSlides","Slide","MobilePresenter","allNotes","noteIndex","previous","deckHeight","windowWidth","windowHeight","innerHeight","notesHeight","colors","Global","css","link","boxShadow","Swipeable","onSwipedRight","onSwipedLeft","onSwipedDown","onSwipedUp","whiteSpace","onClick","note","DesktopPresenter","Zoom","zoom","Clock","rel","globalHistory","location","origin","pathname","Presenter","changeWidth","metadata","innerWidth","handleResize","areNotesReady","setNotesReady","flatMap","slide","slideNotes","stepNotes","mdThemes","stringStyle","bg","preBackground","draculaTheme","draculaPartial","dracula","duotoneLightTheme","duotoneLightPartial","duotoneLight","duotoneDarkTheme","duotoneDarkPartial","duotoneDark","githubTheme","githubPartial","github","nightOwlTheme","nightOwlPartial","nightOwl","oceanicNextTheme","oceanicNextPartial","oceanicNext","shadesOfPurpleTheme","shadesOfPurplePartial","shadesOfPurple","ultraminTheme","ultraminPartial","ultramin","vsDarkTheme","vsDarkPartial","vsDark"],"mappings":"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"}