"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=e(t),r=require("mdx-deck"),o=require("diff"),i=e(require("prismjs")),a=e(require("array.prototype.flat"));require("prismjs/components/prism-markup"),require("prismjs/components/prism-bash"),require("prismjs/components/prism-clike"),require("prismjs/components/prism-c"),require("prismjs/components/prism-cpp"),require("prismjs/components/prism-css"),require("prismjs/components/prism-css-extras"),require("prismjs/components/prism-javascript"),require("prismjs/components/prism-jsx"),require("prismjs/components/prism-js-extras"),require("prismjs/components/prism-coffeescript"),require("prismjs/components/prism-diff"),require("prismjs/components/prism-git"),require("prismjs/components/prism-go"),require("prismjs/components/prism-graphql"),require("prismjs/components/prism-json"),require("prismjs/components/prism-less"),require("prismjs/components/prism-makefile"),require("prismjs/components/prism-markdown"),require("prismjs/components/prism-objectivec"),require("prismjs/components/prism-ocaml"),require("prismjs/components/prism-python"),require("prismjs/components/prism-reason"),require("prismjs/components/prism-sass"),require("prismjs/components/prism-scss"),require("prismjs/components/prism-sql"),require("prismjs/components/prism-stylus"),require("prismjs/components/prism-typescript"),require("prismjs/components/prism-wasm"),require("prismjs/components/prism-yaml");var s=require("shell-quote"),l=e(require("rebound")),c=require("@reach/router"),u=require("@emotion/core"),p=require("react-swipeable");function f(){return null}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function y(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function h(e){return n.createElement(v,{header:"Oops, there's a problem",body:e.error.toString()})}function g(e){return{withFocusString:function(t){return{withStepIndex:function(r){return{element:n.createElement(v,{header:n.createElement(b,{stepIndex:r}),body:n.createElement(n.Fragment,null,n.createElement(x,null,'"',e,'"')," isn't a valid number"," ",e!=t&&n.createElement(x,null,' (in "',t,'")'))})}}}}}}function v(e){var t=e.body;return n.createElement("div",{style:{background:"#290000",color:"#b96f70",border:"2px solid #b96f70",padding:"10px 30px",maxWidth:"90vw",margin:"0 auto",fontFamily:"monospace",fontSize:"1rem"}},n.createElement("h3",null,e.header),n.createElement("p",null,t))}function b(e){var t,r,o,i=e.stepIndex;return n.createElement(n.Fragment,null,"Oops, there's a problem with the"," ",n.createElement(x,null,i+1,n.createElement("sup",null,(o=(t=i+1)%100,1==(r=t%10)&&11!=o?"st":2==r&&12!=o?"nd":3==r&&13!=o?"rd":"th"))," step"))}function x(e){return n.createElement("mark",{style:{background:"none",color:"pink",fontWeight:"bolder"}},e.children)}var E=/\r\n|\r|\n/,w=/\r\n|\r|\n/;function k(e,t,r,a){var s=e.filter(function(e){return e.slides.includes(r-1)}),l=t[r];(function(e,n){var i=o.diffLines(t[r-1]||"",l),a=-1;return i.map(function(e){var t=e.count,n=e.removed,r=e.added,o=e.value.split(w),i=o.pop();i&&o.push(i);var s={oldIndex:a,lines:o,count:t,removed:n,added:r};return r||(a+=t||0),s})})().forEach(function(t){if(t.added){var n=e.indexOf(s[t.oldIndex])+1,o=t.lines.map(function(e){return{content:e,slides:[r],tokens:[]}});(a=e).splice.apply(a,[n,0].concat(o))}else if(!t.removed)for(var i=1;i<=(t.count||0);i++)s[t.oldIndex+i].slides.push(r);var a});var c=function(e,t){var r;if(void 0===t&&(t="javascript"),!i.languages[t])throw{element:n.createElement(v,{header:"Oops, there's a problem",body:n.createElement(n.Fragment,null,"Syntax highlighter for ",n.createElement(x,null,'"',r={lang:t}.lang,'"')," not found.",n.createElement("p",null,"You can try importing it from prismjs with: ",n.createElement("br",null),n.createElement(x,null,'import "prismjs/components/prism-',r,'"')),"(See"," ",n.createElement("a",{href:"https://prismjs.com/#supported-languages",style:{color:"grey"}},"all the supported languages"),")")})};var o=function e(t){var n=[];return t.forEach(function(t){var r=t.type,o=t.content;Array.isArray(o)?n.push.apply(n,e(o)):n.push({type:r,content:o})}),n}(function e(t,n){return void 0===n&&(n="plain"),t.map(function(t){return function t(n,r){return void 0===r&&(r="plain"),"string"==typeof n?{type:r,content:n}:Array.isArray(n.content)?{type:n.type,content:e(n.content,n.type)}:t(n.content,n.type)}(t,n)})}(i.tokenize(e,i.languages[t]))),a=[],s=[a];return o.forEach(function(e){var t=e.content.split(E),n=t.shift();void 0!==n&&""!==n&&a.push({type:e.type,content:n}),t.forEach(function(t){s.push(a=[]),""!==t&&a.push({type:e.type,content:t})})}),s}(l,a);e.filter(function(e){return e.slides.includes(r)}).forEach(function(e,t){return e.tokens=c[t]})}function S(e){var t=e.match(/(\d+)\[(.+)\]/);if(t){var n=t[1],r=t[2].split(",").map(j);return[[Number(n)-1,a(r).map(function(e){return e-1})]]}return j(e).map(function(e){return[e-1,!0]})}function j(e){var t=e.split(":"),r=t[0],o=t[1];if(!C(r))throw g(r);var i=Number(r);if(i<1)throw{withFocusString:function(e){return{withStepIndex:function(t){return{element:n.createElement(v,{header:n.createElement(b,{stepIndex:t}),body:n.createElement(n.Fragment,null,'Are you using "0" as a line or column number'," ",n.createElement(x,null,'in "',e,'"'),"?",n.createElement("br",null),"(Line and column numbers should start at 1, not 0) ",n.createElement("br",null))})}}}}};if(o){if(!C(o))throw g(o);for(var a=[],s=i;s<=+o;s++)a.push(s);return a}return[i]}function C(e){e=e.toString();var t=Math.abs(e),n=parseInt(e,10);return!isNaN(t)&&n===t&&t.toString()===e}function M(e,t){return void 0===t&&(t={}),d({styles:e.styles,title:{background:e.plain.backgroundColor},subtitle:{color:"#d6deeb",background:"rgba(10,10,10,0.9)"},pre:{color:e.plain.color,background:e.plain.backgroundColor},code:{color:e.plain.color,background:e.plain.backgroundColor}},t)}var q=M({plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector"],style:{color:"#00009f"}}]}),O=M({plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}),I=M({plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]}),H=M({plain:{backgroundColor:"#faf8f5",color:"#728fcb"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#b6ad9a"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#063289"}},{types:["property","function"],style:{color:"#b29762"}},{types:["tag-id","selector","atrule-id"],style:{color:"#2d2006"}},{types:["attr-name"],style:{color:"#896724"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule"],style:{color:"#728fcb"}},{types:["placeholder","variable"],style:{color:"#93abdc"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#896724"}}]}),A=M({plain:{color:"#d6deeb",backgroundColor:"#011627"},styles:[{types:["changed"],style:{color:"rgb(162, 191, 252)",fontStyle:"italic"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)",fontStyle:"italic"}},{types:["inserted","attr-name"],style:{color:"rgb(173, 219, 103)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(99, 119, 119)",fontStyle:"italic"}},{types:["string","url"],style:{color:"rgb(173, 219, 103)"}},{types:["variable"],style:{color:"rgb(214, 222, 235)"}},{types:["number"],style:{color:"rgb(247, 140, 108)"}},{types:["builtin","char","constant","function"],style:{color:"rgb(130, 170, 255)"}},{types:["punctuation"],style:{color:"rgb(199, 146, 234)"}},{types:["selector","doctype"],style:{color:"rgb(199, 146, 234)",fontStyle:"italic"}},{types:["class-name"],style:{color:"rgb(255, 203, 139)"}},{types:["tag","operator","keyword"],style:{color:"rgb(127, 219, 202)"}},{types:["boolean"],style:{color:"rgb(255, 88, 116)"}},{types:["property"],style:{color:"rgb(128, 203, 196)"}},{types:["namespace"],style:{color:"rgb(178, 204, 214)"}}]},{title:{background:"rgba(1, 22, 39, 0.8)"}}),N=M({plain:{backgroundColor:"#282c34",color:"#ffffff"},styles:[{types:["attr-name"],style:{color:"#c5a5c5"}},{types:["attr-value"],style:{color:"#8dc891"}},{types:["comment","block-comment","prolog","doctype","cdata"],style:{color:"#999999"}},{types:["property","number","function-name","constant","symbol","deleted"],style:{color:"#5a9bcf"}},{types:["boolean"],style:{color:"#ff8b50"}},{types:["tag"],style:{color:"#fc929e"}},{types:["string"],style:{color:"#8dc891"}},{types:["punctuation"],style:{color:"#8dc891"}},{types:["selector","char","builtin","inserted"],style:{color:"#D8DEE9"}},{types:["function"],style:{color:"#79b6f2"}},{types:["operator","entity","url","variable"],style:{color:"#d7deea"}},{types:["keyword"],style:{color:"#c5a5c5"}},{types:["at-rule","class-name"],style:{color:"#FAC863"}},{types:["important"],style:{fontWeight:400}},{types:["bold"],style:{fontWeight:"bold"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}}]}),W=M({plain:{color:"#9EFEFF",backgroundColor:"#2D2A55"},styles:[{types:["changed"],style:{color:"rgb(255, 238, 128)"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)"}},{types:["inserted"],style:{color:"rgb(173, 219, 103)"}},{types:["comment"],style:{color:"rgb(179, 98, 255)",fontStyle:"italic"}},{types:["punctuation"],style:{color:"rgb(255, 255, 255)"}},{types:["constant"],style:{color:"rgb(255, 98, 140)"}},{types:["string","url"],style:{color:"rgb(165, 255, 144)"}},{types:["variable"],style:{color:"rgb(255, 238, 128)"}},{types:["number","boolean"],style:{color:"rgb(255, 98, 140)"}},{types:["attr-name"],style:{color:"rgb(255, 180, 84)"}},{types:["keyword","operator","property","namespace","tag","selector","doctype"],style:{color:"rgb(255, 157, 0)"}},{types:["builtin","char","constant","function","class-name"],style:{color:"rgb(250, 208, 0)"}}]}),F=M({plain:{color:"#282a2e",backgroundColor:"#ffffff"},styles:[{types:["comment"],style:{color:"rgb(197, 200, 198)"}},{types:["string","number","builtin","variable"],style:{color:"rgb(150, 152, 150)"}},{types:["class-name","function","tag","attr-name"],style:{color:"rgb(40, 42, 46)"}}]}),P=M({plain:{color:"#9CDCFE",backgroundColor:"#1E1E1E"},styles:[{types:["prolog"],style:{color:"rgb(0, 0, 128)"}},{types:["comment"],style:{color:"rgb(106, 153, 85)"}},{types:["builtin","changed","keyword"],style:{color:"rgb(86, 156, 214)"}},{types:["number","inserted"],style:{color:"rgb(181, 206, 168)"}},{types:["constant"],style:{color:"rgb(100, 102, 149)"}},{types:["attr-name","variable"],style:{color:"rgb(156, 220, 254)"}},{types:["deleted","string","attr-value"],style:{color:"rgb(206, 145, 120)"}},{types:["selector"],style:{color:"rgb(215, 186, 125)"}},{types:["tag"],style:{color:"rgb(78, 201, 176)"}},{types:["tag"],languages:["markup"],style:{color:"rgb(86, 156, 214)"}},{types:["punctuation","operator"],style:{color:"rgb(212, 212, 212)"}},{types:["punctuation"],languages:["markup"],style:{color:"#808080"}},{types:["function"],style:{color:"rgb(220, 220, 170)"}},{types:["class-name"],style:{color:"rgb(78, 201, 176)"}},{types:["char"],style:{color:"rgb(209, 105, 105)"}}]}),T=n.createContext(null);function D(){return n.useContext(T)||q}function L(){return D().pre||{}}function Q(){return d({},{position:"absolute",top:0,width:"100%",margin:0,padding:"1em 0"},D().title||{})}function z(){return d({},{position:"absolute",bottom:0,width:"calc(100% - 2em)",boxSizing:"border-box",margin:"0.3em 1em",padding:"0.5em",background:"rgba(2,2,2,0.9)"},D().subtitle||{})}var _=function(){function e(e,t){this.prev=e,this.next=t}var t=e.prototype;return t.spread=function(){return[this.prev,this.next]},t.select=function(t){var n=this.spread(),r=n[0],o=n[1];return new e(null===r?null:void 0===r?void 0:t(r),null===o?null:void 0===o?void 0:t(o))},t.selectMany=function(e){var t=this.spread(),n=t[0],r=t[1],o=null===n?null:void 0===n?void 0:e(n),i=null===r?null:void 0===r?void 0:e(r);return new B(o,i)},t.get=function(e){throw Error("Get only supported in ArrayTuple")},t.map=function(e){throw Error("Map only supported in ArrayTuple")},e}(),B=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n._getChildrenMap=function(){if(!this._dict){var e=this.spread(),t=e[1]||[],n=new Map((e[0]||[]).map(function(e){return[e.key,{prev:e}]}));t.forEach(function(e){var t=n.get(e.key)||{prev:void 0};n.set(e.key,{prev:t.prev,next:e})});var r=Array.from(n.keys());r.sort(function(e,t){return e<t?-1:e>t?1:0}),this._dict=new Map(r.map(function(e){var t=n.get(e)||{},r=t.prev,o=t.next;return[e,new _(void 0===r?void 0:r,void 0===o?void 0:o)]}))}return this._dict},n.get=function(e){return this._getChildrenMap().get(e)},n.map=function(e){var t=this,n=this._getChildrenMap(),r=[];return n.forEach(function(n,o){return r.push(e(n,o,t))}),r},t}(_),R=function(){function e(e,t,n){this.tuple=e,this.t=t,this.parent=n}var t=e.prototype;return t.useSelect=function(t){var r=this;return new e(n.useMemo(function(){return r.tuple.select(t)},[this.tuple]),this.t)},t.useSelectMany=function(e){var t=this,r=n.useMemo(function(){return t.tuple.selectMany(e)},[this.tuple]);return new V(r,this.t)},t.spread=function(){return this.tuple.spread()},t.animate=function(e,t){void 0===t&&(t={});var n=this.tuple.spread(),r=n[0],o=n[1];if(t.when&&!t.when(r,o))return{};var i=this.t;if(t.stagger){if(!this.parent)throw Error("Can't use stagger without a parent context");var a=this.parent.map(function(e){var n=e.spread(),i=n[0],a=n[1];return{isSelected:!t.when||t.when(i,a),isThisChild:i===r&&a===o}}).filter(function(e){return e.isSelected}),s=a.length;if(s>1){var l=a.findIndex(function(e){return e.isThisChild});i=Math.min(1,Math.max(0,(this.t-l*(t.stagger/(s-1)))/(1-t.stagger)))}}return e(r,o,i)},t.animations=function(e){var t=this;return function e(t,n){void 0===n&&(n=G);var r=t[0];return t.length<2?r:Array.isArray(r)?function(t,n){return t[0].map(function(r,o){return e(t.map(function(e){return e[o]}),n)})}(t,n):function(e,t){var n=Object.assign.apply(Object,[{}].concat(e));if(t===G){var r=e.map(function(e){return e.opacity}).filter(function(e){return null!=e});0!==r.length&&(n.opacity=r.reduce(function(e,t){return e*t}))}return n}(t,n)}(e.map(function(e){var n=e.animation,r=y(e,["animation"]);return t.animate(n,r)}))},e}(),V=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).tuple=t,r}return m(t,e),t.prototype.map=function(e){var t=this;return this.tuple.map(function(n,r){return e(new R(n,t.t,t),r)})},t}(R),G="multiply",U={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},X="multiply";function Y(e,t){void 0===t&&(t=null);var n=e[0];if(e.length<2)return n;if(Array.isArray(n))return n.map(function(n,r){return Y(e.map(function(e){return e[r]}),t)});var r=Object.assign.apply(Object,[{}].concat(e));if(t===X){var o=e.map(function(e){return e.opacity}).filter(function(e){return null!=e});0!==o.length&&(r.opacity=o.reduce(function(e,t){return e*t}))}return r}var Z={always:function(e,t){return function(t){return e.value}},step:function(e,t){return function(t){return t<.5?e.from:e.to}},tween:function(e,t){return function(t){var n=e.from,r=e.to,o=e.ease,i=void 0===o?U.linear:o,a={};return Object.keys(n).forEach(function(e){var o=n[e]+(r[e]-n[e])*i(t);"x"===e?a.transform="translateX("+o+"px)":a[e]=o}),a}},chain:function(e,t){var n=e.children,r=e.durations;return function(e){for(var o=K(n[0],0,t),i=0,a=0;a<n.length;a++){var s=n[a],l=r[a],c=i+l;i<=e&&e<=c?o=Y([o,K(s,(e-i)/l,t)]):c<e?o=Y([o,K(s,1,t)]):e<i&&(o=Y([K(s,0,t),o])),i=c}return o}},delay:function(){return function(){return{}}},parallel:function(e,t){var n=e.children;return function(e){return Y(n.map(function(n){return K(n,e,t)}),X)}},list:function(e,t){var n=e.forEach,r=e.children;return function(e){return n.map(r[0]).map(function(n){return K(n,e,t)})}}};function J(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=d({},t,{children:r});return{type:"string"==typeof e?Z[e]:e,props:i}}function K(e,t,n){if(void 0===n&&(n={}),e.type===function(){throw Error("shouldnt run Context")}){var r=e.props,o=r.children,i=d({},n,y(r,["children"]));return K(o[0],t,i)}var a=e.type(e.props,n);return a.type?K(a,t,n):a(t)}function $(){return J("tween",{from:{opacity:0},to:{opacity:1}})}function ee(){return J("tween",{from:{opacity:1},to:{opacity:0}})}function te(){return J("chain",{durations:[.5,.5]},J(ee,null),J($,null))}var ne=0,re=function(){return J("tween",{from:{x:0,opacity:1},to:{x:-250,opacity:0},ease:U.easeInQuad})};function oe(e){var t=e.lineHeight;return t?J("tween",{from:{height:t},to:{height:ne},ease:U.easeInOutQuad}):J("step",{from:{height:null},to:{height:0}})}function ie(e){var t=e.lineHeight;return J("chain",{durations:[.35,.3,.35]},J(re,null),J(oe,{lineHeight:t}))}var ae=function(){return J("tween",{from:{x:250,opacity:0},to:{x:0,opacity:1},ease:U.easeOutQuad})};function se(e){var t=e.lineHeight;return t?J("tween",{from:{height:ne},to:{height:t},ease:U.easeInOutQuad}):J("step",{from:{height:0},to:{height:null}})}function le(e){var t=e.lineHeight;return J("chain",{durations:[.35,.3,.35]},J("delay",null),J(se,{lineHeight:t}),J(ae,null))}function ce(e,t,n){return n<.5?e&&e.value:t&&t.value}function ue(e,t){return e||t}var pe=function(e,t,n){return K(J("tween",{from:{opacity:e&&e.focus?1:.3},to:{opacity:t&&t.focus?1:.3}}),n)},fe=function(e,t,n){return K(J("tween",{from:{opacity:e&&!1===e.focus?.3:1},to:{opacity:t&&!1===t.focus?.3:1}}),n)},de=function(e,t){return function(n,r,o){return K(J("tween",{from:{value:e||0},to:{value:t||0},ease:U.easeInOutQuad}),o).value}},me=function(e,t,n){if(!ue(e,t).dimensions)return function(e){return{scale:1}};var r=ye(e),o=ye(t);return K(J("tween",{from:{scale:r||o},to:{scale:o||r},ease:U.easeInOutQuad}),n)};function ye(e){if(!e)return null;var t=e.dimensions,n=t.containerWidth,r=t.contentWidth,o=e.focusCount*t.lineHeight,i=t.containerHeight-2*Math.max(t.paddingBottom,t.paddingTop);return Math.min(i/o,1,.9*n/r)}function he(e){var t,r,o,i,a,s=e.dimensions,l=(r=e.stepPlayhead,o=(t=e.steps)[Math.floor(r)],i=t[Math.floor(r)+1],a=n.useMemo(function(){return new _(o,i)},[o,i]),new R(a,r%1));return n.createElement("div",{className:"cs-container",style:d({},D().container||{},{width:"100%",height:s?s.containerHeight:"100%",maxHeight:"100%",position:"relative"})},n.createElement(ve,{dimensions:s,ctx:l}),n.createElement(xe,{ctx:l.useSelect(function(e){return e.title})}),n.createElement(Ee,{ctx:l.useSelect(function(e){return e.subtitle})}))}var ge=[{animation:function(e,t,n){var r=ue(e,t).dimensions;return K(J(ie,{lineHeight:r&&r.lineHeight}),n)},when:function(e,t){return e&&!t},stagger:.2},{animation:function(e,t,n){var r=ue(e,t).dimensions;return K(J(le,{lineHeight:r&&r.lineHeight}),n)},when:function(e,t){return t&&!e},stagger:.2}];function ve(e){var t=e.dimensions,r=e.ctx,o=n.useRef(null),i=function(e,t){if(!e)return 0;for(var r=t.useSelectMany(function(e){return e.lines}),o=t.spread(),i=o[0],a=o[1],s=n.useMemo(function(){var e=r.map(function(e){return e.animate(function(e,t){return e})}),t=r.map(function(e){return e.animate(function(e,t){return t})}),n=i?i.focusCenter:0,o=a?a.focusCenter:0,s=i&&i.lines[Math.floor(n)],l=a&&a.lines[Math.floor(o)];return[i?e.indexOf(s)+n%1:0,a?t.indexOf(l)+o%1:0]},[i,a]),l=t.animate(de(s[0],s[1])),c=0,u=r.map(function(e){return e.animations(ge)}),p=0;p<=l-1;){var f=u[p].height;c+=null==f?e.lineHeight:f,p+=1}if(p!=l){var d=u[p].height;c+=(null==d?e.lineHeight:d)*(l-p)}return c}(t,r);n.useLayoutEffect(function(){null!=o.current&&(o.current.scrollTop=i)},[i]);var a=r.animate(me).scale,s=t?t.containerHeight/2+i:0,l=r.useSelectMany(function(e){return e.lines});return n.createElement("pre",{className:"cs-content",ref:o,style:d({},L(),{margin:0,height:"100%",overflow:"hidden"})},n.createElement("code",{className:"cs-scaled-content",style:d({},L(),{display:"block",height:t?t.contentHeight:"100%",width:t&&t.contentWidth,margin:t&&"0 "+(t.containerWidth-t.contentWidth)/2+"px",transform:"scale("+a+")",transformOrigin:"center "+s+"px"})},n.createElement("div",{style:{height:t&&t.containerHeight/2}}),l.map(function(e,t){return n.createElement(be,{ctx:e,key:t})}),n.createElement("div",{style:{height:t&&t.containerHeight/2}})))}function be(e){var t,r,o=e.ctx,i=o.animations([].concat(ge,[{animation:pe}])),a=o.animate(function(e,t){var n=e||t;return{lineTokens:n.tokens,key:n.key,focusPerToken:e&&e.focusPerToken||t&&t.focusPerToken}}),s=a.lineTokens,l=a.key,c=a.focusPerToken,u=(t=D(),r=n.useMemo(function(){var e=Object.create(null);return t.styles.forEach(function(t){var n=t.style;t.types.forEach(function(t){e[t]=Object.assign(e[t]||{},n)})}),e},[t]),n.useMemo(function(){return function(e){return r[e.type]||{}}},[r])),p=[],f=o.useSelectMany(function(e){return e.tokens});return p=c?f.map(function(e){return d({},e.animate(function(e,t){return e||t}),{animatedStyle:e.animate(fe)})}):s.map(function(e){return d({},e,{animatedStyle:{}})}),n.createElement("div",{style:d({overflow:"hidden"},i)},n.createElement("div",{style:{display:"inline-block"},className:"cs-line cs-line-"+l},p.map(function(e,t){return n.createElement("span",{key:t,style:d({},u(e),e.animatedStyle)},e.content)})))}function xe(e){var t=e.ctx,r=t.animate(ce),o=t.animate(we),i=t.animate(ke);return r?n.createElement("h4",{className:"cs-title",style:d({},Q(),o)},n.createElement("span",{style:i},r)):null}function Ee(e){var t=e.ctx,r=t.animate(ce),o=t.animate(we),i=t.animate(ke);return r?n.createElement("p",{className:"cs-subtitle",style:d({},z(),o)},n.createElement("span",{style:i},r)):null}var we=function(e,t,n){var r=1;return e||(r=n),t||(r=1-n),{opacity:r}},ke=function(e,t,n){return e&&t&&e.value!==t.value?function(e){return K(J(te,null),e)}(n):e?t?{opacity:1}:function(e){return K(J(ee,null),e)}(n):function(e){return K(J($,null),e)}(n)};function Se(e){var t=window.getComputedStyle(e),n=parseFloat(t.marginTop||"0")+parseFloat(t.marginBottom||"0");return e.offsetHeight+n}function je(e){var t=e.progress,r=e.steps,i=e.theme,s=function(e,t){var n,r,i=(n=function(e){var t=[];return e.forEach(function(e,n){t[n]="diff"===e.lang&&n>0?o.applyPatch(t[n-1],e.code):e.code}),t}(e).reverse(),r=function(e,t){for(var n=[],r=0;r<e.length;r++)k(n,e,r,t);return n}(n,t),n.map(function(e,t){return r.map(function(e,n){return{content:e.content,tokens:e.tokens,isNew:!e.slides.includes(t+1),show:e.slides.includes(t),key:n}}).filter(function(e){return e.show})})).reverse(),s=e.map(function(e,t){var n=i[t];try{return function(e,t){var n=e.focus,r=y(e,["focus"]),o=n?function(e){if(!e)throw new Error("Focus cannot be empty");try{var t=e.split(/,(?![^\[]*\])/g).map(S);return new Map(a(t))}catch(t){throw t.withFocusString?t.withFocusString(e):t}}(n):function(e){var t=e.map(function(e,t){return e.isNew?t:-1}).filter(function(e){return-1!==e});return new Map(t.map(function(e){return[e,!0]}))}(t),i=Array.from(o.keys()),s=Math.min.apply(Math,i),l=Math.max.apply(Math,i);return d({lines:t,focusMap:o,focusStart:s,focusEnd:l,focusCenter:(s+l+1)/2,focusCount:l-s+1},r)}(e,n)}catch(e){throw e.withStepIndex?e.withStepIndex(t):e}});return s.forEach(function(e){var t=e.focusMap;e.lines.forEach(function(e,n){e.focus=t.has(n);var r,o,i,a,s=t.get(n);e.focusPerToken=Array.isArray(s),Array.isArray(s)&&(r=e.tokens,o=Array.from(r),i=0,r.splice(0,r.length),o.forEach(function(e){Array.from(e.content).forEach(function(t){return r.push(d({},e,{content:t,key:i++}))})}),e.tokens=(a=s,e.tokens.map(function(e,t){return d({},e,{focus:a.includes(t)})})))})}),s}(r,r[0].lang||"javascript"),l=n.useRef(null),c=function(e,t){var r,o=n.useState(null),i=o[0],a=o[1];return r=function(){return a(null)},n.useEffect(function(){return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[a]),n.useLayoutEffect(function(){if(e.current&&!i){var n=e.current.querySelectorAll(".cs-container"),r=Array.from(n).map(function(e,n){return function(e,t){var n=function(e){return e&&0!==e.lines.length?e.lines.reduce(function(e,t){return e.content.length>t.content.length?e:t}):null}(t),r=e.querySelector(".cs-line-"+(n&&n.key)),o=e.parentElement,i=e.querySelector(".cs-title"),a=e.querySelector(".cs-subtitle"),s=t.lines.length,l=e.scrollHeight-(o.scrollHeight-o.clientHeight),c=r?r.clientHeight:0,u=i?Se(i):c,p=a?Se(a):c;return{lineHeight:c,contentHeight:s*c*2+l,contentWidth:r?r.clientWidth:0,paddingTop:u,paddingBottom:p,containerHeight:l,containerWidth:e.clientWidth}}(e,t[n])}),o=Math.max.apply(Math,r.map(function(e){return e.containerHeight})),s=Math.max.apply(Math,r.map(function(e){return e.containerWidth})),l=Math.max.apply(Math,r.map(function(e){return e.contentWidth})),c=Math.max.apply(Math,r.map(function(e){return e.lineHeight}));a({dimensions:{lineHeight:c,contentWidth:l,containerHeight:o,containerWidth:s},steps:t.map(function(e,t){return d({},e,{lines:e.lines.map(function(e){return d({},e,{dimensions:{lineHeight:r[t].lineHeight}})}),dimensions:{paddingTop:r[t].paddingTop,paddingBottom:r[t].paddingBottom,lineHeight:r[t].lineHeight,contentWidth:l,containerHeight:o,containerWidth:s}})})})}},[i]),i||{}}(l,s),u=c.dimensions;return n.createElement(T.Provider,{value:i},u?n.createElement("div",{style:{height:"100%",width:"100%",overflow:"auto"},ref:l},n.createElement(he,{steps:c.steps,stepPlayhead:t,dimensions:u})):n.createElement("div",{ref:l,style:{overflow:"auto",height:"100%",width:"100%"}},s.map(function(e,t){return n.createElement("div",{key:t,style:{overflow:"auto",height:"100%",width:"100%"}},n.createElement(he,{steps:s,stepPlayhead:t}))})))}function Ce(e){if(e.type===f){var t=Object.entries(e.props).map(function(e){var t,n=e[0],r=e[1];return(t={})[n]=["code","focus","lang"].includes(n)?r:{value:r},t});return Object.assign.apply(Object,[{}].concat(t))}if(!e.props.children||!e.props.children.props)return null;var n=e.props.children.props,r=n.className;return d({code:n.children,lang:r&&r[0].substring("language-".length)},function(e){if(!e)return{};var t=s.parse(e),n={};return t.forEach(function(e){if(e.includes("=")){var t=e.split(/=(.*)/);n[t[0]]={value:t[1]}}else n.focus=e}),n}(n.metastring))}var Me=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}m(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var r=t.prototype;return r.componentDidCatch=function(e,t){},r.render=function(){return this.state.error?this.state.error.element?this.state.error.element:(console.error(this.state.error),n.createElement(h,{error:this.state.error})):this.props.children},t}(n.Component);function qe(e){var t=r.useDeck();n.useEffect(function(){if(t&&t.register&&void 0!==t.index){var n=function(e){var t=e.map(function(e){if(!e)return null;var t=e.props;return t.inline?{inline:!0,text:t.children}:t&&t.children});return t.length&&(t[t.length-1]=(t[t.length-1]||"")+"\n"),t}(e);t.register(t.index,{notes:n})}},[])}function Oe(e){return null===e?"":"object"==typeof e?e.text+(e.inline?"":"\n"):e+"\n"}function Ie(e){var n=e.target,r=void 0===n?0:n,o=e.current,i=void 0===o?null:o,a=e.tension,s=void 0===a?0:a,c=e.friction,u=void 0===c?13:c,p=e.round,f=void 0===p?function(e){return e}:p,d=t.useState(null),m=d[0],y=d[1],h=t.useState(r),g=h[0],v=h[1];return t.useEffect(function(){var e={onSpringUpdate:function(e){var t=e.getCurrentValue();v(f(t))}};if(!m){var t=(new l.SpringSystem).createSpring(s,u);return t.setCurrentValue(r),y(t),void t.addListener(e)}return function(){m.removeListener(e),y(null)}},[s,u]),t.useEffect(function(){m&&(m.setEndValue(r),null!=i&&m.setCurrentValue(i))},[r,i]),g}function He(e){return Ie({target:function(e){var t=r.useSteps(e);return Infinity===t?0:t}(e-1),round:function(e){return Math.round(1e3*e)/1e3}})}function Ae(e){var t=e.children,o=r.useDeck(),i=n.useMemo(Ne(t),[o.index]);qe(i.map(function(e){return e.notesElement}));var a=He(i.length),s=r.useTheme();return n.createElement("div",{style:{width:"100vw",maxWidth:"100%",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},className:"cs-layout"},n.createElement(je,{steps:i,progress:a,theme:s.codeSurfer}))}var Ne=function(e){return function(){var t=n.Children.toArray(e);return t.map(function(e,n){var o=Ce(e);if(o){var i=t[n+1];return i&&i.type===r.Notes&&(o.notesElement=i),o}}).filter(function(e){return e})}};function We(e){var t=e.children,o=e.themes,i=void 0===o?[]:o,a=e.sizes,s=r.useDeck(),l=n.useMemo(function(){return function(e,t){void 0===t&&(t=[]);var o=[],i=n.Children.toArray(e);i.forEach(function(e,t){n.Children.toArray(e.props.children).filter(function(e){return e.type!==r.Notes}).forEach(function(e,n){o[n]=o[n]||{steps:[],isCode:!0};var r=Ce(e);o[n].isCode=o[n].isCode&&r,o[n].steps[t]=r||{element:e}})}),o.forEach(function(e,n){e.flex=t[n]||1});var a=i.map(function(e){return e.props.title}),s=i.map(function(e){return e.props.subtitle}),l=i.map(function(e){return n.Children.toArray(e.props.children).find(function(e){return e.type===r.Notes})});return[o,a,s,l]}(t,a)},[s.index]),c=l[0],u=l[1],p=l[2];qe(l[3]);var f=He(c[0].steps.length),d=Math.round(f),m=r.useTheme();return n.createElement("div",{style:{width:"100vw",maxWidth:"100%",height:"100vh",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",fontSize:"0.8em",position:"relative"},className:"cs-col-layout"},c.map(function(e,t){return n.createElement(Fe,{key:t,column:e,progress:f,theme:i[t]?i[t].codeSurfer:m.codeSurfer})}),n.createElement(T.Provider,{value:m.codeSurfer},n.createElement(Pe,{text:u[d]}),n.createElement(Te,{text:p[d]})))}function Fe(e){var t=e.column,r=e.progress;return n.createElement("div",{style:{flex:t.flex,overflow:"hidden",height:"100%"}},t.isCode?n.createElement(je,{steps:t.steps,progress:r,theme:e.theme}):t.steps[Math.round(r)].element)}function Pe(e){var t=e.text;return t?n.createElement("h4",{className:"cs-title",style:Q()},n.createElement("span",null,t)):null}function Te(e){var t=e.text;return t?n.createElement("p",{className:"cs-subtitle",style:d({},z(),{margin:"0.3em 0"})},n.createElement("span",null,t)):null}function De(){var e,t,n=(e=["\n          .ekm8v3h0,\n          .cs-layout,\n          cs-col-layout {\n            height: ","px !important;\n          }\n        "],t||(t=e.slice(0)),e.raw=t,e);return De=function(){return n},n}var Le=function(e){var t=e.index,r=e.children,o=y(e,["index","children"]),i=n.useRef(null),a=n.useState(0),s=a[1],l=Ie({target:a[0],friction:25});return n.useEffect(function(){var e=i.current,n=e.children[t+1],r=n.offsetTop-e.offsetTop,o=n.getBoundingClientRect().height,a=e.getBoundingClientRect().height;o&&s(r-a/2+o/2)},[t]),n.useLayoutEffect(function(){i.current.scrollTop=l},[l]),n.createElement("div",Object.assign({},o,{ref:i}),n.createElement("div",{style:{height:"50%"}}),r,n.createElement("div",{style:{height:"50%"}}))};function Qe(e){var t=e.context;return n.createElement("div",{style:e.style},e.slides.map(function(e,o){return n.createElement(r.Slide,{key:o,context:d({},t,{index:o}),index:o},n.createElement(e,null))}))}function ze(e){var t=e.allNotes,o=e.noteIndex,i=e.children,a=e.previous,s=e.next,l=e.slides,c=e.index,f=e.windowWidth/(16/9),d=window.innerHeight,m=d-f-6,y=r.useTheme().colors,h=100*(c+1)/l.length;return n.createElement("div",{className:"presenter",style:{display:"flex",flexDirection:"column",height:d,background:y.background,overflow:"hidden"}},n.createElement(u.Global,{styles:u.css(De(),f)}),n.createElement("div",{style:{height:f}},i),n.createElement("div",{style:{height:6,background:y.link,opacity:.7,boxShadow:"2px 2px 2px 1px rgba(0, 0, 0, 0.25)"}},n.createElement("div",{style:{height:"100%",width:100-h+"%",opacity:.5,float:"right",background:"#444"}})),n.createElement("div",{style:{height:m}},n.createElement(p.Swipeable,{onSwipedRight:a,onSwipedLeft:s,onSwipedDown:a,onSwipedUp:s,style:{height:"100%"}},n.createElement(Le,{index:o,style:{color:y.text,whiteSpace:"pre-wrap",overflow:"hidden",height:"100%",width:"90%",margin:"0px auto"},onClick:s},t.map(function(e,t){return n.createElement("span",{style:{opacity:o===t?1:.5},key:t},e.notes)})))))}function _e(e){var t=e.slides,o=e.index,i=e.allNotes,a=e.noteIndex;return n.createElement("div",{style:{color:"#fafafa",backgroundColor:"#222",display:"flex",height:"100vh",width:"100vw"}},n.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"}},n.createElement(r.Zoom,{zoom:5/8},e.children),n.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"0 16px",background:"#333"}},n.createElement("pre",null,"Slide ",o+1," of ",t.length),n.createElement(r.Clock,null)),n.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c.globalHistory.location.origin+c.globalHistory.location.pathname,style:{color:"#bbb",padding:"10px"}},"Open Slides in New Window")),n.createElement("div",{style:{height:"100%",boxSizing:"border-box"}},n.createElement(Le,{index:a,style:{color:"#FFFF33",whiteSpace:"pre-wrap",overflow:"hidden",height:"100%",width:"90%",margin:"5px auto"}},i.map(function(e,t){return n.createElement("span",{style:{opacity:a===t?1:.5},key:t},e.notes)}))))}var Be=function(e){var t,r,o,i=e.slides,a=e.metadata,s=e.index,l=e.step,c=e.children,u=e.previous,p=e.next,f=(r=(t=n.useState(window&&window.innerWidth))[0],n.useEffect(function(){var e=function(){return o(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[o=t[1]]),r),d=n.useState(!1),m=d[0],y=d[1];n.useEffect(function(){y(!0)},[]);var h=n.useMemo(function(){return i.flatMap(function(e,t){var n=(a[t]||{notes:""}).notes;return Array.isArray(n)?n.map(function(e,n){return{notes:Oe(e),slideIndex:t,stepIndex:n}}):{notes:Oe(n),slideIndex:t,stepIndex:"any"}})},[m]),g=h.findIndex(function(e){return e.slideIndex===s&&("any"===e.stepIndex||e.stepIndex===l)});return n.createElement(n.Fragment,null,!m&&n.createElement(Qe,{style:{display:"none"},context:e,slides:i}),f>700?n.createElement(_e,Object.assign({},{allNotes:h,index:s,slides:i,noteIndex:g,children:c})):n.createElement(ze,Object.assign({},{allNotes:h,index:s,slides:i,noteIndex:g,children:c,windowWidth:f,previous:u,next:p})))};function Re(e){var t=e.styles.find(function(e){return e.types.includes("string")}),n=e.pre.color,r=e.pre.background;return[{codeSurfer:e},{colors:{text:n,background:r,link:t&&t.style.color,pre:n,code:n,preBackground:r},Presenter:Be,codeSurfer:e}]}var Ve=Re(O),Ge=Ve[0],Ue=Ve[1],Xe=Re(H),Ye=Xe[0],Ze=Xe[1],Je=Re(I),Ke=Je[0],$e=Je[1],et=Re(q),tt=et[0],nt=et[1],rt=Re(A),ot=rt[0],it=rt[1],at=Re(N),st=at[0],lt=at[1],ct=Re(W),ut=ct[0],pt=ct[1],ft=Re(F),dt=ft[0],mt=ft[1],yt=Re(P),ht=yt[0],gt=yt[1];exports.Code=f,exports.CodeSurferColumnLayout=function(e){return n.createElement(Me,null,n.createElement(We,Object.assign({},e)))},exports.CodeSurferLayout=function(e){return n.createElement(Me,null,n.createElement(Ae,Object.assign({},e)))},exports.Step=function(){return null},exports.dracula=Ue,exports.draculaPartial=Ge,exports.duotoneDark=$e,exports.duotoneDarkPartial=Ke,exports.duotoneLight=Ze,exports.duotoneLightPartial=Ye,exports.github=nt,exports.githubPartial=tt,exports.nightOwl=it,exports.nightOwlPartial=ot,exports.oceanicNext=lt,exports.oceanicNextPartial=st,exports.shadesOfPurple=pt,exports.shadesOfPurplePartial=ut,exports.ultramin=mt,exports.ultraminPartial=dt,exports.vsDark=gt,exports.vsDarkPartial=ht;
//# sourceMappingURL=code-surfer.cjs.production.min.js.map
