{"version":3,"file":"code-surfer.esm.js","sources":["../src/code.js","../src/step.js","../src/standalone/errors.tsx","../src/standalone/tokenizer.ts","../src/standalone/differ.ts","../src/standalone/focus-parser.ts","../src/standalone/parse-steps.ts","../src/standalone/themes/utils.ts","../src/standalone/themes/github.ts","../src/standalone/themes/dracula.ts","../src/standalone/themes/duotone-dark.ts","../src/standalone/themes/duotone-light.ts","../src/standalone/themes/night-owl.ts","../src/standalone/themes/oceanic-next.ts","../src/standalone/themes/shades-of-purple.ts","../src/standalone/themes/ultramin.ts","../src/standalone/themes/vs-dark.ts","../src/standalone/theming.ts","../src/standalone/tuple.ts","../src/standalone/animation-context.ts","../src/standalone/playhead/easing.ts","../src/standalone/playhead/playhead.tsx","../src/standalone/animations.tsx","../src/standalone/frame.tsx","../src/standalone/use-window-resize.ts","../src/standalone/dimensions.ts","../src/standalone/code-surfer.tsx","../src/codeblock-metastring-parser.ts","../src/step-reader.js","../src/error-boundary.tsx","../src/notes.js","../src/use-steps.js","../src/use-spring.js","../src/use-step-spring.js","../src/layout.tsx","../src/column-layout.tsx","../src/presenter.tsx","../src/themes.ts"],"sourcesContent":["export default function Code() {\n  // We only use this to inspect the props from the element\n  return null;\n}\n","import React from \"react\";\n\nfunction Step() {\n  return null;\n}\n\nexport default Step;\n","import React from \"react\";\n\ntype UnknownErrorProps = {\n  error: { toString: () => string };\n};\n\nexport function UnknownError({ error }: UnknownErrorProps) {\n  // TODO link to create issue\n  return <ErrorBox header=\"Oops, there's a problem\" body={error.toString()} />;\n}\n\nexport function grammarNotFound({ lang }: { lang: string }) {\n  return {\n    element: (\n      <ErrorBox\n        header=\"Oops, there's a problem\"\n        body={\n          <React.Fragment>\n            Syntax highlighter for <Mark>\"{lang}\"</Mark> not found.\n            <p>\n              You can try importing it from prismjs with: <br />\n              <Mark>import \"prismjs/components/prism-{lang}\"</Mark>\n            </p>\n            (See{\" \"}\n            <a\n              href=\"https://prismjs.com/#supported-languages\"\n              style={{ color: \"grey\" }}\n            >\n              all the supported languages\n            </a>\n            )\n          </React.Fragment>\n        }\n      />\n    )\n  };\n}\n\nexport function invalidFocusNumber(n: string) {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                <Mark>\"{n}\"</Mark> isn't a valid number{\" \"}\n                {n != focusString && <Mark> (in \"{focusString}\")</Mark>}\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\nexport function invalidLineOrColumnNumber() {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                Are you using \"0\" as a line or column number{\" \"}\n                <Mark>in \"{focusString}\"</Mark>?\n                <br />\n                (Line and column numbers should start at 1, not 0) <br />\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\ntype ErrorBoxProps = {\n  header: React.ReactNode;\n  body: React.ReactNode;\n};\n\nfunction ErrorBox({ header, body }: ErrorBoxProps) {\n  return (\n    <div\n      style={{\n        background: \"#290000\",\n        color: \"#b96f70\",\n        border: \"2px solid #b96f70\",\n        padding: \"10px 30px\",\n        maxWidth: \"90vw\",\n        margin: \"0 auto\",\n        fontFamily: \"monospace\",\n        fontSize: \"1rem\"\n      }}\n    >\n      <h3>{header}</h3>\n      <p>{body}</p>\n    </div>\n  );\n}\n\nfunction StepErrorHeader({ stepIndex }: { stepIndex: number }) {\n  return (\n    <React.Fragment>\n      Oops, there's a problem with the{\" \"}\n      <Mark>\n        {stepIndex + 1}\n        <sup>{ordinal(stepIndex + 1)}</sup> step\n      </Mark>\n    </React.Fragment>\n  );\n}\n\nfunction Mark({ children }: { children: React.ReactNode }) {\n  return (\n    <mark style={{ background: \"none\", color: \"pink\", fontWeight: \"bolder\" }}>\n      {children}\n    </mark>\n  );\n}\n\nfunction ordinal(i: number) {\n  var j = i % 10,\n    k = i % 100;\n  if (j == 1 && k != 11) {\n    return \"st\";\n  }\n  if (j == 2 && k != 12) {\n    return \"nd\";\n  }\n  if (j == 3 && k != 13) {\n    return \"rd\";\n  }\n  return \"th\";\n}\n","import { grammarNotFound } from \"./errors\";\n\n// // https://github.com/PrismJS/prism/issues/1303#issuecomment-375353987\n// global.Prism = { disableWorkerMessageHandler: true };\n// const Prism = require(\"prismjs\");\nimport Prism from \"prismjs\";\n\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\ntype NestedToken = {\n  type: string;\n  content: string | NestedToken[];\n};\n\ntype FlatToken = {\n  type: string;\n  content: string;\n};\n\n// Take a list of nested tokens\n// (token.content may contain an array of tokens)\n// and flatten it so content is always a string\n// and type the type of the leaf\nfunction flattenTokens(tokens: NestedToken[]) {\n  const flatList: FlatToken[] = [];\n  tokens.forEach(token => {\n    const { type, content } = token;\n    if (Array.isArray(content)) {\n      flatList.push(...flattenTokens(content));\n    } else {\n      flatList.push({ type, content });\n    }\n  });\n  return flatList;\n}\n\nfunction wrapToken(\n  prismToken: string | Prism.Token,\n  parentType = \"plain\"\n): NestedToken {\n  if (typeof prismToken === \"string\") {\n    return {\n      type: parentType,\n      content: prismToken\n    };\n  }\n\n  if (Array.isArray(prismToken.content)) {\n    return {\n      type: prismToken.type,\n      content: tokenizeStrings(prismToken.content, prismToken.type)\n    };\n  }\n\n  return wrapToken(prismToken.content, prismToken.type);\n}\n\n// Wrap strings in tokens\nfunction tokenizeStrings(\n  prismTokens: (string | Prism.Token)[],\n  parentType = \"plain\"\n): NestedToken[] {\n  return prismTokens.map(prismToken => wrapToken(prismToken, parentType));\n}\n\nexport default function tokenize(code: string, language = \"javascript\") {\n  const grammar = Prism.languages[language];\n  if (!grammar) {\n    throw grammarNotFound({ lang: language });\n  }\n  const prismTokens = Prism.tokenize(code, Prism.languages[language]);\n  const nestedTokens = tokenizeStrings(prismTokens);\n  const tokens = flattenTokens(nestedTokens);\n\n  let currentLine: FlatToken[] = [];\n  const lines = [currentLine];\n  tokens.forEach(token => {\n    const contentLines = token.content.split(newlineRe);\n\n    const firstContent = contentLines.shift();\n    if (firstContent !== undefined && firstContent !== \"\") {\n      currentLine.push({ type: token.type, content: firstContent });\n    }\n    contentLines.forEach(content => {\n      currentLine = [];\n      lines.push(currentLine);\n      if (content !== \"\") {\n        currentLine.push({ type: token.type, content });\n      }\n    });\n  });\n  return lines;\n}\n","import { diffLines, applyPatch } from \"diff\";\nimport tokenize from \"./tokenizer\";\nimport { InputStep } from \"code-surfer-types\";\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\nfunction myDiff(oldCode: string, newCode: string) {\n  const changes = diffLines(oldCode || \"\", newCode);\n\n  let oldIndex = -1;\n  return changes.map(({ value, count, removed, added }) => {\n    const lines = value.split(newlineRe);\n    // check if last line is empty, if it is, remove it\n    const lastLine = lines.pop();\n    if (lastLine) {\n      lines.push(lastLine);\n    }\n    const result = {\n      oldIndex,\n      lines,\n      count,\n      removed,\n      added\n    };\n    if (!added) {\n      oldIndex += count || 0;\n    }\n    return result;\n  });\n}\n\nfunction insert<T>(array: T[], index: number, elements: T[]) {\n  return array.splice(index, 0, ...elements);\n}\n\ntype Line = {\n  content: string;\n  slides: number[];\n  tokens: { type: string; content: string }[];\n};\n\nfunction slideDiff(\n  lines: Line[],\n  codes: string[],\n  slideIndex: number,\n  language: string\n) {\n  const prevLines = lines.filter(l => l.slides.includes(slideIndex - 1));\n  const prevCode = codes[slideIndex - 1] || \"\";\n  const currCode = codes[slideIndex];\n\n  const changes = myDiff(prevCode, currCode);\n\n  changes.forEach(change => {\n    if (change.added) {\n      const prevLine = prevLines[change.oldIndex];\n      const addAtIndex = lines.indexOf(prevLine) + 1;\n      const addLines = change.lines.map(content => ({\n        content,\n        slides: [slideIndex],\n        tokens: []\n      }));\n      insert(lines, addAtIndex, addLines);\n    } else if (!change.removed) {\n      for (let j = 1; j <= (change.count || 0); j++) {\n        prevLines[change.oldIndex + j].slides.push(slideIndex);\n      }\n    }\n  });\n\n  const tokenLines = tokenize(currCode, language);\n  const currLines = lines.filter(l => l.slides.includes(slideIndex));\n  currLines.forEach((line, index) => (line.tokens = tokenLines[index]));\n}\n\nexport function parseLines(codes: string[], language: string) {\n  const lines: Line[] = [];\n  for (let slideIndex = 0; slideIndex < codes.length; slideIndex++) {\n    slideDiff(lines, codes, slideIndex, language);\n  }\n  return lines;\n}\n\nexport function getSlides(codes: string[], language: string) {\n  // codes are in reverse cronological order\n  const lines = parseLines(codes, language);\n  // console.log(\"lines\", lines);\n  return codes.map((_, slideIndex) => {\n    return lines\n      .map((line, lineIndex) => ({\n        content: line.content,\n        tokens: line.tokens,\n        isNew: !line.slides.includes(slideIndex + 1),\n        show: line.slides.includes(slideIndex),\n        key: lineIndex\n      }))\n      .filter(line => line.show);\n  });\n}\n\nexport function getCodes(rawSteps: InputStep[]) {\n  const codes: string[] = [];\n\n  rawSteps.forEach((s, i) => {\n    if (s.lang === \"diff\" && i > 0) {\n      codes[i] = applyPatch(codes[i - 1], s.code);\n    } else {\n      codes[i] = s.code;\n    }\n  });\n\n  return codes;\n}\n","import flat from \"array.prototype.flat\";\nimport * as errors from \"./errors\";\n\ntype LineIndex = number;\ntype ColumnIndex = number;\n\nexport function parseFocus(focus: string) {\n  if (!focus) {\n    throw new Error(\"Focus cannot be empty\");\n  }\n\n  try {\n    const parts = focus.split(/,(?![^\\[]*\\])/g).map(parsePart);\n\n    return new Map<LineIndex, boolean | ColumnIndex[]>(flat(parts));\n  } catch (error) {\n    if (error.withFocusString) {\n      throw error.withFocusString(focus);\n    } else {\n      throw error;\n    }\n  }\n}\n\nfunction parsePart(part: string) {\n  // a part could be\n  // - a line number: \"2\"\n  // - a line range: \"5:9\"\n  // - a line number with a column selector: \"2[1,3:5,9]\"\n  const columnsMatch = part.match(/(\\d+)\\[(.+)\\]/);\n  if (columnsMatch) {\n    const [, line, columns] = columnsMatch;\n    const columnsList = columns.split(\",\").map(expandString);\n    const lineIndex = Number(line) - 1;\n    const columnIndexes = flat(columnsList).map(c => c - 1);\n    return [[lineIndex, columnIndexes]];\n  } else {\n    return expandString(part).map(lineNumber => [lineNumber - 1, true]);\n  }\n}\n\nfunction expandString(part: string) {\n  // Transforms something like\n  // - \"1:3\" to [1,2,3]\n  // - \"4\" to [4]\n  const [start, end] = part.split(\":\");\n\n  // todo check if start is 0, line numbers and column numbers start at 1\n\n  if (!isNaturalNumber(start)) {\n    throw errors.invalidFocusNumber(start);\n  }\n\n  const startNumber = Number(start);\n\n  if (startNumber < 1) {\n    throw errors.invalidLineOrColumnNumber();\n  }\n\n  if (!end) {\n    return [startNumber];\n  } else {\n    if (!isNaturalNumber(end)) {\n      throw errors.invalidFocusNumber(end);\n    }\n\n    const list: number[] = [];\n    for (let i = startNumber; i <= +end; i++) {\n      list.push(i);\n    }\n    return list;\n  }\n}\n\nfunction isNaturalNumber(n: any) {\n  n = n.toString(); // force the value in case it is not\n  var n1 = Math.abs(n),\n    n2 = parseInt(n, 10);\n  return !isNaN(n1) && n2 === n1 && n1.toString() === n;\n}\n","import { getSlides, getCodes } from \"./differ\";\nimport { parseFocus } from \"./focus-parser\";\nimport { InputStep, Step } from \"code-surfer-types\";\n\ntype Token = { type: string; content: string; key?: number; focus?: boolean };\n\ntype Line = {\n  content: string;\n  tokens: Token[];\n  isNew: boolean;\n  show: boolean;\n  key: number;\n  focus?: boolean;\n  focusPerToken?: boolean;\n};\n\nexport function parseSteps(rawSteps: InputStep[], lang: string): Step[] {\n  const codes = getCodes(rawSteps);\n\n  const stepsLines = getSlides(codes.reverse(), lang).reverse();\n  const steps = rawSteps.map((step, i) => {\n    const lines = stepsLines[i];\n    try {\n      return parseStep(step, lines);\n    } catch (e) {\n      if (e.withStepIndex) {\n        throw e.withStepIndex(i);\n      } else {\n        throw e;\n      }\n    }\n  });\n\n  steps.forEach(step => {\n    const { lines, focusMap } = step;\n    lines.forEach((line, index) => {\n      line.focus = focusMap.has(index);\n      const columnFocus = focusMap.get(index);\n      line.focusPerToken = Array.isArray(columnFocus);\n      if (Array.isArray(columnFocus)) {\n        // this mutates the tokens array in order to change it to the same line in other steps\n        splitTokensToColumns(line.tokens);\n        line.tokens = setTokenFocus(line.tokens, columnFocus);\n      }\n    });\n  });\n\n  return steps;\n}\n\nfunction parseStep(step: InputStep, lines: Line[]) {\n  const { focus, ...rest } = step;\n  let focusMap = focus ? parseFocus(focus) : getDefaultFocus(lines);\n\n  const focusIndexes: number[] = Array.from(focusMap.keys());\n  const focusStart = Math.min.apply(Math, focusIndexes);\n  const focusEnd = Math.max.apply(Math, focusIndexes);\n\n  return {\n    lines,\n    focusMap,\n    focusStart,\n    focusEnd,\n    focusCenter: (focusStart + focusEnd + 1) / 2,\n    focusCount: focusEnd - focusStart + 1,\n    ...rest\n  };\n}\n\nfunction getDefaultFocus(lines: Line[]) {\n  const indexes = lines\n    .map((line, index) => (line.isNew ? index : -1))\n    .filter(index => index !== -1);\n  return new Map<number, boolean | number[]>(indexes.map(i => [i, true]));\n}\n\nfunction splitTokensToColumns(tokenArray: Token[]) {\n  const tokens = Array.from(tokenArray);\n  let key = 0;\n  tokenArray.splice(0, tokenArray.length);\n  tokens.forEach(token => {\n    const chars = Array.from(token.content);\n    chars.forEach(char =>\n      tokenArray.push({ ...token, content: char, key: key++ })\n    );\n  });\n}\n\nfunction setTokenFocus(tokens: Token[], focusColumns: number[]) {\n  // Assumes that tokens are already splitted in columns\n  // Return new token objects to avoid changing other steps tokens\n  return tokens.map((token, i) => ({\n    ...token,\n    focus: focusColumns.includes(i)\n  }));\n}\n","import { StyleItem, CodeSurferTheme } from \"code-surfer-types\";\n\ntype PrismTheme = {\n  plain: { color: string; backgroundColor: string };\n  styles: StyleItem[];\n};\n\nexport function makeTheme(\n  prismTheme: PrismTheme,\n  override: Partial<CodeSurferTheme> = {}\n): CodeSurferTheme {\n  return {\n    styles: prismTheme.styles,\n    title: {\n      background: prismTheme.plain.backgroundColor\n    },\n    subtitle: {\n      color: \"#d6deeb\",\n      background: \"rgba(10,10,10,0.9)\"\n    },\n    pre: {\n      color: prismTheme.plain.color,\n      background: prismTheme.plain.backgroundColor\n    },\n    code: {\n      color: prismTheme.plain.color,\n      background: prismTheme.plain.backgroundColor\n    },\n    ...override\n  };\n}\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#393A34\",\n    backgroundColor: \"#f6f8fa\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: \"#999988\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"string\", \"attr-value\"],\n      style: {\n        color: \"#e3116c\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"#393A34\"\n      }\n    },\n    {\n      types: [\n        \"entity\",\n        \"url\",\n        \"symbol\",\n        \"number\",\n        \"boolean\",\n        \"variable\",\n        \"constant\",\n        \"property\",\n        \"regex\",\n        \"inserted\"\n      ],\n      style: {\n        color: \"#36acaa\"\n      }\n    },\n    {\n      types: [\"atrule\", \"keyword\", \"attr-name\", \"selector\"],\n      style: {\n        color: \"#00a4db\"\n      }\n    },\n    {\n      types: [\"function\", \"deleted\", \"tag\"],\n      style: {\n        color: \"#d73a49\"\n      }\n    },\n    {\n      types: [\"function-variable\"],\n      style: {\n        color: \"#6f42c1\"\n      }\n    },\n    {\n      types: [\"tag\", \"selector\"],\n      style: {\n        color: \"#00009f\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#F8F8F2\",\n    backgroundColor: \"#282A36\"\n  },\n  styles: [\n    {\n      types: [\"prolog\", \"constant\", \"builtin\"],\n      style: {\n        color: \"rgb(189, 147, 249)\"\n      }\n    },\n    {\n      types: [\"inserted\", \"function\"],\n      style: {\n        color: \"rgb(80, 250, 123)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgb(255, 85, 85)\"\n      }\n    },\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 184, 108)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"symbol\"],\n      style: {\n        color: \"rgb(248, 248, 242)\"\n      }\n    },\n    {\n      types: [\"string\", \"char\", \"tag\", \"selector\"],\n      style: {\n        color: \"rgb(255, 121, 198)\"\n      }\n    },\n    {\n      types: [\"keyword\", \"variable\"],\n      style: {\n        color: \"rgb(189, 147, 249)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(98, 114, 164)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(241, 250, 140)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#2a2734\",\n    color: \"#9a86fd\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#6c6783\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#e09142\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#9a86fd\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#eeebff\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\",\n        \"placeholder\",\n        \"variable\"\n      ],\n      style: {\n        color: \"#ffcc99\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#faf8f5\",\n    color: \"#728fcb\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#b6ad9a\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#063289\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#b29762\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#2d2006\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#896724\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\"\n      ],\n      style: {\n        color: \"#728fcb\"\n      }\n    },\n    {\n      types: [\"placeholder\", \"variable\"],\n      style: {\n        color: \"#93abdc\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#896724\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#d6deeb\",\n    backgroundColor: \"#011627\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(162, 191, 252)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"inserted\", \"attr-name\"],\n      style: {\n        color: \"rgb(173, 219, 103)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(99, 119, 119)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(214, 222, 235)\"\n      }\n    },\n    {\n      types: [\"number\"],\n      style: {\n        color: \"rgb(247, 140, 108)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\"],\n      style: {\n        color: \"rgb(130, 170, 255)\"\n      }\n    },\n    {\n      // This was manually added after the auto-generation\n      // so that punctuations are not italicised\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(199, 146, 234)\"\n      }\n    },\n    {\n      types: [\"selector\", \"doctype\"],\n      style: {\n        color: \"rgb(199, 146, 234)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(255, 203, 139)\"\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"keyword\"],\n      style: {\n        color: \"rgb(127, 219, 202)\"\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: \"rgb(255, 88, 116)\"\n      }\n    },\n    {\n      types: [\"property\"],\n      style: {\n        color: \"rgb(128, 203, 196)\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        color: \"rgb(178, 204, 214)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme, {\n  title: { background: \"rgba(1, 22, 39, 0.8)\" }\n});\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst colors = {\n  char: \"#D8DEE9\",\n  comment: \"#999999\",\n  keyword: \"#c5a5c5\",\n  primitive: \"#5a9bcf\",\n  string: \"#8dc891\",\n  variable: \"#d7deea\",\n  boolean: \"#ff8b50\",\n  punctuation: \"#5FB3B3\",\n  tag: \"#fc929e\",\n  function: \"#79b6f2\",\n  className: \"#FAC863\",\n  method: \"#6699CC\",\n  operator: \"#fc929e\"\n};\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#282c34\",\n    color: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"attr-value\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"comment\", \"block-comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: colors.comment\n      }\n    },\n    {\n      types: [\n        \"property\",\n        \"number\",\n        \"function-name\",\n        \"constant\",\n        \"symbol\",\n        \"deleted\"\n      ],\n      style: {\n        color: colors.primitive\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: colors.boolean\n      }\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: colors.tag\n      }\n    },\n    {\n      types: [\"string\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"selector\", \"char\", \"builtin\", \"inserted\"],\n      style: {\n        color: colors.char\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: colors.function\n      }\n    },\n    {\n      types: [\"operator\", \"entity\", \"url\", \"variable\"],\n      style: {\n        color: colors.variable\n      }\n    },\n    {\n      types: [\"keyword\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"at-rule\", \"class-name\"],\n      style: {\n        color: colors.className\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        fontWeight: 400\n      }\n    },\n    {\n      types: [\"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\" as \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9EFEFF\",\n    backgroundColor: \"#2D2A55\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(179, 98, 255)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(255, 255, 255)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(165, 255, 144)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"number\", \"boolean\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(255, 180, 84)\"\n      }\n    },\n    {\n      types: [\n        \"keyword\",\n        \"operator\",\n        \"property\",\n        \"namespace\",\n        \"tag\",\n        \"selector\",\n        \"doctype\"\n      ],\n      style: {\n        color: \"rgb(255, 157, 0)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\", \"class-name\"],\n      style: {\n        color: \"rgb(250, 208, 0)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#282a2e\",\n    backgroundColor: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(197, 200, 198)\"\n      }\n    },\n    {\n      types: [\"string\", \"number\", \"builtin\", \"variable\"],\n      style: {\n        color: \"rgb(150, 152, 150)\"\n      }\n    },\n    {\n      types: [\"class-name\", \"function\", \"tag\", \"attr-name\"],\n      style: {\n        color: \"rgb(40, 42, 46)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9CDCFE\",\n    backgroundColor: \"#1E1E1E\"\n  },\n  styles: [\n    {\n      types: [\"prolog\"],\n      style: {\n        color: \"rgb(0, 0, 128)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(106, 153, 85)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"changed\", \"keyword\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"number\", \"inserted\"],\n      style: {\n        color: \"rgb(181, 206, 168)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(100, 102, 149)\"\n      }\n    },\n    {\n      types: [\"attr-name\", \"variable\"],\n      style: {\n        color: \"rgb(156, 220, 254)\"\n      }\n    },\n    {\n      types: [\"deleted\", \"string\", \"attr-value\"],\n      style: {\n        color: \"rgb(206, 145, 120)\"\n      }\n    },\n    {\n      types: [\"selector\"],\n      style: {\n        color: \"rgb(215, 186, 125)\"\n      }\n    },\n    {\n      // Fix tag color\n      types: [\"tag\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      // Fix tag color for HTML\n      types: [\"tag\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"rgb(212, 212, 212)\"\n      }\n    },\n    {\n      // Fix punctuation color for HTML\n      types: [\"punctuation\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"#808080\"\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: \"rgb(220, 220, 170)\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      types: [\"char\"],\n      style: {\n        color: \"rgb(209, 105, 105)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import React from \"react\";\n\nimport { default as base } from \"./themes\";\nimport { CodeSurferTheme, Token } from \"code-surfer-types\";\n\nexport const ThemeContext = React.createContext<CodeSurferTheme | null>(null);\n\nfunction useSafeTheme() {\n  const contextTheme = React.useContext(ThemeContext);\n\n  const theme = contextTheme || base;\n\n  return theme;\n}\n\nfunction useTokenStyles() {\n  const theme = useSafeTheme();\n\n  const themeStylesByType = React.useMemo(() => {\n    const themeStylesByType: {\n      [type: string]: React.CSSProperties;\n    } = Object.create(null);\n\n    const styles = theme.styles;\n    styles.forEach(({ types, style }) => {\n      types.forEach(type => {\n        themeStylesByType[type] = Object.assign(\n          themeStylesByType[type] || {},\n          style\n        );\n      });\n    });\n    return themeStylesByType;\n  }, [theme]);\n\n  const getStyleForToken = React.useMemo(\n    () => (token: Token) => {\n      return themeStylesByType[token.type] || {};\n    },\n    [themeStylesByType]\n  );\n\n  return getStyleForToken;\n}\n\nfunction usePreStyle() {\n  const theme = useSafeTheme();\n  return theme.pre || {};\n}\nfunction useCodeStyle() {\n  const theme = useSafeTheme();\n  return theme.code || {};\n}\n\nfunction useContainerStyle() {\n  const theme = useSafeTheme();\n  return theme.container || {};\n}\n\nfunction useTitleStyle() {\n  const theme = useSafeTheme();\n  const base = {\n    position: \"absolute\" as \"absolute\",\n    top: 0,\n    width: \"100%\",\n    margin: 0,\n    padding: \"1em 0\"\n  };\n  const style = theme.title || {};\n  return { ...base, ...style };\n}\n\nfunction useSubtitleStyle() {\n  const theme = useSafeTheme();\n  const base = {\n    position: \"absolute\" as \"absolute\",\n    bottom: 0,\n    width: \"calc(100% - 2em)\",\n    boxSizing: \"border-box\" as \"border-box\",\n    margin: \"0.3em 1em\",\n    padding: \"0.5em\",\n    background: \"rgba(2,2,2,0.9)\"\n  };\n  const style = theme.subtitle || {};\n  return { ...base, ...style };\n}\n\nexport {\n  useTokenStyles,\n  usePreStyle,\n  useCodeStyle,\n  useContainerStyle,\n  useSubtitleStyle,\n  useTitleStyle\n};\n","export class Tuple<T> {\n  prev: Maybe<T>;\n  next: Maybe<T>;\n\n  constructor(prev: Maybe<T>, next: Maybe<T>) {\n    this.prev = prev;\n    this.next = next;\n  }\n\n  spread(): [Maybe<T>, Maybe<T>] {\n    const prev = this.prev;\n    const next = this.next;\n    return [prev, next];\n  }\n\n  select<S>(selector: (x: T) => S) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new Tuple(newPrev, newNext);\n  }\n\n  selectMany<S extends { key?: any }>(selector: (x: T) => S[]) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new ArrayTuple(newPrev, newNext);\n  }\n\n  get(_key: any) {\n    throw Error(\"Get only supported in ArrayTuple\");\n  }\n\n  map(_mapper: any) {\n    throw Error(\"Map only supported in ArrayTuple\");\n  }\n}\n\nexport class ArrayTuple<T extends { key?: any }> extends Tuple<T[]> {\n  _dict?: Map<any, Tuple<T>>;\n\n  _getChildrenMap() {\n    if (!this._dict) {\n      const [maybePrevs, maybeNexts] = this.spread();\n      const prevs: T[] = maybePrevs || [];\n      const nexts: T[] = maybeNexts || [];\n\n      const unsortedMap = new Map<any, { prev: Maybe<T>; next?: Maybe<T> }>(\n        prevs.map(prev => [prev.key, { prev }])\n      );\n      nexts.forEach(next => {\n        const { prev } = unsortedMap.get(next.key) || { prev: undefined };\n        unsortedMap.set(next.key, { prev, next });\n      });\n\n      const sortedKeys = Array.from(unsortedMap.keys());\n      sortedKeys.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0));\n      this._dict = new Map<any, Tuple<T>>(\n        sortedKeys.map(key => {\n          const { prev = undefined, next = undefined } =\n            unsortedMap.get(key) || {};\n          return [key, new Tuple(prev, next)];\n        })\n      );\n    }\n    return this._dict;\n  }\n\n  get(key: any) {\n    const childrenMap = this._getChildrenMap();\n    return childrenMap.get(key);\n  }\n\n  map<M>(mapper: (t: Tuple<T>, key?: any, self?: ArrayTuple<T>) => M) {\n    const childrenMap = this._getChildrenMap();\n    const result: M[] = [];\n    childrenMap.forEach((tuple, key) => result.push(mapper(tuple, key, this)));\n    return result;\n  }\n}\n","import React from \"react\";\nimport { Tuple, ArrayTuple } from \"./tuple\";\nimport { AnimationAndConfig, AnimationConfig, Animation } from \"playhead-types\";\n\nexport class Context<T> {\n  tuple: Tuple<T>;\n  t: number;\n  parent: ListContext<T> | undefined;\n\n  constructor(tuple: Tuple<T>, t: number, parent?: ListContext<T>) {\n    this.tuple = tuple;\n    this.t = t;\n    this.parent = parent;\n  }\n\n  useSelect<S>(selector: (x: T) => S) {\n    const newTuple = React.useMemo(() => this.tuple.select(selector), [\n      this.tuple\n    ]);\n    return new Context(newTuple, this.t);\n  }\n\n  useSelectMany<S extends { key?: any }>(\n    selector: (x: T) => S[]\n  ): ListContext<S> {\n    const newTuple = React.useMemo(() => this.tuple.selectMany(selector), [\n      this.tuple\n    ]);\n\n    return new ListContext(newTuple, this.t);\n  }\n\n  spread() {\n    return this.tuple.spread();\n  }\n\n  animate<R>(animation: Animation<T, R>, config = {} as AnimationConfig<T>): R {\n    const [prev, next] = this.tuple.spread();\n\n    if (config.when && !config.when(prev, next)) {\n      return {} as R;\n    }\n\n    let staggeredT = this.t;\n\n    if (config.stagger) {\n      if (!this.parent) {\n        throw Error(\"Can't use stagger without a parent context\");\n      }\n\n      const items = this.parent\n        .map(childCtx => {\n          const [prevChild, nextChild] = childCtx.spread();\n          return {\n            isSelected: !config.when || config.when(prevChild, nextChild),\n            isThisChild: prevChild === prev && nextChild === next\n          };\n        })\n        .filter(x => x.isSelected);\n\n      const N = items.length;\n      if (N > 1) {\n        const currentIndex = items.findIndex(x => x.isThisChild);\n        const duration = 1 - config.stagger;\n        const tick = config.stagger / (N - 1);\n        staggeredT = Math.min(\n          1,\n          Math.max(0, (this.t - currentIndex * tick) / duration)\n        );\n      }\n    }\n\n    return animation(prev, next, staggeredT);\n  }\n\n  animations<R>(animations: AnimationAndConfig<T, R>[]) {\n    const results = animations.map(({ animation, ...config }) =>\n      this.animate(animation, config)\n    );\n    return merge(results);\n  }\n}\n\nexport class ListContext<T extends { key?: any }> extends Context<T[]> {\n  tuple: ArrayTuple<T>;\n\n  constructor(tuple: ArrayTuple<T>, t: number) {\n    super(tuple, t);\n    this.tuple = tuple;\n  }\n\n  map<M>(mapper: (childCtx: Context<T>, key: any) => M): M[] {\n    return this.tuple.map((childTuple: Tuple<T>, key: any) =>\n      mapper(new Context(childTuple, this.t, this), key)\n    );\n  }\n}\n\nexport function useAnimationContext<T>(items: T[], playhead: number) {\n  const prev = items[Math.floor(playhead)];\n  const next = items[Math.floor(playhead) + 1];\n  const tuple = React.useMemo(() => new Tuple(prev, next), [prev, next]);\n  return new Context(tuple, playhead % 1);\n}\n\nconst MULTIPLY = \"multiply\";\n\ntype MergeableObjects<T> = T[];\ntype MergeableArrays<T> = MergeableObjects<T>[];\ntype Mergeable<T> = MergeableObjects<T> | MergeableArrays<T>;\n\nfunction merge<T>(results: Mergeable<T>, composite = MULTIPLY) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return mergeArrays(results as MergeableArrays<T>, composite);\n  } else {\n    return mergeObjects(results as MergeableObjects<T>, composite);\n  }\n}\n\nfunction mergeObjects<T extends { opacity?: number }>(\n  results: MergeableObjects<T>,\n  composite: string\n) {\n  const merged = Object.assign({}, ...results) as T;\n\n  if (composite === MULTIPLY) {\n    const opacities = results\n      .map(x => x.opacity)\n      .filter(x => x != null) as number[];\n    if (opacities.length !== 0) {\n      merged.opacity = opacities.reduce((a, b) => a * b);\n    }\n  }\n  return merged;\n}\n\nfunction mergeArrays<T>(results: MergeableArrays<T>, composite: string): T[] {\n  const firstResult = results[0];\n  return firstResult.map((_, i) => {\n    return merge(results.map(result => result[i]), composite) as T;\n  });\n}\n","export default {\n  // no easing, no acceleration\n  linear: function(t: number) {\n    return t;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function(t: number) {\n    return t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function(t: number) {\n    return t * (2 - t);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function(t: number) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  // accelerating from zero velocity\n  easeInCubic: function(t: number) {\n    return t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutCubic: function(t: number) {\n    return --t * t * t + 1;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function(t: number) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  // accelerating from zero velocity\n  easeInQuart: function(t: number) {\n    return t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuart: function(t: number) {\n    return 1 - --t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function(t: number) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function(t: number) {\n    return t * t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function(t: number) {\n    return 1 + --t * t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function(t: number) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  }\n};\n","/* @jsx createAnimation */\nimport easing from \"./easing\";\nconst MULTIPLY = \"multiply\";\n\ndeclare global {\n  namespace createAnimation.JSX {\n    interface IntrinsicElements {\n      tween;\n      chain;\n      step;\n      delay;\n      parallel;\n    }\n  }\n}\n\n/* eslint-disable */\nfunction mergeResults(results, composite = null) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return firstResult.map((_, i) => {\n      return mergeResults(results.map(result => result[i]), composite);\n    });\n  } else {\n    const merged = Object.assign({}, ...results);\n\n    if (composite === MULTIPLY) {\n      const opacities = results.map(x => x.opacity).filter(x => x != null);\n      if (opacities.length !== 0) {\n        merged.opacity = opacities.reduce((a, b) => a * b);\n      }\n    }\n    return merged;\n  }\n}\n\nconst playhead = {\n  always: (props, context) => t => {\n    return props.value;\n  },\n  step: (props, context) => t => {\n    const { from, to } = props;\n    return t < 0.5 ? from : to;\n  },\n  tween: (props, context) => t => {\n    const { from, to, ease = easing.linear } = props;\n\n    const style = {};\n    Object.keys(from).forEach(key => {\n      const value = from[key] + (to[key] - from[key]) * ease(t);\n      if (key === \"x\") {\n        style[\"transform\"] = `translateX(${value}px)`;\n      } else {\n        style[key] = value;\n      }\n    });\n\n    return style;\n  },\n  chain: ({ children: fns, durations }, ctx) => {\n    return (t, ...args) => {\n      let style = run(fns[0], 0, ctx);\n      let lowerDuration = 0;\n      for (let i = 0; i < fns.length; i++) {\n        const fn = fns[i];\n        const thisDuration = durations[i];\n        const upperDuration = lowerDuration + thisDuration;\n        if (lowerDuration <= t && t <= upperDuration) {\n          const innerT = (t - lowerDuration) / thisDuration;\n          style = mergeResults([style, run(fn, innerT, ctx)]);\n        } else if (upperDuration < t) {\n          // merge the end of previous animation\n          style = mergeResults([style, run(fn, 1, ctx)]);\n        } else if (t < lowerDuration) {\n          // merge the start of future animation\n          style = mergeResults([run(fn, 0, ctx), style]);\n        }\n        lowerDuration = upperDuration;\n      }\n      return style;\n    };\n  },\n  delay: () => () => ({}),\n  parallel: ({ children: fns }, ctx) => {\n    return t => {\n      const styles = fns.map(fn => run(fn, t, ctx));\n      const result = mergeResults(styles, MULTIPLY);\n      return result;\n    };\n  },\n  list: ({ forEach: items, children }, ctx) => t => {\n    const mapper = children[0];\n    const results = items.map(mapper);\n    return results.map(element => run(element, t, ctx));\n  }\n};\n\nexport function createAnimation(type, config, ...children) {\n  const props = { ...config, children };\n  return {\n    type: typeof type === \"string\" ? playhead[type] : type,\n    props\n  };\n}\n\nexport const Stagger = (props, ctx) => t => {\n  const targets = props.targets;\n  const filter = target => !props.filter || props.filter(target);\n  const interval =\n    targets.filter(filter).length < 2\n      ? 0\n      : props.interval / (targets.filter(filter).length - 1);\n  let i = 0;\n  return targets.map(target => {\n    // console.log(target, props.filter(target));\n    if (!filter(target)) {\n      return {};\n    }\n    const animation = (\n      <parallel>\n        <chain durations={[i * interval, 1 - props.interval]}>\n          <delay />\n          {props.children[0]}\n        </chain>\n      </parallel>\n    );\n    i++;\n    const result = run(animation, t, ctx);\n    // console.log(\"Stagger Result\", t, result);\n    return result;\n  });\n};\n\nexport function Context() {\n  throw Error(\"shouldnt run Context\");\n}\n\nexport function run(node: any, t: number, context = {}) {\n  if (node.type === Context) {\n    const { children, ...patch } = node.props;\n    const newContext = { ...context, ...patch };\n    return run(children[0], t, newContext);\n  }\n\n  const result = node.type(node.props, context);\n  if (result.type) {\n    return run(result, t, context);\n  } else {\n    return result(t);\n  }\n}\n","/* @jsx createAnimation */\nimport { createAnimation, run } from \"./playhead/playhead\";\nimport easing from \"./playhead/easing\";\n\nfunction FadeIn() {\n  return <tween from={{ opacity: 0 }} to={{ opacity: 1 }} />;\n}\nfunction FadeOut() {\n  return <tween from={{ opacity: 1 }} to={{ opacity: 0 }} />;\n}\n\nfunction FadeOutIn() {\n  return (\n    <chain durations={[0.5, 0.5]}>\n      <FadeOut />\n      <FadeIn />\n    </chain>\n  );\n}\n\nconst dx = 250;\nconst offOpacity = 0.3;\nconst outOpacity = 0;\nconst outHieght = 0;\n\nconst SlideToLeft = () => (\n  <tween\n    from={{ x: 0, opacity: 1 }}\n    to={{ x: -dx, opacity: outOpacity }}\n    ease={easing.easeInQuad}\n  />\n);\n\nfunction ShrinkHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: null }} to={{ height: 0 }} />;\n  }\n  return (\n    <tween\n      from={{ height: lineHeight }}\n      to={{ height: outHieght }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction ExitLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={[0.35, 0.3, 0.35]}>\n      <SlideToLeft />\n      <ShrinkHeight lineHeight={lineHeight} />\n    </chain>\n  );\n}\n\nconst SlideFromRight = () => (\n  <tween\n    from={{ x: dx, opacity: outOpacity }}\n    to={{ x: 0, opacity: 1 }}\n    ease={easing.easeOutQuad}\n  />\n);\n\nfunction GrowHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: 0 }} to={{ height: null }} />;\n  }\n  return (\n    <tween\n      from={{ height: outHieght }}\n      to={{ height: lineHeight }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction EnterLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={[0.35, 0.3, 0.35]}>\n      <delay />\n      <GrowHeight lineHeight={lineHeight} />\n      <SlideFromRight />\n    </chain>\n  );\n}\n\nexport const fadeIn = (t: number) => run(<FadeIn />, t);\nexport const fadeOut = (t: number) => run(<FadeOut />, t);\nexport const fadeOutIn = (t: number) => run(<FadeOutIn />, t);\n\nexport function switchText<T>(\n  prev: Maybe<{ value: T }>,\n  next: Maybe<{ value: T }>,\n  t: number\n) {\n  // TODO merge with fadeBackground and fadeText\n  if (t < 0.5) {\n    return prev && prev.value;\n  } else {\n    return next && next.value;\n  }\n}\n\nfunction any<T>(prev: Maybe<T>, next: Maybe<T>): T {\n  return (prev || next) as T;\n}\n\nexport const exitLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<ExitLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const enterLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<EnterLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const focusLine = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  return run(\n    <tween\n      from={{ opacity: prev && prev.focus ? 1 : offOpacity }}\n      to={{ opacity: next && next.focus ? 1 : offOpacity }}\n    />,\n    t\n  );\n};\nexport const focusToken = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  const from = prev && prev.focus === false ? offOpacity : 1;\n  const to = next && next.focus === false ? offOpacity : 1;\n  return run(<tween from={{ opacity: from }} to={{ opacity: to }} />, t);\n};\n\nexport const tween = (from?: number, to?: number) => (\n  _prev: any,\n  _next: any,\n  t: number\n) => {\n  const result = run(\n    <tween\n      from={{ value: from || 0 }}\n      to={{ value: to || 0 }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n\n  return result.value;\n};\n\nexport const scaleToFocus = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n\n  if (!dimensions) {\n    return (_: number) => ({\n      scale: 1\n    });\n  }\n\n  const prevZoom = getZoom(prev);\n  const nextZoom = getZoom(next);\n\n  return run(\n    <tween\n      from={{\n        scale: prevZoom || nextZoom\n      }}\n      to={{\n        scale: nextZoom || prevZoom\n      }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n};\n\nfunction getZoom(step: any): number | null {\n  if (!step) return null;\n\n  const {\n    paddingBottom,\n    paddingTop,\n    containerHeight,\n    containerWidth,\n    contentWidth,\n    lineHeight\n  } = step.dimensions;\n\n  const contentHeight = step.focusCount * lineHeight;\n  const availableHeight =\n    containerHeight - Math.max(paddingBottom, paddingTop) * 2;\n  const yZoom = availableHeight / contentHeight;\n\n  // if there are lines that are too long for the container\n  const xZoom = (0.9 * containerWidth) / contentWidth;\n\n  return Math.min(yZoom, 1, xZoom);\n  // return 1;\n}\n","import React from \"react\";\nimport {\n  useContainerStyle,\n  usePreStyle,\n  useTokenStyles,\n  useSubtitleStyle,\n  useTitleStyle\n} from \"./theming\";\nimport { useAnimationContext, Context } from \"./animation-context\";\nimport {\n  fadeIn,\n  fadeOutIn,\n  fadeOut,\n  exitLine,\n  enterLine,\n  scaleToFocus,\n  switchText,\n  focusLine,\n  tween,\n  focusToken\n} from \"./animations\";\nimport { Step, Line as LineType, Token } from \"code-surfer-types\";\nimport { Animation, AnimationAndConfig } from \"playhead-types\";\n\ntype ContainerProps = {\n  stepPlayhead: number;\n  dimensions?: any;\n  steps: Step[];\n};\n\nfunction CodeSurferContainer({\n  stepPlayhead,\n  dimensions,\n  steps\n}: ContainerProps) {\n  const ctx = useAnimationContext(steps, stepPlayhead);\n\n  return (\n    <div\n      className=\"cs-container\"\n      style={{\n        ...useContainerStyle(),\n        width: \"100%\",\n        height: dimensions ? dimensions.containerHeight : \"100%\",\n        maxHeight: \"100%\",\n        position: \"relative\"\n      }}\n    >\n      <CodeSurferContent dimensions={dimensions} ctx={ctx} />\n      <Title ctx={ctx.useSelect(step => step.title)} />\n      <Subtitle ctx={ctx.useSelect(step => step.subtitle)} />\n    </div>\n  );\n}\n\nconst heightChangingAnimations: AnimationAndConfig<any, any>[] = [\n  {\n    animation: exitLine,\n    when: (prev, next) => prev && !next,\n    stagger: 0.2\n  },\n  {\n    animation: enterLine,\n    when: (prev, next) => next && !prev,\n    stagger: 0.2\n  }\n];\n\n/**\n * This part wasn't easy...\n * We need to adjust the scroll as the lines keep changing height\n * So we animate between the prev focus center and the next focus center\n * but taking into acount the height of the lines that are on top of the center\n * for each frame\n */\nfunction useScrollTop(dimensions: any, stepCtx: Context<Step>) {\n  if (!dimensions) return 0;\n\n  const linesCtx = stepCtx.useSelectMany(step => step.lines);\n  const [prevStep, nextStep] = stepCtx.spread();\n\n  const [realPrevCenter, realNextCenter] = React.useMemo(() => {\n    const allPrevLines = linesCtx.map(ctx =>\n      ctx.animate((prev, _next) => prev)\n    );\n    const allNextLines = linesCtx.map(ctx =>\n      ctx.animate((_prev, next) => next)\n    );\n\n    const prevCenter = prevStep ? prevStep.focusCenter : 0;\n    const nextCenter = nextStep ? nextStep.focusCenter : 0;\n\n    const prevCenterLine = prevStep && prevStep.lines[Math.floor(prevCenter)];\n    const nextCenterLine = nextStep && nextStep.lines[Math.floor(nextCenter)];\n\n    const realPrevCenter = prevStep\n      ? allPrevLines.indexOf(prevCenterLine) + (prevCenter % 1)\n      : 0;\n    const realNextCenter = nextStep\n      ? allNextLines.indexOf(nextCenterLine) + (nextCenter % 1)\n      : 0;\n\n    return [realPrevCenter, realNextCenter];\n  }, [prevStep, nextStep]);\n\n  const currentCenter = stepCtx.animate(tween(realPrevCenter, realNextCenter));\n\n  let scrollTop = 0;\n\n  const lineStyles = linesCtx.map(ctx =>\n    ctx.animations(heightChangingAnimations)\n  );\n\n  let i = 0;\n  while (i <= currentCenter - 1) {\n    const h = lineStyles[i].height;\n    scrollTop += h == null ? dimensions.lineHeight : h;\n    i += 1;\n  }\n  if (i != currentCenter) {\n    const h = lineStyles[i].height;\n    const height = h == null ? dimensions.lineHeight : h;\n    scrollTop += height * (currentCenter - i);\n  }\n\n  return scrollTop;\n}\n\nfunction CodeSurferContent({\n  dimensions,\n  ctx\n}: {\n  dimensions: any;\n  ctx: Context<Step>;\n}) {\n  const ref = React.useRef<HTMLPreElement | null>(null);\n\n  const scrollTop = useScrollTop(dimensions, ctx);\n  React.useLayoutEffect(() => {\n    if (ref.current == null) return;\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  const { scale } = ctx.animate(scaleToFocus);\n  const verticalOrigin = dimensions\n    ? dimensions.containerHeight / 2 + scrollTop\n    : 0;\n\n  const linesCtx = ctx.useSelectMany(step => step.lines);\n\n  return (\n    <pre\n      className=\"cs-content\"\n      ref={ref}\n      style={{\n        ...usePreStyle(),\n        margin: 0,\n        height: \"100%\",\n        overflow: \"hidden\"\n      }}\n    >\n      <code\n        className=\"cs-scaled-content\"\n        style={{\n          ...usePreStyle(),\n          display: \"block\",\n          height: dimensions ? dimensions.contentHeight : \"100%\",\n          width: dimensions && dimensions.contentWidth,\n          margin:\n            dimensions &&\n            `0 ${(dimensions.containerWidth - dimensions.contentWidth) / 2}px`,\n          transform: `scale(${scale})`,\n          transformOrigin: `center ${verticalOrigin}px`\n        }}\n      >\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n        {linesCtx.map((ctx, key) => (\n          <Line ctx={ctx} key={key} />\n        ))}\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n      </code>\n    </pre>\n  );\n}\n\nfunction Line({ ctx }: { ctx: Context<LineType> }) {\n  const lineStyle = ctx.animations([\n    ...heightChangingAnimations,\n    {\n      animation: focusLine\n    }\n  ]);\n\n  const { lineTokens, key, focusPerToken } = ctx.animate((prev, next) => {\n    const line = (prev || next) as LineType;\n    return {\n      lineTokens: line.tokens,\n      key: line.key,\n      focusPerToken:\n        (prev && prev.focusPerToken) || (next && next.focusPerToken)\n    };\n  });\n\n  const getStyleForToken = useTokenStyles();\n\n  let tokens: (Token & { animatedStyle: React.CSSProperties })[] = [];\n\n  let tokensCtx = ctx.useSelectMany(line => line.tokens);\n\n  if (focusPerToken) {\n    tokens = tokensCtx.map(tokenCtx => ({\n      ...tokenCtx.animate((prev, next) => (prev || next) as Token),\n      animatedStyle: tokenCtx.animate(focusToken)\n    }));\n  } else {\n    tokens = lineTokens.map(token => ({ ...token, animatedStyle: {} }));\n  }\n\n  return (\n    <div\n      style={{\n        overflow: \"hidden\",\n        ...lineStyle\n        // background: \"green\"\n      }}\n    >\n      <div\n        style={{ display: \"inline-block\" }}\n        className={`cs-line cs-line-${key}`}\n      >\n        {tokens.map((token, i) => (\n          <span\n            key={i}\n            style={{ ...getStyleForToken(token), ...token.animatedStyle }}\n          >\n            {token.content}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction Title({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <h4\n      className=\"cs-title\"\n      style={{\n        ...useTitleStyle(),\n        ...bgStyle\n      }}\n    >\n      <span style={textStyle}>{text}</span>\n    </h4>\n  );\n}\nfunction Subtitle({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <p\n      className=\"cs-subtitle\"\n      style={{\n        ...useSubtitleStyle(),\n        ...bgStyle\n      }}\n    >\n      <span style={textStyle}>{text}</span>\n    </p>\n  );\n}\n\nconst fadeBackground: Animation<any, { opacity: number }> = (prev, next, t) => {\n  let opacity = 1;\n  if (!prev) {\n    opacity = t;\n  }\n  if (!next) {\n    opacity = 1 - t;\n  }\n  return { opacity };\n};\n\nconst fadeText: Animation<{ value: any } | undefined, { opacity: number }> = (\n  prev,\n  next,\n  t\n) => {\n  if (prev && next && prev.value !== next.value) {\n    return fadeOutIn(t);\n  }\n  if (!prev) {\n    return fadeIn(t);\n  }\n  if (!next) {\n    return fadeOut(t);\n  }\n  return { opacity: 1 };\n};\n\nexport default CodeSurferContainer;\n","import React from \"react\";\n\nexport default function useWindowResize(handler, deps) {\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, deps);\n}\n","import React from \"react\";\nimport { Step } from \"code-surfer-types\";\nimport useWindowResize from \"./use-window-resize\";\n\nfunction useDimensions<T extends HTMLElement | null>(\n  ref: React.MutableRefObject<T>,\n  steps: Step[]\n) {\n  const [result, setResult] = React.useState<any | null>(null);\n\n  useWindowResize(() => setResult(null), [setResult]);\n\n  React.useLayoutEffect(() => {\n    if (!ref.current) return;\n    if (result) return;\n\n    const containers = ref.current.querySelectorAll(\n      \".cs-container\"\n    ) as NodeListOf<HTMLElement>;\n\n    const stepsDimensions = Array.from(containers).map((container, i) =>\n      getStepDimensions(container, steps[i])\n    );\n\n    const containerHeight = Math.max(\n      ...stepsDimensions.map(d => d.containerHeight)\n    );\n\n    const containerWidth = Math.max(\n      ...stepsDimensions.map(d => d.containerWidth)\n    );\n\n    const contentWidth = Math.max(...stepsDimensions.map(d => d.contentWidth));\n\n    const lineHeight = Math.max(...stepsDimensions.map(d => d.lineHeight));\n\n    setResult({\n      dimensions: {\n        lineHeight,\n        contentWidth,\n        containerHeight,\n        containerWidth\n      },\n      steps: steps.map((step, i) => ({\n        ...step,\n        lines: step.lines.map(l => ({\n          ...l,\n          dimensions: { lineHeight: stepsDimensions[i].lineHeight }\n        })),\n        dimensions: {\n          paddingTop: stepsDimensions[i].paddingTop,\n          paddingBottom: stepsDimensions[i].paddingBottom,\n          lineHeight: stepsDimensions[i].lineHeight,\n          contentWidth,\n          containerHeight,\n          containerWidth\n        }\n      }))\n    });\n  }, [result]);\n\n  return result || {};\n}\n\nfunction getStepDimensions(container: HTMLElement, step: Step) {\n  const longestLine = getLongestLine(step);\n  const longestLineKey = longestLine && longestLine.key;\n  const longestLineSpan = container.querySelector(`.cs-line-${longestLineKey}`);\n  const containerParent = container.parentElement as HTMLElement;\n  const title = container.querySelector(\".cs-title\") as HTMLElement;\n  const subtitle = container.querySelector(\".cs-subtitle\") as HTMLElement;\n\n  const lineCount = step.lines.length;\n  const heightOverflow =\n    containerParent.scrollHeight - containerParent.clientHeight;\n  const avaliableHeight = container.scrollHeight - heightOverflow;\n\n  const lineHeight = longestLineSpan ? longestLineSpan.clientHeight : 0;\n  const paddingTop = title ? outerHeight(title) : lineHeight;\n  const paddingBottom = subtitle ? outerHeight(subtitle) : lineHeight;\n\n  const codeHeight = lineCount * lineHeight * 2;\n  // const maxContentHeight = codeHeight + paddingTop + paddingBottom;\n  // const containerHeight = Math.min(maxContentHeight, avaliableHeight);\n  const containerHeight = avaliableHeight;\n  const containerWidth = container.clientWidth;\n  const contentHeight = codeHeight + containerHeight;\n\n  const contentWidth = longestLineSpan ? longestLineSpan.clientWidth : 0;\n\n  return {\n    lineHeight,\n    contentHeight,\n    contentWidth,\n    paddingTop,\n    paddingBottom,\n    containerHeight,\n    containerWidth\n  };\n}\n\nfunction outerHeight(element: HTMLElement) {\n  var styles = window.getComputedStyle(element);\n  var margin =\n    parseFloat(styles[\"marginTop\"] || \"0\") +\n    parseFloat(styles[\"marginBottom\"] || \"0\");\n  return element.offsetHeight + margin;\n}\n\nfunction getLongestLine(step: Step) {\n  if (!step || step.lines.length === 0) {\n    return null;\n  }\n  return step.lines.reduce((a, b) =>\n    a.content.length > b.content.length ? a : b\n  );\n}\n\nexport default useDimensions;\n","import React from \"react\";\nimport { InputStep, CodeSurferTheme } from \"code-surfer-types\";\nimport { parseSteps } from \"./parse-steps\";\nimport Frame from \"./frame\";\nimport useDimensions from \"./dimensions\";\nimport { ThemeContext } from \"./theming\";\n\nimport \"./default-syntaxes\";\n\ntype CodeSurferProps = {\n  steps: InputStep[];\n  progress: number; // float between [0, steps.lenght - 1]\n  theme?: CodeSurferTheme;\n};\n\nfunction CodeSurfer({ progress, steps: inputSteps, theme }: CodeSurferProps) {\n  const steps = parseSteps(inputSteps, inputSteps[0].lang || \"javascript\");\n  // const stepIndex = Math.round(progress);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { dimensions, steps: stepsWithDimensions } = useDimensions(ref, steps);\n  if (!dimensions) {\n    return (\n      <ThemeContext.Provider value={theme}>\n        <div\n          ref={ref}\n          style={{ overflow: \"auto\", height: \"100%\", width: \"100%\" }}\n        >\n          {steps.map((_step, i) => (\n            <div\n              key={i}\n              style={{\n                overflow: \"auto\",\n                height: \"100%\",\n                width: \"100%\"\n              }}\n            >\n              <Frame steps={steps} stepPlayhead={i} />\n            </div>\n          ))}\n        </div>\n      </ThemeContext.Provider>\n    );\n  } else {\n    return (\n      <ThemeContext.Provider value={theme}>\n        <div\n          style={{ height: \"100%\", width: \"100%\", overflow: \"auto\" }}\n          ref={ref}\n        >\n          <Frame\n            steps={stepsWithDimensions}\n            stepPlayhead={progress}\n            dimensions={dimensions}\n          />\n        </div>\n      </ThemeContext.Provider>\n    );\n  }\n}\n\nexport default CodeSurfer;\nexport * from \"./themes\";\n","import { parse } from \"shell-quote\";\n\ntype ParsedMetastring =\n  | { focus?: string }\n  | { [key: string]: { value: string } };\n\n/**\n * The metastring is the thing that comes after the language in markdown codeblocks\n *\n * ```js this is the metastring\n * code goes here\n * ```\n */\nexport function parseMetastring(metastring: string): ParsedMetastring {\n  if (!metastring) {\n    return {};\n  }\n\n  const argv = parse(metastring);\n\n  const result: ParsedMetastring = {};\n  argv.forEach(arg => {\n    if (!arg.includes(\"=\")) {\n      result.focus = arg;\n    } else {\n      const [key, value] = arg.split(/=(.*)/);\n      result[key] = { value };\n    }\n  });\n  return result;\n}\n","import { parseMetastring } from \"./codeblock-metastring-parser\";\nimport Code from \"./code\";\nimport React from \"react\";\n\nexport function readStepFromElement(element) {\n  if (element.type === Code) {\n    // wrap everything except [code, lang, focus] in {value}\n    const stepEntries = Object.entries(element.props).map(([key, value]) => ({\n      [key]: [\"code\", \"focus\", \"lang\"].includes(key) ? value : { value }\n    }));\n    return Object.assign({}, ...stepEntries);\n  }\n  if (!element.props.children || !element.props.children.props) {\n    return null;\n  }\n  const { props } = element.props.children;\n  const classNames = props.className;\n  return {\n    code: props.children,\n    lang: classNames && classNames[0].substring(\"language-\".length),\n    ...parseMetastring(props.metastring)\n  };\n}\n","import React from \"react\";\nimport { UnknownError } from \"./standalone/errors\";\n\nexport default class ErrorBoundary extends React.Component<\n  {},\n  { error?: any }\n> {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  componentDidCatch(error, info) {\n    // console.log(error, info);\n  }\n\n  render() {\n    if (!this.state.error) {\n      return this.props.children;\n    } else if (this.state.error.element) {\n      return this.state.error.element;\n    } else {\n      console.error(this.state.error);\n      return <UnknownError error={this.state.error} />;\n    }\n  }\n}\n","import { useDeck } from \"mdx-deck\";\nimport React from \"react\";\n\nexport function useNotes(notesElements) {\n  const context = useDeck();\n  React.useEffect(() => {\n    if (!context || !context.register) return;\n    if (typeof context.index === \"undefined\") return;\n\n    const notes = getNotesFromElements(notesElements);\n\n    context.register(context.index, {\n      notes\n    });\n  }, []);\n}\n\nfunction getNotesFromElements(notesElements) {\n  const notes = notesElements.map(element => {\n    if (!element) {\n      // this is a step with empty notes\n      return null;\n    }\n\n    const { props } = element;\n\n    if (props.inline) {\n      // this is <Notes inline={true} />\n      return {\n        inline: true,\n        text: props.children\n      };\n    }\n\n    // this is <Notes>something</Notes>\n    // we shouldn't return an object here,\n    // to be compatible with the default Presenter\n    return props && props.children;\n  });\n\n  if (notes.length) {\n    const lastNotes = notes[notes.length - 1];\n    // we add an extra EOL to the last step\n    notes[notes.length - 1] = (lastNotes || \"\") + \"\\n\";\n  }\n\n  return notes;\n}\n\nexport function getTextFromNotes(notes) {\n  if (notes === null) {\n    // this is a step with empty notes\n    // we don't add extra lines here\n    // to allow a line of text with multiple notes\n    return \"\";\n  }\n\n  if (typeof notes === \"object\") {\n    // this comes from a step with inline=true\n    // but we check again just in case\n    return notes.text + (notes.inline ? \"\" : \"\\n\");\n  } else {\n    // this could be an empty note from any slide\n    // or a note from a step without the inline prop\n    return notes + \"\\n\";\n  }\n}\n","import { useSteps } from \"mdx-deck\";\n\nexport default function(stepsCount) {\n  const step = useSteps(stepsCount);\n  return step === Infinity ? 0 : step;\n}\n","// based on https://github.com/streamich/react-use/blob/master/src/useSpring.ts\n// TODO remove dependency\nimport rebound from \"rebound\";\nimport { useState, useEffect } from \"react\";\n\nexport default function useSpring({\n  target = 0,\n  current = null,\n  tension = 0,\n  friction = 13,\n  round = x => x\n}) {\n  const [spring, setSpring] = useState(null);\n  const [value, setValue] = useState(target);\n\n  useEffect(() => {\n    const listener = {\n      onSpringUpdate: spring => {\n        const value = spring.getCurrentValue();\n        setValue(round(value));\n      }\n    };\n\n    if (!spring) {\n      const newSpring = new rebound.SpringSystem().createSpring(\n        tension,\n        friction\n      );\n      newSpring.setCurrentValue(target);\n      setSpring(newSpring);\n      newSpring.addListener(listener);\n      return;\n    }\n\n    return () => {\n      spring.removeListener(listener);\n      setSpring(null);\n    };\n  }, [tension, friction]);\n\n  useEffect(() => {\n    if (spring) {\n      spring.setEndValue(target);\n      if (current != null) {\n        spring.setCurrentValue(current);\n      }\n    }\n  }, [target, current]);\n\n  return value;\n}\n","import useSteps from \"./use-steps\";\nimport useSpring from \"./use-spring\";\n\nfunction useStepSpring(stepsCount) {\n  // step index according to mdx-deck\n  const targetStepIndex = useSteps(stepsCount - 1);\n\n  // real number between 0 and stepsCount - 1\n  const currentStepSpring = useSpring({\n    target: targetStepIndex,\n    round: x => Math.round(x * 1000) / 1000\n  });\n\n  return currentStepSpring;\n}\n\nexport { useStepSpring };\n","import React from \"react\";\nimport { useDeck, Notes, useTheme } from \"mdx-deck\";\nimport CodeSurfer from \"./standalone/code-surfer\";\nimport { readStepFromElement } from \"./step-reader\";\nimport ErrorBoundary from \"./error-boundary\";\nimport { useNotes } from \"./notes\";\nimport { useStepSpring } from \"./use-step-spring\";\n\nfunction CodeSurferLayout({ children }) {\n  const deck = useDeck();\n  const steps = React.useMemo(getStepsFromChildren(children), [deck.index]);\n\n  useNotes(steps.map(s => s.notesElement));\n  const progress = useStepSpring(steps.length);\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        width: \"100vw\",\n        maxWidth: \"100%\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      }}\n      className=\"cs-layout\"\n    >\n      <CodeSurfer steps={steps} progress={progress} theme={theme.codeSurfer} />\n    </div>\n  );\n}\n\nconst getStepsFromChildren = children => () => {\n  const kids = React.Children.toArray(children);\n  return kids\n    .map((child, i) => {\n      const step = readStepFromElement(child);\n      if (!step) return;\n      const nextChild = kids[i + 1];\n      if (nextChild && nextChild.type === Notes) {\n        step.notesElement = nextChild;\n      }\n      return step;\n    })\n    .filter(x => x);\n};\n\nexport default props => (\n  <ErrorBoundary>\n    <CodeSurferLayout {...props} />\n  </ErrorBoundary>\n);\n","import React from \"react\";\nimport { readStepFromElement } from \"./step-reader\";\nimport CodeSurfer from \"./standalone/code-surfer\";\nimport { useDeck, Notes, useTheme } from \"mdx-deck\";\nimport ErrorBoundary from \"./error-boundary\";\nimport {\n  useSubtitleStyle,\n  useTitleStyle,\n  ThemeContext\n} from \"./standalone/theming\";\nimport { useNotes } from \"./notes\";\nimport { useStepSpring } from \"./use-step-spring\";\n\nfunction ColumnLayout({ children, themes = [], sizes }) {\n  const deck = useDeck();\n  const [columns, titles, subtitles, notesElements] = React.useMemo(\n    () => getColumnsFromChildren(children, sizes),\n    [deck.index]\n  );\n\n  useNotes(notesElements);\n  const progress = useStepSpring(columns[0].steps.length);\n  const stepIndex = Math.round(progress);\n  const theme = useTheme();\n  return (\n    <div\n      style={{\n        width: \"100vw\",\n        maxWidth: \"100%\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontSize: \"0.8em\",\n        position: \"relative\"\n      }}\n      className=\"cs-col-layout\"\n    >\n      {columns.map((column, i) => (\n        <Column\n          key={i}\n          column={column}\n          progress={progress}\n          theme={themes[i] ? themes[i].codeSurfer : theme.codeSurfer}\n        />\n      ))}\n\n      <ThemeContext.Provider value={theme.codeSurfer}>\n        <Title text={titles[stepIndex]} />\n        <Subtitle text={subtitles[stepIndex]} />\n      </ThemeContext.Provider>\n    </div>\n  );\n}\n\nfunction Column({ column, progress, theme }) {\n  return (\n    <div\n      style={{\n        flex: column.flex,\n        overflow: \"hidden\",\n        height: \"100%\"\n      }}\n    >\n      {column.isCode ? (\n        <CodeSurfer steps={column.steps} progress={progress} theme={theme} />\n      ) : (\n        column.steps[Math.round(progress)].element\n      )}\n    </div>\n  );\n}\nfunction Title({ text }) {\n  if (!text) return null;\n  return (\n    <h4 className=\"cs-title\" style={useTitleStyle()}>\n      <span>{text}</span>\n    </h4>\n  );\n}\nfunction Subtitle({ text }) {\n  if (!text) return null;\n  return (\n    <p\n      className=\"cs-subtitle\"\n      style={{ ...useSubtitleStyle(), margin: \"0.3em 0\" }}\n    >\n      <span>{text}</span>\n    </p>\n  );\n}\n\nfunction getColumnsFromChildren(children, sizes = []) {\n  const columns = [];\n  const stepElements = React.Children.toArray(children);\n  stepElements.forEach((stepElement, stepIndex) => {\n    React.Children.toArray(stepElement.props.children)\n      .filter(element => element.type !== Notes)\n      .forEach((codeElement, columnIndex) => {\n        columns[columnIndex] = columns[columnIndex] || {\n          steps: [],\n          isCode: true\n        };\n        const step = readStepFromElement(codeElement);\n        columns[columnIndex].isCode = columns[columnIndex].isCode && step;\n        columns[columnIndex].steps[stepIndex] = step || {\n          element: codeElement\n        };\n      });\n  });\n\n  columns.forEach((column, columnIndex) => {\n    column.flex = sizes[columnIndex] || 1;\n  });\n\n  const titles = stepElements.map(stepElement => stepElement.props.title);\n  const subtitles = stepElements.map(stepElement => stepElement.props.subtitle);\n  const notesElements = stepElements.map(stepElement => {\n    const stepChildren = React.Children.toArray(stepElement.props.children);\n    const notesElement = stepChildren.find(element => element.type === Notes);\n    return notesElement;\n  });\n\n  return [columns, titles, subtitles, notesElements];\n}\n\nexport default props => (\n  <ErrorBoundary>\n    <ColumnLayout {...props} />\n  </ErrorBoundary>\n);\n","import React from \"react\";\nimport { globalHistory } from \"@reach/router\";\nimport { Zoom, Clock, Slide, useTheme } from \"mdx-deck\";\nimport useSpring from \"./use-spring\";\nimport { getTextFromNotes } from \"./notes\";\nimport { Global, css } from \"@emotion/core\";\nimport { Swipeable } from \"react-swipeable\";\n\nconst Teleprompter = ({ index, children, ...rest }) => {\n  const ref = React.useRef(null);\n  const [target, setTarget] = React.useState(0);\n  const scrollTop = useSpring({\n    target,\n    friction: 25\n  });\n\n  React.useEffect(() => {\n    const self = ref.current;\n    const child = self.children[index + 1];\n    const childTop = child.offsetTop - self.offsetTop;\n    const childHeight = child.getBoundingClientRect().height;\n    const selfHeight = self.getBoundingClientRect().height;\n    if (childHeight) {\n      setTarget(childTop - selfHeight / 2 + childHeight / 2);\n    }\n  }, [index]);\n\n  React.useLayoutEffect(() => {\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  return (\n    <div {...rest} ref={ref}>\n      <div style={{ height: \"50%\" }} />\n      {children}\n      <div style={{ height: \"50%\" }} />\n    </div>\n  );\n};\n\nfunction AllSlides({ context, slides, style }) {\n  return (\n    <div style={style}>\n      {slides.map((Component, i) => (\n        <Slide key={i} context={{ ...context, index: i }} index={i}>\n          <Component />\n        </Slide>\n      ))}\n    </div>\n  );\n}\n\nfunction MobilePresenter({\n  allNotes,\n  noteIndex,\n  children,\n  windowWidth,\n  previous,\n  next,\n  slides,\n  index\n}) {\n  const ratio = 16 / 9;\n  const deckHeight = windowWidth / ratio;\n  const windowHeight = window.innerHeight;\n  const separatorHeight = 6;\n  const notesHeight = windowHeight - deckHeight - separatorHeight;\n  const { colors } = useTheme();\n  const progress = (100 * (index + 1)) / slides.length;\n  return (\n    <div\n      className=\"presenter\"\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: windowHeight,\n        background: colors.background,\n        overflow: \"hidden\"\n      }}\n    >\n      <Global\n        styles={css`\n          .ekm8v3h0,\n          .cs-layout,\n          cs-col-layout {\n            height: ${deckHeight}px !important;\n          }\n        `}\n      />\n      <div\n        style={{\n          height: deckHeight\n        }}\n      >\n        {children}\n      </div>\n      <div\n        style={{\n          height: separatorHeight,\n          background: colors.link,\n          opacity: 0.7,\n          boxShadow: \"2px 2px 2px 1px rgba(0, 0, 0, 0.25)\"\n        }}\n      >\n        <div\n          style={{\n            height: \"100%\",\n            width: `${100 - progress}%`,\n            opacity: 0.5,\n            float: \"right\",\n            background: \"#444\"\n          }}\n        />\n      </div>\n      <div style={{ height: notesHeight }}>\n        <Swipeable\n          onSwipedRight={previous}\n          onSwipedLeft={next}\n          onSwipedDown={previous}\n          onSwipedUp={next}\n          style={{ height: \"100%\" }}\n        >\n          <Teleprompter\n            index={noteIndex}\n            style={{\n              color: colors.text,\n              whiteSpace: \"pre-wrap\",\n              overflow: \"hidden\",\n              height: \"100%\",\n              width: \"90%\",\n              margin: \"0px auto\"\n            }}\n            onClick={next}\n          >\n            {allNotes.map((note, i) => (\n              <span style={{ opacity: noteIndex === i ? 1 : 0.5 }} key={i}>\n                {note.notes}\n              </span>\n            ))}\n          </Teleprompter>\n        </Swipeable>\n      </div>\n    </div>\n  );\n}\n\nfunction DesktopPresenter({ slides, index, allNotes, noteIndex, children }) {\n  return (\n    <div\n      style={{\n        color: \"#fafafa\",\n        backgroundColor: \"#222\",\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\"\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          padding: \"10px\",\n          boxSizing: \"border-box\"\n        }}\n      >\n        <Zoom zoom={5 / 8}>{children}</Zoom>\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            width: \"100%\",\n            padding: \"0 16px\",\n            background: \"#333\"\n          }}\n        >\n          <pre>\n            Slide {index + 1} of {slides.length}\n          </pre>\n          <Clock />\n        </div>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={globalHistory.location.origin + globalHistory.location.pathname}\n          style={{ color: \"#bbb\", padding: \"10px\" }}\n        >\n          Open Slides in New Window\n        </a>\n      </div>\n      <div style={{ height: \"100%\", boxSizing: \"border-box\" }}>\n        <Teleprompter\n          index={noteIndex}\n          style={{\n            color: \"#FFFF33\",\n            whiteSpace: \"pre-wrap\",\n            overflow: \"hidden\",\n            height: \"100%\",\n            width: \"90%\",\n            margin: \"5px auto\"\n          }}\n        >\n          {allNotes.map((note, i) => (\n            <span style={{ opacity: noteIndex === i ? 1 : 0.5 }} key={i}>\n              {note.notes}\n            </span>\n          ))}\n        </Teleprompter>\n      </div>\n    </div>\n  );\n}\n\nexport const Presenter = props => {\n  const { slides, metadata, index, step, children, previous, next } = props;\n  const windowWidth = useWindowWidth();\n\n  const [areNotesReady, setNotesReady] = React.useState(false);\n  React.useEffect(() => {\n    setNotesReady(true);\n  }, []);\n\n  const allNotes = React.useMemo(() => {\n    return slides.flatMap((slide, slideIndex) => {\n      const { notes: slideNotes } = metadata[slideIndex] || { notes: \"\" };\n\n      if (Array.isArray(slideNotes)) {\n        return slideNotes.map((stepNotes, stepIndex) => ({\n          notes: getTextFromNotes(stepNotes),\n          slideIndex,\n          stepIndex\n        }));\n      } else {\n        return {\n          notes: getTextFromNotes(slideNotes),\n          slideIndex,\n          stepIndex: \"any\"\n        };\n      }\n    });\n  }, [areNotesReady]);\n\n  const noteIndex = allNotes.findIndex(\n    stepNotes =>\n      stepNotes.slideIndex === index &&\n      (stepNotes.stepIndex === \"any\" || stepNotes.stepIndex === step)\n  );\n\n  return (\n    <React.Fragment>\n      {!areNotesReady && (\n        // Need to render all slides to run the effects that set the notes\n        <AllSlides\n          style={{ display: \"none\" }}\n          context={props}\n          slides={slides}\n        />\n      )}\n      {windowWidth > 700 ? (\n        <DesktopPresenter\n          {...{ allNotes, index, slides, noteIndex, children }}\n        />\n      ) : (\n        <MobilePresenter\n          {...{\n            allNotes,\n            index,\n            slides,\n            noteIndex,\n            children,\n            windowWidth,\n            previous,\n            next\n          }}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nfunction useWindowWidth() {\n  const [width, changeWidth] = React.useState(window && window.innerWidth);\n  React.useEffect(() => {\n    const handleResize = () => changeWidth(window.innerWidth);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [changeWidth]);\n  return width;\n}\n\nexport default Presenter;\n","import Presenter from \"./presenter\";\nimport {\n  dracula as draculaTheme,\n  duotoneLight as duotoneLightTheme,\n  duotoneDark as duotoneDarkTheme,\n  github as githubTheme,\n  nightOwl as nightOwlTheme,\n  oceanicNext as oceanicNextTheme,\n  shadesOfPurple as shadesOfPurpleTheme,\n  ultramin as ultraminTheme,\n  vsDark as vsDarkTheme\n} from \"./standalone/themes\";\n\nfunction mdThemes(theme) {\n  const stringStyle = theme.styles.find(s => s.types.includes(\"string\"));\n\n  const color = theme.pre.color;\n  const bg = theme.pre.background;\n\n  return [\n    { codeSurfer: theme },\n    {\n      colors: {\n        text: color,\n        background: bg,\n        link: stringStyle && stringStyle.style.color,\n        pre: color,\n        code: color,\n        preBackground: bg\n      },\n      Presenter,\n      codeSurfer: theme\n    }\n  ];\n}\n\nconst [draculaPartial, dracula] = mdThemes(draculaTheme);\nconst [duotoneLightPartial, duotoneLight] = mdThemes(duotoneLightTheme);\nconst [duotoneDarkPartial, duotoneDark] = mdThemes(duotoneDarkTheme);\nconst [githubPartial, github] = mdThemes(githubTheme);\nconst [nightOwlPartial, nightOwl] = mdThemes(nightOwlTheme);\nconst [oceanicNextPartial, oceanicNext] = mdThemes(oceanicNextTheme);\nconst [shadesOfPurplePartial, shadesOfPurple] = mdThemes(shadesOfPurpleTheme);\nconst [ultraminPartial, ultramin] = mdThemes(ultraminTheme);\nconst [vsDarkPartial, vsDark] = mdThemes(vsDarkTheme);\n\nexport {\n  dracula,\n  draculaPartial,\n  duotoneLight,\n  duotoneLightPartial,\n  duotoneDark,\n  duotoneDarkPartial,\n  github,\n  githubPartial,\n  nightOwl,\n  nightOwlPartial,\n  oceanicNext,\n  oceanicNextPartial,\n  shadesOfPurple,\n  shadesOfPurplePartial,\n  ultramin,\n  ultraminPartial,\n  vsDark,\n  vsDarkPartial\n};\n"],"names":["Code","Step","UnknownError","error","React","ErrorBox","header","body","toString","grammarNotFound","lang","element","Fragment","Mark","href","style","color","invalidFocusNumber","n","withFocusString","focusString","withStepIndex","stepIndex","StepErrorHeader","invalidLineOrColumnNumber","background","border","padding","maxWidth","margin","fontFamily","fontSize","ordinal","children","fontWeight","i","j","k","newlineRe","flattenTokens","tokens","flatList","forEach","token","type","content","Array","isArray","push","wrapToken","prismToken","parentType","tokenizeStrings","prismTokens","map","tokenize","code","language","grammar","Prism","languages","nestedTokens","currentLine","lines","contentLines","split","firstContent","shift","undefined","myDiff","oldCode","newCode","changes","diffLines","oldIndex","value","count","removed","added","lastLine","pop","result","insert","array","index","elements","splice","slideDiff","codes","slideIndex","prevLines","filter","l","slides","includes","prevCode","currCode","change","prevLine","addAtIndex","indexOf","addLines","tokenLines","currLines","line","parseLines","length","getSlides","_","lineIndex","isNew","show","key","getCodes","rawSteps","s","applyPatch","parseFocus","focus","Error","parts","parsePart","Map","flat","part","columnsMatch","match","columns","columnsList","expandString","Number","columnIndexes","c","lineNumber","start","end","isNaturalNumber","errors","startNumber","list","n1","Math","abs","n2","parseInt","isNaN","parseSteps","stepsLines","reverse","steps","step","parseStep","e","focusMap","has","columnFocus","get","focusPerToken","splitTokensToColumns","setTokenFocus","rest","getDefaultFocus","focusIndexes","from","keys","focusStart","min","apply","focusEnd","max","focusCenter","focusCount","indexes","tokenArray","chars","char","focusColumns","makeTheme","prismTheme","override","styles","title","plain","backgroundColor","subtitle","pre","types","fontStyle","opacity","theme","textDecorationLine","colors","comment","keyword","primitive","string","variable","punctuation","tag","className","method","operator","ThemeContext","createContext","useSafeTheme","contextTheme","useContext","base","useTokenStyles","themeStylesByType","useMemo","Object","create","assign","getStyleForToken","usePreStyle","useContainerStyle","container","useTitleStyle","position","top","width","useSubtitleStyle","bottom","boxSizing","Tuple","prev","next","spread","select","selector","newPrev","newNext","selectMany","ArrayTuple","_key","_mapper","_getChildrenMap","_dict","maybePrevs","maybeNexts","prevs","nexts","unsortedMap","set","sortedKeys","sort","a","b","childrenMap","mapper","tuple","Context","t","parent","useSelect","newTuple","useSelectMany","ListContext","animate","animation","config","when","staggeredT","stagger","items","childCtx","prevChild","nextChild","isSelected","isThisChild","x","N","currentIndex","findIndex","duration","tick","animations","results","merge","childTuple","useAnimationContext","playhead","floor","MULTIPLY","composite","firstResult","mergeArrays","mergeObjects","merged","opacities","reduce","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","mergeResults","always","props","context","to","tween","ease","easing","chain","ctx","fns","durations","run","lowerDuration","fn","thisDuration","upperDuration","innerT","delay","parallel","createAnimation","node","patch","newContext","FadeIn","FadeOut","FadeOutIn","dx","offOpacity","outOpacity","outHieght","SlideToLeft","ShrinkHeight","lineHeight","height","ExitLine","SlideFromRight","GrowHeight","EnterLine","fadeIn","fadeOut","fadeOutIn","switchText","any","exitLine","dimensions","enterLine","focusLine","focusToken","_prev","_next","scaleToFocus","scale","prevZoom","getZoom","nextZoom","paddingBottom","paddingTop","containerHeight","containerWidth","contentWidth","contentHeight","availableHeight","yZoom","xZoom","CodeSurferContainer","stepPlayhead","maxHeight","CodeSurferContent","Title","Subtitle","heightChangingAnimations","useScrollTop","stepCtx","linesCtx","prevStep","nextStep","allPrevLines","allNextLines","prevCenter","nextCenter","prevCenterLine","nextCenterLine","realPrevCenter","realNextCenter","currentCenter","scrollTop","lineStyles","h","ref","useRef","useLayoutEffect","current","verticalOrigin","overflow","display","transform","transformOrigin","Line","lineStyle","lineTokens","tokensCtx","tokenCtx","animatedStyle","text","bgStyle","fadeBackground","textStyle","fadeText","useWindowResize","handler","deps","useEffect","window","addEventListener","removeEventListener","useDimensions","useState","setResult","containers","querySelectorAll","stepsDimensions","getStepDimensions","d","longestLine","getLongestLine","longestLineKey","longestLineSpan","querySelector","containerParent","parentElement","lineCount","heightOverflow","scrollHeight","clientHeight","avaliableHeight","outerHeight","codeHeight","clientWidth","getComputedStyle","parseFloat","offsetHeight","CodeSurfer","progress","inputSteps","stepsWithDimensions","Provider","_step","Frame","parseMetastring","metastring","argv","parse","arg","readStepFromElement","stepEntries","entries","classNames","substring","ErrorBoundary","state","getDerivedStateFromError","componentDidCatch","info","render","console","Component","useNotes","notesElements","useDeck","register","notes","getNotesFromElements","inline","lastNotes","getTextFromNotes","stepsCount","useSteps","Infinity","useSpring","target","tension","friction","round","spring","setSpring","setValue","listener","onSpringUpdate","getCurrentValue","newSpring","rebound","SpringSystem","createSpring","setCurrentValue","addListener","removeListener","setEndValue","useStepSpring","targetStepIndex","currentStepSpring","CodeSurferLayout","deck","getStepsFromChildren","notesElement","useTheme","flexDirection","justifyContent","alignItems","codeSurfer","kids","Children","toArray","child","Notes","ColumnLayout","themes","sizes","getColumnsFromChildren","titles","subtitles","column","Column","flex","isCode","stepElements","stepElement","codeElement","columnIndex","stepChildren","find","Teleprompter","setTarget","self","childTop","offsetTop","childHeight","getBoundingClientRect","selfHeight","AllSlides","Slide","MobilePresenter","allNotes","noteIndex","windowWidth","previous","ratio","deckHeight","windowHeight","innerHeight","separatorHeight","notesHeight","Global","css","link","boxShadow","Swipeable","onSwipedRight","onSwipedLeft","onSwipedDown","onSwipedUp","whiteSpace","onClick","note","DesktopPresenter","Zoom","zoom","Clock","rel","globalHistory","location","origin","pathname","Presenter","metadata","useWindowWidth","areNotesReady","setNotesReady","flatMap","slide","slideNotes","stepNotes","innerWidth","changeWidth","handleResize","mdThemes","stringStyle","bg","preBackground","draculaTheme","draculaPartial","dracula","duotoneLightTheme","duotoneLightPartial","duotoneLight","duotoneDarkTheme","duotoneDarkPartial","duotoneDark","githubTheme","githubPartial","github","nightOwlTheme","nightOwlPartial","nightOwl","oceanicNextTheme","oceanicNextPartial","oceanicNext","shadesOfPurpleTheme","shadesOfPurplePartial","shadesOfPurple","ultraminTheme","ultraminPartial","ultramin","vsDarkTheme","vsDarkPartial","vsDark"],"mappings":"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"}